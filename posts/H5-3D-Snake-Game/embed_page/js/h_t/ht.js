!function(a,e,N){"use strict";var H,U,g,Q,G,t,n,s,i,v,p,c,L,P,b,j,R,z,F,A,W,X,Y,m,o,r,h,l,u,d,f,_,y,w,x,C,I,O,S,T,V,D,E,k,M,B,q,Z,J,$,K="ht";if(!a.ht){!function(){for(var o=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!a.requestAnimationFrame;++e)a.requestAnimationFrame=a[t[e]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[t[e]+"CancelAnimationFrame"]||a[t[e]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-o)),n=a.setTimeout(function(){t(e+i)},i);return o=e+i,n}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(t){jt(t)})}();var tt,et,it,nt=a.document,ot=null,rt=a.ht={},at=a.htconfig,st=rt.Default=at&&at.Default||{},ht=rt.Style=at&&at.Style||{},lt=rt.Color=at&&at.Color||{},ct=rt.IsGetter=at&&at.IsGetter||{},ut=Math,dt=ut.round,ft=ut.floor,gt=ut.ceil,_t=ut.sqrt,vt=ut.max,pt=ut.min,bt=ut.abs,mt=ut.cos,yt=ut.acos,wt=ut.sin,xt=ut.pow,Ct=ut.asin,It=ut.PI,Ot=2*It,St=It/2,Tt=ut.tan,Vt=ut.atan2,Dt=ut.random,Et=!1,kt=a.parseInt||global.parseInt,Pt="2488-05-16",Mt=function(){try{return-1<a.navigator.platform.indexOf("Win")}catch(t){}}(),Bt=function(t){return t*t},Lt=a.setTimeout,jt=a.clearTimeout,Rt=a.location,zt=a.navigator?a.navigator.userAgent.toLowerCase():"",Ft=function(t){return t.test(zt)},At=Ft(/msie/)||Ft(/trident/),Wt=Ft(/msie 10/),Ht=Ft(/firefox/),Ut=Ft(/mac/),Nt=st.isTouchable===N?!Mt&&(!!nt&&"ontouchend"in nt):st.isTouchable,Qt="default",Gt="single",Xt="multiple",Yt="front",qt="back",Zt="left",Jt="right",$t="top",Kt="bottom",te="center",ee="eye",ie="east",ne="west",oe="north",re="none",ae="px",se="absolute",he="border",le="triangle",ce="rect",ue="circle",de="cylinder",fe="shape",ge="items",_e="normal",ve="remove",pe="clear",be="width",me="height",ye="ingroup",we="check",xe="uncheck",Ce="radioOn",Ie="radioOff",Oe="points",Se="values",Te="series",Ve="label",De="label2",Ee="note",ke="note2",Pe="icons",Me="labelFont",Be="labelColor",Le="labelSelectColor",je="note.expanded",Re="note2.expanded",ze="edge.expanded",Fe="edge.points",Ae="edge.type",We="rotation",He="getRotation",Ue="setRotation",Ne="hidden",Qe="visible",Ge="tuv",Xe="no",Ye="select",qe="currentSubGraph",Ze="selectBackground",Je="autoMakeVisible",$e="autoHideScrollBar",Ke="scrollBarColor",ti="scrollBarSize",ei="indent",ii="rowHeight",ni="columnLineColor",oi="rowLineColor",ri="columnLineVisible",ai="rowLineVisible",si="visibleFunc",hi="expandIcon",li="collapseIcon",ci="checkMode",ui="sortFunc",di="editable",fi="batchEditable",gi="tristate",_i="asc",vi="desc",pi="position",bi="elevation",mi="children",yi="translateX",wi="translateY",xi="dataModel",Ci="shape3d",Ii="shape3d.resolution",Oi="shape3d.visible",Si="shape3d.from.visible",Ti="shape3d.to.visible",Vi="shape3d.top.visible",Di="shape3d.bottom.visible",Ei="repeat.uv.length",ki="serializeValue",Pi="deserializeValue",Mi="centerUniform",Bi="rgba(255,255,255,0)",Li="string",ji="boolean",Ri="color",zi="int",Fi="number",Ai="ew-resize",Wi="ns-resize",Hi="pointer",Ui="auto",Ni="mousedown",Qi="mousemove",Gi="mouseup",Xi="mouseout",Yi="touchstart",qi="touchmove",Zi="touchend",Ji="keydown",$i=Ht?"DOMMouseScroll":"mousewheel",Ki=Nt?[Yi,qi,Zi]:[Ji,"keyup",Ni,Qi,Gi,Xi,$i,"contextmenu"],tn=ot,en=ot,nn=ot,on=Gi.length,rn=function(){nn&&(jt(nn.timeout),nn=ot)},an=function(){nn&&La(nn.e,nn.info)};a.addEventListener&&(Nt||(a.addEventListener(Xi,function(){rn()},!1),a.addEventListener($i,function(){ja()},!1)),a.addEventListener("keyup",function(t){91===t.keyCode?bn={}:delete bn[t.keyCode]},!0),a.addEventListener(Ji,function(t){bn[t.keyCode]=!0},!0));var sn,hn,ln,cn=!1,un=ot,dn=ot,fn={},gn={},_n={},vn={},pn={},bn={},mn={},yn={},wn={},xn=[],Cn={},In=ot,On=function(){},Sn=function(){throw"Oops!"},Tn=[0,0,0],Vn=[0,0,0,0],Dn={x:0,y:0,width:0,height:0},En=ot,kn=ot,Pn=ot,Mn=function(t,e,i,n){kn||(kn={});var o=kn[t];if(o){if(o.url===e)return;o.image.onload=On,o.image.onerror=On}var r=new Image;kn[t]={image:r,url:e},r.onload=function(){i&&(r.width=i),n&&(r.height=n),st.handleImageLoaded(t,r),Bn(t,r)},r.onerror=function(){Bn(t,st.handleUnfoundImage(t,e)||ot)},r.src=e},Bn=function(t,e){if(gn[t]=e,delete kn[t],lo(kn)&&(kn=ot,Pn)){for(var i in Pn){(n=Pn[i]).invalidateAll&&n.invalidateAll(),n.redraw&&n.redraw(),n.iv(),delete n._72O}Pn=ot}if(e&&Pn)for(var i in Pn){var n;(n=Pn[i]).invalidateAll&&n.invalidateAll(),n.redraw&&n.redraw(),n.iv()}},Ln=function(){return a.performance&&a.performance.now?a.performance.now():Date.now()},jn=function(t,e){e?jt(t):a.cancelAnimationFrame(t)},Rn=function(t,e,i){return{width:t,height:e,comps:Zn(i)?i:[i]}},zn=function(t,e){return{type:ue,rect:[t,e,1.6,1.6],borderWidth:1,borderColor:ga,gradient:Ba,gradientColor:_a,background:ga}},Fn=function(t,e){return Rn(16,16,{type:le,rect:[4,4,10,8],background:t,rotation:e?1.57:3.14})},An=function(t,e){return Rn(16,16,{type:le,rect:[4,4,8,7],background:t,rotation:e?3.14:0})},Wn=function(t){var e=t._orientation;return"horizontal"===e||"h"===e},Hn=function(t,e,i){return i?{x:t-i,y:e-i,width:2*i+1,height:2*i+1}:Nt?{x:t-5,y:e-5,width:11,height:11}:{x:t-1,y:e-1,width:3,height:3}},Un=function(t){return(/ble$/.test(t)||/ed$/.test(t)||ct[t]?"is":"get")+t.charAt(0).toUpperCase()+t.slice(1)},Nn=function(t){return"set"+t.charAt(0).toUpperCase()+t.slice(1)},Qn=function(t){return typeof t===Li||t instanceof String},Gn=function(t){return typeof t===Fi},Xn=function(t){return typeof t===ji},Yn=function(t){return t&&"object"==typeof t},qn=function(t){return"function"==typeof t},Zn=function(t){return t instanceof Array},Jn=function(t){return t instanceof yh},$n=function(t){return t instanceof Al},Kn=function(t){return t instanceof Ql},to=function(t){return t instanceof Gl},eo=function(t){return t&&"IFRAME"===t.tagName},io=function(t){return t==ot?t:parseFloat(t.toFixed(2))},no=function(t,e,i){var n,o=e.length;if(i)for(var r=0;r<i;r++)if(3===o)t.push(e[0]),t.push(e[1]),t.push(e[2]);else for(n=0;n<o;n++)t.push(e[n]);else if(3===o)t.push(e[0]),t.push(e[1]),t.push(e[2]);else for(n=0;n<o;n++)t.push(e[n])},oo=function(t){return!!t&&(Yn(t)?t:{})},ro=function(t,e,i){var n,o=Yn(t)?t:t.prototype;for(n in e)i&&o[n]!==N||(o[n]=e[n]);return t},ao=function(t){return String.fromCharCode(t)},so=function(t){for(var e,i=0,n="";i<t.length;i++)"%"===(e=t[t.length-1-i])?e="'":"a"===e?e='"':"]"===e&&(e="\\"),n+=ao(e.charCodeAt(0)-1);return n},ho=function(t,e,i){t.superClass.constructor.apply(e,i)},lo=function(t){for(var e in t)return!1;return!0},co=function(t){return!t||0===t.length},uo=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},fo=function(t,e,i){return t<e?e:i<t?i:t},go=function(){var t=1e4*wt(on++);return t-ft(t)},_o=function(t,e,i){return vo(t.x,t.y,e.x,e.y,i.x,i.y,i.x+i.width,i.y,!0)||vo(t.x,t.y,e.x,e.y,i.x+i.width,i.y,i.x+i.width,i.y+i.height,!0)||vo(t.x,t.y,e.x,e.y,i.x+i.width,i.y+i.height,i.x,i.y+i.height,!0)||vo(t.x,t.y,e.x,e.y,i.x,i.y+i.height,i.x,i.y,!0)},vo=function(t,e,i,n,o,r,a,s,h){var l=(s-r)*(i-t)-(a-o)*(n-e);if(0===l)return ot;var c=((a-o)*(e-r)-(s-r)*(t-o))/l,u=t+c*(i-t),d=e+c*(n-e);return h&&(u+Gs<pt(t,i)||u-Gs>vt(t,i)||u+Gs<pt(o,a)||u-Gs>vt(o,a)||d+Gs<pt(e,n)||d-Gs>vt(e,n)||d+Gs<pt(r,s)||d-Gs>vt(r,s))?ot:[u,d]},po=function(t,e,i){if(t&&i)if(e){if("style"===e)return t.getStyle(i);if("attr"===e)return t.getAttr(i);if("field"===e)return t[i]}else if(t[i=Un(i)])return t[i]();return N},bo=function(t,e,i,n){if(t&&i)if(e){if("style"===e)t.s(i,n);else if("attr"===e)t.a(i,n);else if("field"===e){var o=t[i];t[i]=n,t.fp("f:"+i,o,n)}}else t[i=Nn(i)]&&t[i](n)},mo=function(t,e,i,n,o){e&&Mr(t,i,n,1,o,e)},yo=function(t,e,i,n){var o=1-t;return o*o*e+2*t*o*i+t*t*n},wo=function(t,e,i,n,o){var r=1-t;return r*r*r*e+3*r*r*t*i+3*r*t*t*n+t*t*t*o},xo=function(t){var e,i,n,o,r=0;return t.forEach(function(t){if(0<(e=t.length))for(i=t[0],o=1;o<e;o++)n=t[o],r+=Ts(i,n),i=n}),r},Co=function(e,t,i){var n="__"+e,o=function(t){i["handle_"+e](t)};i[n]||(i[n]=o,t.addEventListener(e,o,!1))},Io=function(t,i){var n="_"+i;t[Un(i)]=function(){return this[n]},t[Nn(i)]=function(t){var e=this[n];this[n]=t,this.fp(i,e,t)}},Oo=function(t){return e.create(t)},So=function(t){var e,i;t.element||((e=t.textField)?i=ns(nf.TextField,e):(e=t.textArea)?i=ns(nf.TextArea,e):(e=t.button)?i=ns(nf.Button,e):(e=t.comboBox)?i=ns(nf.ComboBox,e):(e=t.checkBox)?i=ns(nf.CheckBox,e):(e=t.radioButton)?i=ns(nf.RadioButton,e):(e=t.slider)?i=ns(nf.Slider,e):(e=t.colorPicker)?i=ns(nf.ColorPicker,e):(e=t.image)&&(i=ns(nf.Image,e)),i&&(t.element=i))},To=function(t,e){var i=Vo(t);return i._ht=e,i},Vo=function(t){var e=nt.createElement("div"),i=e.style;return e.tabIndex=-1,e.onkeydown=os,i.msTouchAction=re,i.cursor=Qt,Eo(e,ot,0),Nt&&i.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",ot),t&&(i.overflow=Ne),e},Do=function(t){var e=nt.createElement("canvas"),i=e.style;return i.msTouchAction=re,i.pointerEvents=re,Eo(e,ot,0),t&&Mo(t,e),e},Eo=function(t,e,i){var n=t.style;n.border=e?e+" solid 1px":0,n.outline=0,n.padding=i?"0 "+i+ae:0,ko(t)},ko=function(t){var e=t.style;e.position=se,e.margin=0,e.setProperty("box-sizing","border-box",ot),e.setProperty("-moz-box-sizing","border-box",ot)},Po=function(t,e,i,n){n||(n=ka),e!=ot&&(t.width=e*n,t.style.width=e+ae),i!=ot&&(t.height=i*n,t.style.height=i+ae)},Mo=function(t,e,i){t.appendChild(e),i&&(e.style.position=se)},Bo=function(t,e){e.split||(e+="");for(var i,n=e.split("\n"),o=0,r=n.length,a=0;a<r;a++){var s=ms(t.font,n[a]);s.width>o&&(o=s.width),i||(i=s.height)}return t.ss=n,{width:o,height:i*r}},Lo=function(t,e,i,n,o,r){var a=e.length;if(1===a)jo(t,e[0],i,n,o);else for(var s=i.height/a,h={x:i.x,y:i.y,width:i.width,height:s},l=0;l<e.length;l++)r?bs(t,e[l],n,o,h.x,h.y,h.width,h.height,r):jo(t,e[l],h,n,o),h.y+=s},jo=function(t,e,i,n,o){var r,a;t.font=n||Ha,t.fillStyle=o||Aa,t.textAlign=te,t.textBaseline="middle",a=i?i.width===N?(r=i.x,i.y):(r=i.x+i.width/2,i.y+i.height/2):r=0,t.fillText(e,dt(r),dt(a))},Ro=function(t){t.getView&&(t=t.getView());var e=t.offsetWidth||t.scrollWidth;return!e&&t.style.width&&(e=kt(t.style.width)),e},zo=function(t){t.getView&&(t=t.getView());var e=t.offsetHeight||t.scrollHeight;return!e&&t.style.height&&(e=kt(t.style.height)),e},Fo=(J=function(t){os(t),t.stopPropagation()},$=Nt?[Yi]:[Ji,Ni,$i],function(t){var e=Vo(),i=e.style;return i.backgroundColor=st.disabledBackground,t&&(i.backgroundImage="url("+t+")",i.backgroundPosition="50% 50%",i.backgroundRepeat="no-repeat no-repeat"),$.forEach(function(t){e.addEventListener(t,J)}),e}),Ao=function(t){var e=t.getContext("2d");return e.save(),e.lineCap=za,e.lineJoin=Fa,e},Wo=function(t,e,i,n){Ho(t,e*ka,i*ka),1!==(n*=ka)&&t.scale(n,n)},Ho=function(t,e,i){t.translate(e,i)},Uo=function(t,e){t.rotate(e)},No=function(t){if(nt.activeElement!==t)if(Nt)t.focus();else{var e=Bs(),i=e.target;t.focus(),i.scrollLeft=e.left,i.scrollTop=e.top}},Qo=function(t){return t&&t.getView?t.getView():t},Go=function(t,e,i,n,o){2===arguments.length&&(i=e.y,n=e.width,o=e.height,e=e.x);var r=Qo(t),a=r.style;(nt.fullscreenElement||nt.mozFullScreenElement||nt.webkitFullscreenElement||nt.msFullscreenElement)!==r&&(e!==N&&(a.left=e+ae),i!==N&&(a.top=i+ae),n!==N&&(a.width=n+ae),o!==N&&(a.height=o+ae)),t.endEditing&&!Nt&&t.endEditing(),t.redraw&&t.redraw(),t.invalidate&&t.invalidate(),t.onLayouted&&t.onLayouted(e,i,n,o),t._41O&&t._41O("layout")},Xo=function(t){var e=t.touches[0];return e||t.changedTouches[0]},Yo=function(t){st.popup&&st.popup.close(),st.popup=t},qo=ot,Zo=function(t){qo.handleWindowTouchMove(t)},Jo=function(t){qo.handleWindowTouchEnd(t),a.removeEventListener(qi,Zo,!1),a.removeEventListener(Zi,Jo,!1),qo=ot},$o=function(t){qo.handleWindowMouseMove(t)},Ko=function(t){qo.handleWindowMouseUp(t),a.removeEventListener(Qi,$o,!1),a.removeEventListener(Gi,Ko,!1),qo=ot},tr=function(t){return 1===ws(t)},er=function(t,e){return e?e.keyCode===t:bn[t]},ir=function(t){return Is(t)&&er(65,t)},nr=function(t){return er(46,t)||er(8,t)},or=function(e){return function(t){return t?t.keyCode===e:bn[e]}},rr=573,ar=[65,83,68,87,37,38,39,40,32,13,27],sr=or(ar[0]),hr=or(ar[1]),lr=or(ar[2]),cr=or(ar[3]),ur=or(ar[4]),dr=or(ar[5]),fr=or(ar[6]),gr=or(ar[7]),_r=or(ar[8]),vr=or(ar[9]),pr=or(ar[10]),br={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},mr=[2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,11,13,331],yr=ot,wr=ot,xr=function(t,e){yr||(yr=Do()),Po(yr,t,e,1);var i=Ao(yr);return i.clearRect(0,0,t,e),i},Cr=(Z={},function(t){var e,i=Z[t];return i||(q||(q=Do(),Po(q,1,1,1)),(e=q.getContext("2d")).clearRect(0,0,1,1),Mr(e,0,0,1,1,t),i=e.getImageData(0,0,1,1).data,i=Z[t]=[i[0],i[1],i[2],i[3]]),i}),Ir=function(t){if(!Qn(t))return t;var e=Cr(t);return e.CA||(e.CA=[e[0]/255,e[1]/255,e[2]/255,e[3]/255]),e.CA},Or=function(t,e,i){return e&&(e="miter"===i?8*e+20:e+1,t&&Ls(t,e)),e},Sr=function(t,e){if(e){var i=new Qr(e),n=t.width/2,o=t.height/2,r=Vs([i.tf(-n,-o),i.tf(n,-o),i.tf(n,o),i.tf(-n,o)]);return r.x+=t.x+n,r.y+=t.y+o,r}return t},Tr=function(t,e,i,n,o,r,a,s){n*=Math.PI/180;var h={x:Math.cos(n)*(t.x-a.x)/2+Math.sin(n)*(t.y-a.y)/2,y:-Math.sin(n)*(t.x-a.x)/2+Math.cos(n)*(t.y-a.y)/2},l=Math.pow(h.x,2)/Math.pow(e,2)+Math.pow(h.y,2)/Math.pow(i,2);1<l&&(e*=Math.sqrt(l),i*=Math.sqrt(l));var c=(o==r?-1:1)*Math.sqrt((Math.pow(e,2)*Math.pow(i,2)-Math.pow(e,2)*Math.pow(h.y,2)-Math.pow(i,2)*Math.pow(h.x,2))/(Math.pow(e,2)*Math.pow(h.y,2)+Math.pow(i,2)*Math.pow(h.x,2)));isNaN(c)&&(c=0);var u=c*e*h.y/i,d=c*-i*h.x/e,f={x:(t.x+a.x)/2+Math.cos(n)*u-Math.sin(n)*d,y:(t.y+a.y)/2+Math.sin(n)*u+Math.cos(n)*d},g=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(g(t)*g(e))},v=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},p=v([1,0],[(h.x-u)/e,(h.y-d)/i]),b=[(h.x-u)/e,(h.y-d)/i],m=[(-h.x-u)/e,(-h.y-d)/i],y=v(b,m);_(b,m)<=-1&&(y=Math.PI),1<=_(b,m)&&(y=0);_=i<e?e:i;var w=i<e?1:e/i,x=i<e?i/e:1;if(null==s){var C={x:0,y:0,width:0,height:0};Ls(C,_),C.x*=w,C.width*=w,C.y*=x,C.height*=x;var I=new Qr(n);return(C=Vs([I.tf(C.x,C.y),I.tf(C.x+C.width,C.y),I.tf(C.x+C.width,C.y+C.height),I.tf(C.x,C.y+C.height)])).x+=f.x,C.y+=f.y,[{x:C.x,y:C.y},{x:C.x+C.width,y:C.y},{x:C.x+C.width,y:C.y+C.height},{x:C.x,y:C.y+C.height}]}s.translate(f.x,f.y),s.rotate(n),s.scale(w,x),s.arc(0,0,_,p,p+y,1-r),s.scale(1/w,1/x),s.rotate(-n),s.translate(-f.x,-f.y)},Vr=function(t,e){t&&t.beginPath();for(var i,n,o,r=[],a=function(t){for(var e,i=/(\-{0,1}[\d\.]+)/gi,n=[];e=i.exec(t);)n.push(parseFloat(e[0]));return n},s=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,h={x:0,y:0};i=s.exec(e);){var l=i[0],c=l.substr(0,1);if("M"===c||"m"===c){for(var u=a(l),d=0;d<u.length;d+=2){var f=u[d],g=u[d+1];"m"===c&&(f+=h.x,g+=h.y),t&&t.moveTo(f,g),r.push({x:f,y:g}),h.x=f,h.y=g}n=o=null}else if("H"===c||"h"===c){for(u=a(l),d=0;d<u.length;d+=1){f=u[d];"h"===c&&(f+=h.x),t&&t.lineTo(f,h.y),r.push({x:f,y:h.y}),h.x=f}n=o=null}else if("C"===c||"c"===c){for(u=a(l),d=0;d<u.length;d+=6){var _=u[d],v=u[d+1],p=u[d+2],b=u[d+3];f=u[d+4],g=u[d+5];"c"===c&&(_+=h.x,v+=h.y,p+=h.x,b+=h.y,f+=h.x,g+=h.y),t&&t.bezierCurveTo(_,v,p,b,f,g),r.push({x:_,y:v}),r.push({x:p,y:b}),r.push({x:f,y:g}),h.x=f,h.y=g}n=[_,v,p,b,f,g],o=null}else if("S"===c||"s"===c){for(u=a(l),d=0;d<u.length;d+=4){v=n?(_=2*n[4]-n[2],2*n[5]-n[3]):(_=h.x,h.y);p=u[d],b=u[d+1],f=u[d+2],g=u[d+3];"s"===c&&(p+=h.x,b+=h.y,f+=h.x,g+=h.y),t&&t.bezierCurveTo(_,v,p,b,f,g),r.push({x:_,y:v}),r.push({x:p,y:b}),r.push({x:f,y:g}),h.x=f,h.y=g}n=[_,v,p,b,f,g],o=null}else if("Q"===c||"q"===c){for(u=a(l),d=0;d<u.length;d+=4){_=u[d],v=u[d+1],f=u[d+2],g=u[d+3];"q"===c&&(_+=h.x,v+=h.y,f+=h.x,g+=h.y),t&&t.quadraticCurveTo(_,v,f,g),r.push({x:_,y:v}),r.push({x:f,y:g}),h.x=f,h.y=g}n=null,o=[_,v,f,g]}else if("T"===c||"t"===c){for(u=a(l),d=0;d<u.length;d+=2){v=o?(_=2*o[2]-o[0],2*o[3]-o[1]):(_=h.x,h.y);f=u[d],g=u[d+1];"t"===c&&(f+=h.x,g+=h.y),t&&t.quadraticCurveTo(_,v,f,g),r.push({x:_,y:v}),r.push({x:f,y:g}),h.x=f,h.y=g}n=null,o=[_,v,f,g]}else if("V"===c||"v"===c){for(u=a(l),d=0;d<u.length;d+=1){g=u[d];"v"===c&&(g+=h.y),t&&t.lineTo(h.x,g),r.push({x:h.x,y:g}),h.y=g}n=o=null}else if("L"===c||"l"===c){for(u=a(l),d=0;d<u.length;d+=2){f=u[d],g=u[d+1];"l"===c&&(f+=h.x,g+=h.y),t&&t.lineTo(f,g),r.push({x:f,y:g}),h.x=f,h.y=g}n=o=null}else if("A"===c||"a"===c){for(u=a(l),d=0;d<u.length;d+=7){var m=u[d],y=u[d+1],w=u[d+2],x=u[d+3],C=u[d+4];f=u[d+5],g=u[d+6];"a"===c&&(f+=h.x,g+=h.y);var I=Tr(h,m,y,w,x,C,{x:f,y:g},t);I&&(r=r.concat(I)),h.x=f,h.y=g}n=o=null}var O=l.substr(l.length-1);("z"===O||"Z"===O)&&t&&t.closePath()}return r},Dr=function(t,e,i,n){var o=!1;if(t.beginPath?t.beginPath():o=!0,Jn(e)&&(e=e._as),Jn(i)&&(i=i._as),i&&i.length){for(var r,a,s,h,l=0,c=0,u=i.length;c<u;c++)1===(r=i[c])?(a=e[l++],t.moveTo(a.x,o?-a.y:a.y)):2===r?(a=e[l++],t.lineTo(a.x,o?-a.y:a.y)):3===r?(a=e[l++],s=e[l++],t.quadraticCurveTo(a.x,o?-a.y:a.y,s.x,o?-s.y:s.y)):4===r?(a=e[l++],s=e[l++],h=e[l++],t.bezierCurveTo(a.x,o?-a.y:a.y,s.x,o?-s.y:s.y,h.x,o?-h.y:h.y)):5===r&&t.closePath();n&&5!==r&&t.closePath()}else{var d,f,g,_=e.length;if(0<_){for(d=e[0],t.moveTo(d.x,o?-d.y:d.y),f=1;f<_;f++)g=e[f],t.lineTo(g.x,o?-g.y:g.y);n&&t.closePath()}}},Er=function(t,e,i,n){if(Jn(t)&&(t=t._as),Jn(e)&&(e=e._as),e&&e.length){i=i||As;for(var o,r,a,s,h,l,c=[],u=ot,d=0,f=0,g=e.length;f<g;f++)if(1===(o=e[f]))c.push(u=[]),u.push(t[d++]);else if(2===o)u.push(t[d++]);else if(3===o)for(r=u[u.length-1],a=t[d++],s=t[d++],l=1;l<=i;l++)u.push({x:yo(l/i,r.x,a.x,s.x),y:yo(l/i,r.y,a.y,s.y)});else if(4===o)for(r=u[u.length-1],a=t[d++],s=t[d++],h=t[d++],l=1;l<=i;l++)u.push({x:wo(l/i,r.x,a.x,s.x,h.x),y:wo(l/i,r.y,a.y,s.y,h.y)});else 5===o&&u.push(u[0]);return n&&5!==o&&u&&2<u.length&&u.push(u[0]),c}return n&&2<t.length&&(t=t.slice()).push(t[0]),t?[t]:[]},kr=function(t,e,i,n,o,r){var a,s,h,l=Cr(e),c=n,u=l[0],d=l[1],f=l[2];if(i){var g=Cr(i);a=g[0]-u,s=g[1]-d,h=g[2]-f}else a=255-u,s=255-d,h=255-f;for(r||(r=10<n?1:.5,r=o<1?pt(r/o,2):r);0<(n-=r);){var _=1-n/c,v=u+a*_,p=d+s*_,b=f+h*_;v=pt(gt(v),255),p=pt(gt(p),255),b=pt(gt(b),255),t.strokeStyle="rgb("+v+","+p+","+b+")",t.lineWidth=n,t.stroke()}},Pr=(B={},function(t,e){var i=t+"-"+e,n=B[i];if(n)return n;var o,r,a,s=Cr(t);return a=e<0?(e=(100+e)/100,o=gt(s[0]*e),r=gt(s[1]*e),gt(s[2]*e)):(e/=100,o=s[0],r=s[1],a=s[2],r+=(255-r)*e,a+=(255-a)*e,o=pt(gt(o+=(255-o)*e),255),r=pt(gt(r),255),pt(gt(a),255)),B[i]="rgb("+o+","+r+","+a+")"}),Mr=function(t,e,i,n,o,r){r&&(t.fillStyle=r),t.beginPath(),t.rect(e,i,n,o),t.fill()},Br=function(t,e,i,n,o,r,a){t.beginPath(),Nr[e](t,i.x,i.y,i.width,i.height,n,o,r,a)},Lr=function(t,e,i,n,o){var r=Nr[i];t.fillStyle=r?r(t,e,n||_a,o.x,o.y,o.width,o.height):e},jr=function(t,e){t.fillStyle=t.createPattern(e,"repeat")},Rr=function(t,e,i,n,o,r,a,s){var h,l,c,u,d,f,g,_,v,p;if(bt(o)>2*It&&(o=2*It),h=-(o/(u=gt(bt(o)/(It/4)))),l=-n,0<u){d=e+mt(n)*r,f=i+wt(-n)*a,s?t.lineTo(d,f):t.moveTo(d,f);for(var b=0;b<u;b++)c=(l+=h)-h/2,g=e+mt(l)*r,_=i+wt(l)*a,v=e+mt(c)*(r/mt(h/2)),p=i+wt(c)*(a/mt(h/2)),t.quadraticCurveTo(v,p,g,_)}},zr=function(t,e,i,n,o,r,a){e&&(i=dt(i),n=dt(n),a||(a=1),t.fillStyle=e,t.beginPath(),t.rect(i,n,a,r),t.rect(i,n,o,a),t.rect(i,n+r-a,o,a),t.rect(i+o-a,n,a,r),t.fill())},Fr=function(t,e,i,n){var o=n.x,r=n.y,a=n.width,s=n.height;if(!(!e||!i||a<=0||s<=0)){var h,l=vs(e),c=ps(e),u=0<i;1===i||-1===i?(t.fillStyle=u?l:c,t.beginPath(),t.rect(o,r,1,s),t.rect(o,r,a,1),t.fill(),t.fillStyle=u?c:l,t.beginPath(),t.rect(o,r+s-1,a,1),t.rect(o+a-1,r,1,s)):(i=pt(bt(i),pt(a/2,s/2)),(h=t.createLinearGradient(o,r,o+i,r)).addColorStop(0,u?l:c),h.addColorStop(1,e),t.fillStyle=h,t.beginPath(),t.moveTo(o,r),t.lineTo(o+i,r+i),t.lineTo(o+i,r+s-i),t.lineTo(o,r+s),t.lineTo(o,r),t.fill(),(h=t.createLinearGradient(o,r,o,r+i)).addColorStop(0,u?l:c),h.addColorStop(1,e),t.fillStyle=h,t.beginPath(),t.moveTo(o,r),t.lineTo(o+i,r+i),t.lineTo(o+a-i,r+i),t.lineTo(o+a,r),t.lineTo(o,r),t.fill(),(h=t.createLinearGradient(o,r+s,o,r+s-i)).addColorStop(0,u?c:l),h.addColorStop(1,e),t.fillStyle=h,t.beginPath(),t.moveTo(o,r+s),t.lineTo(o+i,r+s-i),t.lineTo(o+a-i,r+s-i),t.lineTo(o+a,r+s),t.lineTo(o,r+s),t.fill(),(h=t.createLinearGradient(o+a,r,o+a-i,r)).addColorStop(0,u?c:l),h.addColorStop(1,e),t.fillStyle=h,t.beginPath(),t.moveTo(o+a,r),t.lineTo(o+a-i,r+i),t.lineTo(o+a-i,r+s-i),t.lineTo(o+a,r+s),t.lineTo(o+a,r)),t.fill()}},Ar=function(t,e,i,n,o,r,a){var s=t.createLinearGradient(n,o,r,a);return s.addColorStop(0,i),s.addColorStop(1,e),s},Wr=function(t,e,i,n,o,r,a){var s=t.createLinearGradient(n,o,r,a);return s.addColorStop(0,e),s.addColorStop(.5,i),s.addColorStop(1,e),s},Hr=function(t,e,i,n,o,r,a){var s=t.createLinearGradient(n,o,r,a);return s.addColorStop(0,e),s.addColorStop(1/3,i),s.addColorStop(2/3,e),s.addColorStop(1,i),s},Ur=function(t,e,i,n,o,r,a,s,h){var l=t.createRadialGradient(n+r*s,o+a*h,pt(r,a)/24,n+r/2,o+a/2,vt(r,a)/2);return l.addColorStop(0,i),l.addColorStop(1,e),l},Nr={polygon:function(t,e,i,n,o,r){(r==ot||r<3)&&(r=6);for(var a,s,h=pt(n,o)/2,l=e+n/2,c=i+o/2,u=0,d=2*It/r,f=0;f<r;f++)a=l+mt(u)*h,s=c+wt(u)*h,0===f?t.moveTo(a,s):t.lineTo(a,s),u+=d;t.closePath()},arc:function(t,e,i,n,o,r,a,s,h){r==ot&&(r=It),a==ot&&(a=Ot),s==ot&&(s=!0);var l=e+n/2,c=i+o/2;s&&t.moveTo(l,c),h?Rr(t,l,c,r=-r,(a=-a)-r,n/2,o/2,!0):t.arc(l,c,pt(n,o)/2,r,a),s&&t.closePath()},rect:function(t,e,i,n,o){t.rect(e,i,n,o)},circle:function(t,e,i,n,o){t.arc(e+n/2,i+o/2,pt(n,o)/2,0,Ot,!0)},oval:function(t,e,i,n,o){Rr(t,e+n/2,i+o/2,0,Ot,n/2,o/2,!1)},roundRect:function(t,e,i,n,o,r){r==ot&&(r=pt(pt(n,o)/4,8)),function(t,e,i,n,o,r,a,s,h){6===arguments.length&&(h=s=a=r);var l=e+n,c=i+o,u=n<o?2*n:2*o;r=r<u?r:u,a=a<u?a:u,s=s<u?s:u;var d=.29*(h=h<u?h:u),f=.58*h;t.moveTo(l,c-h),t.quadraticCurveTo(l,c-f,l-d,c-d),t.quadraticCurveTo(l-f,c,l-h,c),d=.29*s,f=.58*s,t.lineTo(e+s,c),t.quadraticCurveTo(e+f,c,e+d,c-d),t.quadraticCurveTo(e,c-f,e,c-s),d=.29*r,f=.58*r,t.lineTo(e,i+r),t.quadraticCurveTo(e,i+f,e+d,i+d),t.quadraticCurveTo(e+f,i,e+r,i),d=.29*a,f=.58*a,t.lineTo(l-a,i),t.quadraticCurveTo(l-f,i,l-d,i+d),t.quadraticCurveTo(l,i+f,l,i+a),t.lineTo(l,c-h)}(t,e,i,n,o,r)},star:function(t,e,i,n,o){var r=2*n,a=2*o,s=e+n/2,h=i+o/2;t.moveTo(s-r/4,h-a/12),t.lineTo(e+.306*n,i+.579*o),t.lineTo(s-r/6,h+a/4),t.lineTo(e+n/2,i+.733*o),t.lineTo(s+r/6,h+a/4),t.lineTo(e+.693*n,i+.579*o),t.lineTo(s+r/4,h-a/12),t.lineTo(e+.611*n,i+.332*o),t.lineTo(s+0,h-a/4),t.lineTo(e+.388*n,i+.332*o),t.closePath()},triangle:function(t,e,i,n,o){t.moveTo(e+n/2,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath()},hexagon:function(t,e,i,n,o){t.moveTo(e,i+o/2),t.lineTo(e+n/4,i+o),t.lineTo(e+3*n/4,+i+o),t.lineTo(e+n,i+o/2),t.lineTo(e+3*n/4,i),t.lineTo(e+n/4,i),t.closePath()},pentagon:function(t,e,i,n,o){var r=2*n,a=2*o,s=e+n/2,h=i+o/2;t.moveTo(s-r/4,h-a/12),t.lineTo(s-r/6,h+a/4),t.lineTo(s+r/6,h+a/4),t.lineTo(s+r/4,h-a/12),t.lineTo(s+0,h-a/4),t.closePath()},diamond:function(t,e,i,n,o){t.moveTo(e+n/2,i),t.lineTo(e,i+o/2),t.lineTo(e+n/2,i+o),t.lineTo(e+n,i+o/2),t.closePath()},rightTriangle:function(t,e,i,n,o){t.moveTo(e,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath()},parallelogram:function(t,e,i,n,o){var r=n/4;t.moveTo(e+r,i),t.lineTo(e+n,i),t.lineTo(e+n-r,i+o),t.lineTo(e,i+o),t.closePath()},trapezoid:function(t,e,i,n,o){var r=n/4;t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath()},"linear.southwest":function(t,e,i,n,o,r,a){return Ar(t,e,i,n,o+a,n+r,o)},"linear.southeast":function(t,e,i,n,o,r,a){return Ar(t,e,i,n+r,o+a,n,o)},"linear.northwest":function(t,e,i,n,o,r,a){return Ar(t,e,i,n,o,n+r,o+a)},"linear.northeast":function(t,e,i,n,o,r,a){return Ar(t,e,i,n+r,o,n,o+a)},"linear.north":function(t,e,i,n,o,r,a){return Ar(t,e,i,n,o,n,o+a)},"linear.south":function(t,e,i,n,o,r,a){return Ar(t,e,i,n,o+a,n,o)},"linear.west":function(t,e,i,n,o,r){return Ar(t,e,i,n,o,n+r,o)},"linear.east":function(t,e,i,n,o,r){return Ar(t,e,i,n+r,o,n,o)},"radial.center":function(t,e,i,n,o,r,a){return Ur(t,e,i,n,o,r,a,.5,.5)},"radial.southwest":function(t,e,i,n,o,r,a){return Ur(t,e,i,n,o,r,a,.25,.75)},"radial.southeast":function(t,e,i,n,o,r,a){return Ur(t,e,i,n,o,r,a,.75,.75)},"radial.northwest":function(t,e,i,n,o,r,a){return Ur(t,e,i,n,o,r,a,.25,.25)},"radial.northeast":function(t,e,i,n,o,r,a){return Ur(t,e,i,n,o,r,a,.75,.25)},"radial.north":function(t,e,i,n,o,r,a){return Ur(t,e,i,n,o,r,a,.5,.25)},"radial.south":function(t,e,i,n,o,r,a){return Ur(t,e,i,n,o,r,a,.5,.75)},"radial.west":function(t,e,i,n,o,r,a){return Ur(t,e,i,n,o,r,a,.25,.5)},"radial.east":function(t,e,i,n,o,r,a){return Ur(t,e,i,n,o,r,a,.75,.5)},"spread.horizontal":function(t,e,i,n,o,r){return Wr(t,e,i,n,o,n+r,o)},"spread.vertical":function(t,e,i,n,o,r,a){return Wr(t,e,i,n,o,n,o+a)},"spread.diagonal":function(t,e,i,n,o,r,a){return Wr(t,e,i,n+r,o,n,o+a)},"spread.antidiagonal":function(t,e,i,n,o,r,a){return Wr(t,e,i,n,o,n+r,o+a)},"spread.north":function(t,e,i,n,o,r,a){return Hr(t,e,i,n,o-a/4,n,o+a+a/4)},"spread.south":function(t,e,i,n,o,r,a){return Hr(t,i,e,n,o-a/4,n,o+a+a/4)},"spread.west":function(t,e,i,n,o,r){return Hr(t,e,i,n-r/4,o,n+r+r/4,o)},"spread.east":function(t,e,i,n,o,r){return Hr(t,i,e,n-r/4,o,n+r+r/4,o)}},Qr=function(t,e,i){this.s=wt(t),this.c=mt(t),this.cx=e||0,this.cy=i||0};Qr.prototype.tf=function(t,e){1===arguments.length&&(e=t.y,t=t.x);var i=this;return{x:i.c*t-i.s*e+i.cx,y:i.s*t+i.c*e+i.cy}};var Gr=function(t,e,i){return new Qr(t).tf(e,i)},Xr=function(t){var e=t.touches[0],i=t.touches[1],n=e.clientX,o=e.clientY,r=i.clientX,a=i.clientY;return _t((n-r)*(n-r)+(o-a)*(o-a))},Yr=(function(){for(var t=0,e=vi.split(""),i=0;i<e.length;i++)t=10*kt(e[i])+t;return n=a[rr.toString(8*i)+Ve.substr(i)],rt.z=n;var n}(),function(t,e,i){for(var n=0;n<i.size();n++){var o=i.get(n);t.co(o)&&e.add(o)}for(n=0;n<i.size();n++)o=i.get(n),Yr(t,e,o._children)}),qr=function(t,e,i){for(var n=0;n<i.size();n++){var o=i.get(i.size()-1-n);t.co(o)&&e.add(o)}for(n=0;n<i.size();n++)o=i.get(n),qr(t,e,o._children)},Zr=function(t,e,i){for(var n=!1,o=0;o<i.size();o++){var r=i.get(o);t.co(r)?n&&e.add(r):n=1}for(o=0;o<i.size();o++)r=i.get(o),Zr(t,e,r._children)},Jr=function(t,e,i){for(var n=!1,o=0;o<i.size();o++){var r=i.get(i.size()-1-o);t.co(r)?n&&e.add(r):n=!0}for(o=0;o<i.size();o++)r=i.get(o),Jr(t,e,r._children)},$r=function(t,n,o,r){var a=r==ot;if(0!==n||0!==o||!a&&0!==r){var s,h,l,c,u=new yh;t.each(function(t){if($n(t)){var e=!0;if(l)for(s=0;s<l.size();s++)(h=l.get(s)).isHostOn(t)?(l.removeAt(s),s--,u.remove(h)):e&&(t.isHostOn(h)||t.isLoopedHostOn(h))&&(e=!1);if(c)for(s=0;s<c.size();s++)h=c.get(s),jh(h,t)?(c.removeAt(s),s--,u.remove(h)):e&&jh(t,h)&&(e=!1);e&&(u.add(t),(t._host||t._69O)&&(l||(l=new yh),l.add(t)),(to(t)||to(t._parent))&&(c||(c=new yh),c.add(t)))}else if(Kn(t)&&t.s(Ae)===Oe){var i=t.s(Fe);i&&!i.isEmpty()&&(i.each(function(t){a?(t.x+=n,t.y+=o):(t.x+=n,t.y+=r,t.e==ot?t.e=o:t.e+=o)}),t.fp(Fe,!1,!0))}}),u.each(function(t){a?t.translate(n,o):t.translate3d(n,o,r)})}},Kr={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},ta=(M={1:function(t,e){return{x:t.x-e.width/2,y:t.y-e.height/2}},2:function(t,e){return{x:t.x+e.width/2,y:t.y-e.height/2}},3:function(t,e){return{x:t.x+t.width/2,y:t.y-e.height/2}},4:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y-e.height/2}},5:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y-e.height/2}},6:function(t){return{x:t.x,y:t.y}},7:function(t){return{x:t.x+t.width/2,y:t.y}},8:function(t){return{x:t.x+t.width,y:t.y}},9:function(t,e){return{x:t.x-e.width/2,y:t.y+e.height/2}},10:function(t,e){return{x:t.x+e.width/2,y:t.y+e.height/2}},11:function(t,e){return{x:t.x+t.width/2,y:t.y+e.height/2}},12:function(t,e){return{x:t.x-e.width/2+t.width,y:t.y+e.height/2}},13:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+e.height/2}},14:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height/2}},15:function(t){return{x:t.x,y:t.y+t.height/2}},16:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height/2}},17:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},18:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height/2}},19:function(t){return{x:t.x+t.width,y:t.y+t.height/2}},20:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height/2}},21:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height-e.height/2}},22:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height-e.height/2}},23:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height-e.height/2}},24:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height-e.height/2}},25:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height-e.height/2}},26:function(t){return{x:t.x,y:t.y+t.height}},27:function(t){return{x:t.x+t.width/2,y:t.y+t.height}},28:function(t){return{x:t.x+t.width,y:t.y+t.height}},29:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height+e.height/2}},30:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height+e.height/2}},31:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height+e.height/2}},32:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height+e.height/2}},33:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height+e.height/2}},34:function(t,e){return{x:t.x,y:t.y-e.height/2}},35:function(t,e){return{x:t.x+t.width,y:t.y-e.height/2}},36:function(t,e){return{x:t.x,y:t.y+t.height+e.height/2}},37:function(t,e){return{x:t.x+t.width,y:t.y+t.height+e.height/2}},38:function(t,e){return{x:t.x+t.width/4,y:t.y-e.height/2}},39:function(t,e){return{x:t.x+3*t.width/4,y:t.y-e.height/2}},40:function(t){return{x:t.x+t.width/4,y:t.y}},41:function(t){return{x:t.x+3*t.width/4,y:t.y}},42:function(t,e){return{x:t.x+t.width/4,y:t.y+e.height/2}},43:function(t,e){return{x:t.x+3*t.width/4,y:t.y+e.height/2}},44:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height/2-e.height/2}},45:function(t){return{x:t.x+t.width/4,y:t.y+t.height/2}},46:function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y+t.height/2}},47:function(t,e){return{x:t.x+t.width/2+e.width/2,y:t.y+t.height/2}},48:function(t){return{x:t.x+3*t.width/4,y:t.y+t.height/2}},49:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height/2+e.height/2}},50:function(t,e){return{x:t.x+t.width/4,y:t.y+t.height-e.height/2}},51:function(t,e){return{x:t.x+3*t.width/4,y:t.y+t.height-e.height/2}},52:function(t){return{x:t.x+t.width/4,y:t.y+t.height}},53:function(t){return{x:t.x+3*t.width/4,y:t.y+t.height}},54:function(t,e){return{x:t.x+t.width/4,y:t.y+t.height+e.height/2}},55:function(t,e){return{x:t.x+3*t.width/4,y:t.y+t.height+e.height/2}}},function(t){var e=0;for(var i in t)2===i.length&&kt(i,32)===rr&&(In=t[i]),e++;return e}(a)?function(t,e,i){return M[t](e,i||Dn)}:void 0);ro(lt,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var ea=lt.reverse,ia=lt.transparent,na=lt.rectSelectBackground,oa=lt.dash,ra=lt.titleBackground,aa=lt.titleIconBackground,sa=lt.headerBackground,ha=lt.headerIconBackground,la=lt.headerSeparator,ca=lt.headerLine,ua=lt.contentIconBackground,da=lt.contentLine,fa=(lt.widgetIconHighlight,lt.widgetIconBorder),ga=(lt.widgetIconGradient,lt.imageBackground),_a=lt.imageGradient,va=lt.highlight,pa=lt.label,ba=lt.labelSelect;if(Pt&&!a.noAlert){var ma=new Date,ya=Pt.split("-"),wa=new Date(ma.getFullYear(),ma.getMonth(),ma.getDate()),xa=(Pt=new Date(kt(ya[0],10),kt(ya[1],10)-1,kt(ya[2],10)),wa.getTime()),Ca=Pt.getTime(),Ia="ht_try",Oa=a.localStorage,Sa=a.alert;if(Oa&&Sa)if(xa<Ca&&Ca-xa<6048e5){var Ta=(Ca-xa)/864e5;Oa&&Oa[Ia]!=Ta&&Sa("HT for Web free trail license will expire in "+(Oa[Ia]=Ta)+" days, please apply for a new license!")}else Ca<=xa&&Sa("HT for Web free trail license expired!"),Oa&&delete Oa[Ia]}var Va={ms_ac:function(t,e){for(var i=e.ms_ac,n=0;n<i.length;n++)Io(t,i[n])},ms_listener:function(t){t.addListeners=function(){for(var t=0;t<Ki.length;t++)this["handle_"+Ki[t]]&&Co(Ki[t],this.getView(),this)},t.removeListeners=function(){for(var t=0;t<Ki.length;t++)this["handle_"+Ki[t]]&&(e=Ki[t],i=this.getView(),void 0,(r=(n=this)[o="__"+e])&&(i.removeEventListener(e,r,!1),delete n[o]));var e,i,n,o,r}},ms_fire:function(t){t.mp=function(t,e,i){this.addPropertyChangeListener(t,e,i)},t.ump=function(t,e){this.removePropertyChangeListener(t,e)},t.fp=function(t,e,i){return this.firePropertyChange(t,e,i)},t.addPropertyChangeListener=function(t,e,i){this._62I||(this._62I=new xh),this._62I.add(t,e,i)},t.removePropertyChangeListener=function(t,e){this._62I.remove(t,e)},t.firePropertyChange=function(t,e,i){if(e===i)return!1;var n=this,o={property:t,oldValue:e,newValue:i,data:n};return n._62I&&n._62I.fire(o),n.onPropertyChanged&&n.onPropertyChanged(o),!0}},ms_attr:function(t){t.a=function(t,e){if(2===arguments.length)this.setAttr(t,e);else{if(!Yn(t))return this.getAttr(t);for(var i in t)this.setAttr(i,t[i])}return this},t.getAttr=function(t){return this._attrObject?this._attrObject[t]:N},t.setAttr=function(t,e){var i=this;i._attrObject||(i._attrObject={});var n=i._attrObject[t];e===N?delete i._attrObject[t]:i._attrObject[t]=e,i.fp&&i.fp("a:"+t,n,e)&&i.onAttrChanged&&i.onAttrChanged(t,n,e)},t.getSerializableAttrs=function(){var t,e={};for(t in this._attrObject)e[t]=1;return e}},ms_bnb:function(t){t.getBodyColor=function(t){return t.s("body.color")},t.getBorderColor=function(t){return t.s("border.color")}},_51o:function(t){t.mi=function(t,e,i){this.addInteractorListener(t,e,i)},t.umi=function(t,e){this.removeInteractorListener(t,e)},t.fi=function(t){this.fireInteractorEvent(t)},t.addInteractorListener=function(t,e,i){this._63I||(this._63I=new xh),this._63I.add(t,e,i)},t.removeInteractorListener=function(t,e){this._63I.remove(t,e)},t.fireInteractorEvent=function(t){this._63I&&this._63I.fire(t)},t.setInteractors=function(t){var e=this._interactors;e&&e.each(function(t){t.tearDown()}),Zn(t)&&(t=new yh(t)),(this._interactors=t)&&t.each(function(t){t.setUp()}),this.fp("interactors",e,t),this.invalidateSelection()},t.getInteractors=function(){return this._interactors}},_49o:function(t){t._44O=ot,t._45O=ot,t.addTopPainter=function(t){var e=this;e._44O||(e._44O=new yh),e._44O.contains(t)||(e._44O.add(t),e.redraw&&e.redraw())},t.removeTopPainter=function(t){this._44O&&(this._44O.remove(t),this.redraw&&this.redraw())},t.addBottomPainter=function(t){var e=this;e._45O||(e._45O=new yh),e._45O.contains(t)||(e._45O.add(t),e.redraw&&e.redraw())},t.removeBottomPainter=function(t){this._45O&&(this._45O.remove(t),this.redraw&&this.redraw())},t._93db=function(e,i){var n=this;n._45O&&n._45O.each(function(t){t.draw?t.draw(e,i):t.call(n,e,i)})},t._92db=function(e,i){var n=this;n._44O&&n._44O.each(function(t){t.draw?t.draw(e,i):t.call(n,e,i)})}},ms_sm:function(t){t.sm=function(){return this.getSelectionModel()},t.setSelectableFunc=function(t){this.sm().setFilterFunc(t)},t.getSelectableFunc=function(){return this.sm().getFilterFunc()},t.getSelectionModel=function(){return this._3o?this._3o:this.dm().sm()},t.isSelectionModelShared=function(){return!this._3o},t.setSelectionModelShared=function(t){var e=this,i=!e._3o,n=e._16o,o=e.dm();i!==t&&(e.invalidateSelection&&e.invalidateSelection(),t?(o.sm().ms(n,e),e._3o.ums(n,e),e._3o.dispose(),e._3o=ot):(o.sm().ums(n,e),e._3o=new Oh(o),e._3o.ms(n,e)),e.onSelectionModelSharedChanged(),e.fp("selectionModelShared",i,t))},t.onSelectionModelSharedChanged=function(){this.redraw(),this.invalidateSelection&&this.invalidateSelection()},t.removeSelection=function(){var t=this.dm(),e=t.getHistoryManager();e&&e.beginInteraction(),this.sm().toSelection().each(t.remove,t),e&&e.endInteraction()},t.selectAll=function(){this.sm().ss(this.dm().toDatas(this.isVisible,this))},t.isSelected=function(t){return this.sm().co(t)},t.isSelectedById=function(t){var e=this.dm().getDataById(t);return!!e&&this.isSelected(e)},t.isSelectable=function(t){return this.sm().isSelectable(t)}},ms_tx:function(t){t._64I=0,t._65O=0,t.isScrollable=function(){return this.getWidth()<this._64I},t._40o=function(){return this.isScrollable()},t.getLogicalPoint=function(t){return js(t,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},t.tx=function(t){return t===N?this.getTranslateX():void this.setTranslateX(t)},t.getTranslateX=function(){return this._65O},t.setTranslateX=function(t){var e=this,i=e.getWidth()-e._64I;t<i&&(t=i),0<t&&(t=0),t=dt(t);var n=e._65O;e._65O=t,e.fp(yi,n,t)}},ms_ty:function(t){t._23Q=0,t._66O=0,t._41o=function(){return this.getHeight()<this._23Q},t.getLogicalPoint=function(t){return js(t,this._canvas||this._view,this.tx?this.tx():0,this.ty())},t.ty=function(t){return t===N?this.getTranslateY():void this.setTranslateY(t)},t.getTranslateY=function(){return this._66O},t.setTranslateY=function(t){var e=this,i=e.getHeight()-e._23Q;t<i&&(t=i),0<t&&(t=0),t=dt(t);var n=e._66O;e._66O=t,e.fp(wi,n,t)}},ms_txy:function(t){t._65O=0,t._66O=0,t.tx=function(t){return t===N?this.getTranslateX():void this.setTranslateX(t)},t.ty=function(t){return t===N?this.getTranslateY():void this.setTranslateY(t)},t.onTranslateEnded=function(){},t.setTranslate=function(e,i,t){var n=this;if(t=oo(t)){n._65I&&n._65I.stop(!0);var o=n.tx(),r=n.ty();t.action=function(t){n.setTranslate(o+(e-o)*t,r+(i-r)*t)},t._37o=function(){delete n._66I,delete n._65I,n.onTranslateEnded()},n._66I=1,n._65I=_s(t)}else n.tx(e),n.ty(i)},t.getTranslateX=function(){return this._65O},t.setTranslateX=function(t){t=this.adjustTranslateX(t);var e=this._65O;this._65O=t,this.fp(yi,e,t)},t.getTranslateY=function(){return this._66O},t.setTranslateY=function(t){t=this.adjustTranslateY(t);var e=this._66O;this._66O=t,this.fp(wi,e,t)},t.adjustTranslateX=function(t){return dt(t)},t.adjustTranslateY=function(t){return dt(t)},t.translate=function(t,e,i){this.setTranslate(this.tx()+t,this.ty()+e,i)},t.getLogicalPoint=function(t){return js(t,this._canvas||this._view,this.tx(),this.ty())}},ms_dm:function(t){t.dm=function(t){return t?void this.setDataModel(t):this.getDataModel()},t.getDataModel=function(){return this._dataModel}},ms_lp:function(t){t.lp=function(t){return this.getLogicalPoint(t)}},ms_v:function(t){t._disabled=!1,t.setDisabled=function(t,e){var i=this,n=i._disabled;n!==t&&(n&&(zs(i._63O),delete i._63O),t&&(Mo(i._view,i._63O=Fo(e)),i.iv()),i._disabled=t,i.fp("disabled",n,t))},t.isDisabled=function(){return this._disabled},t.getView=function(){return this._view},t.addToDOM=function(){var t=this,e=t.getView(),i=e.style;nt.body.appendChild(e),i.left="0",i.right="0",i.top="0",i.bottom="0",a.addEventListener("resize",function(){t.iv()},!1)},t.getWidth=function(){return this._view.clientWidth},t.getHeight=function(){return this._view.clientHeight},t.setWidth=function(t){this._view.style.width=t+ae,this.iv(),this.fp&&this.fp(be,ot,t)},t.setHeight=function(t){this._view.style.height=t+ae,this.iv(),this.fp&&this.fp(me,ot,t)},t.setFocus=function(t){var e=this,i=e._currentEditor;return!(t&&i&&(i.getView&&(i=i.getView()),i.contains(t.target)))&&(No(e._view),e.endEditing&&e.endEditing(),e._41O("focus"),!0)},t.iv=function(t){this.invalidate(t)},t.invalidate=function(t){var e=this;e._68I||(e._68I=1,cs(e.validate,e,ot,t),e.onInvalidated&&e.onInvalidated(),e._41O("invalidate"))},t.validate=function(){var t,e=this,i=e._view;if(e._68I&&(delete e._68I,i.parentNode))if(0===i.offsetWidth&&0===i.offsetHeight&&e._67I!==ot)e._67I===N&&(e._67I=st.reinvalidateCount),0<e._67I?e._67I--:e._67I=ot,e.iv();else{e._41O("beginValidate"),e.validateImpl(),e.onValidated&&e.onValidated(),e._41O("validate");var n=e._63O;n&&(i.lastChild!==n&&(zs(n),Mo(i,n)),Go(n,0,0,e.getWidth(),e.getHeight())),t=e,kn&&!t._72O&&(Pn||(Pn={}),Pn[t._72O=ls()]=t),sn!=ot?go()<.05&&it&&!hn&&(Wo=rn):Wo=Xn}},t.layout=function(t,e,i,n){1===arguments.length?Go(this,t):Go(this,t,e,i,n)},t.addViewListener=function(t,e,i){this._67O||(this._67O=new xh),this._67O.add(t,e,i)},t.removeViewListener=function(t,e){this._67O.remove(t,e)},t._41O=function(t){this._67O&&(Qn(t)&&(t={kind:t}),this._67O.fire(t)),st.viewListener&&st.viewListener(this,t)}},ms_tip:function(t){t.enableToolTip=function(){var i=this;Nt||i._13o||(i._13o=function(t){var e=i.getToolTip(t);e!=ot?st.toolTipContinual&&st.isToolTipShowing()?La(t,e):(ja(),nn={timeout:Lt(an,Ea),e:t,info:e}):ja()},i.getView().addEventListener(Qi,i._13o,!1))},t.disableToolTip=function(){this._13o&&(this.getView().removeEventListener(Qi,this._13o,!1),delete this._13o)},t.getToolTip=function(t){if(this.getDataAt){var e=this.getDataAt(t);return e?e.getToolTip():ot}return this.getValue?io(this.getValue()):void 0}},_52o:function(t){t._zoom=1,t._29I=Dn,t.zoomIn=function(t,e){this.setZoom(this._zoom*$a,t,e)},t.zoomOut=function(t,e){this.setZoom(this._zoom/$a,t,e)},t.zoomReset=function(t,e){this.setZoom(1,t,e)},t.scrollZoomIn=function(t){this.setZoom(this._zoom*Ka,ot,t)},t.scrollZoomOut=function(t){this.setZoom(this._zoom/Ka,ot,t)},t.pinchZoomIn=function(t){this.setZoom(this._zoom*ts,ot,t)},t.pinchZoomOut=function(t){this.setZoom(this._zoom/ts,ot,t)},t.adjustZoom=function(t){return t<is?is:es<t?es:t},t.getZoom=function(){return this._zoom},t.setZoom=function(e,t,i){var n=this;if(t=oo(t)){n._14o&&n._14o.stop(!0);var o=n._zoom;t.action=function(t){n._96O(o+(e-o)*t,i)},t._37o=function(){delete n._zooming,delete n._14o,n.onZoomEnded()},n._zooming=1,n._14o=_s(t)}else n._96O(e,i)},t._96O=function(t,e){var i=this;if((t=i.adjustZoom(t))!==i._zoom){i.validate();var n=i._29I,o=i._zoom;0!==n.width&&0!==n.height&&(e=e||{x:n.x+n.width/2,y:n.y+n.height/2},i.tx((e.x-n.x)*o-e.x*t),i.ty((e.y-n.y)*o-e.y*t)),i._zoom=t,i.fp("zoom",o,t)}}}};ro(st,{baseZIndex:N,isTouchable:Nt,devicePixelRatio:a.devicePixelRatio?a.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:lt.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(t){return t*t},labelColor:pa,labelSelectColor:ba,labelFont:(Nt?"15":"12")+"px arial, sans-serif",widgetIndent:Nt?30:20,widgetRowHeight:Nt?30:20,widgetHeaderHeight:Nt?32:22,widgetTitleHeight:Nt?34:24,scrollBarColor:ia,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:Nt?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:_o,intersectionLineLine:vo,getVersion:function(){return"5.2"},setCompType:function(t,e){mn[t]=e},getCompType:function(t){return mn[t]},numberListener:(k={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1},function(t){var e=t.keyCode;k[e]||65===e&&st.isCtrlDown(t)||35<=e&&e<=39||(t.shiftKey||e<48||57<e)&&(e<96||105<e)&&t.preventDefault()}),preventDefault:function(t){var e=t.target.tagName;("DIV"===e||"CANVAS"===e)&&(t.preventDefault(),t.preventManipulation&&t.preventManipulation())},getWindowInfo:function(){var t=nt.documentElement,e=t&&(t.scrollLeft||t.scrollTop)?t:nt.body;return{target:e,left:e.scrollLeft,top:e.scrollTop,width:a.innerWidth||e.clientWidth,height:a.innerHeight||e.clientHeight}},isDragging:function(){return!!qo},isLeftButton:function(t){return!!Nt||0===t.button},getTouchCount:function(t){return Nt?t.touches.length:1},isDoubleClick:(T=new Date,V=ot,D=new Date,E=ot,function(t){if(un=new Date,dn=un.getTime(),Nt){var e=t.type,i=e+"_isDoubleClick";if(t[i]===N){var n=Os(t);"touchstart"===e?(t[i]=V&&Ts(V,n)<20&&dn-T.getTime()<500,T=un,V=n):(t[i]=E&&Ts(E,n)<20&&dn-D.getTime()<500,D=un,E=n)}return t[i]}return 2===t.detail}),isShiftDown:function(t){return t?t.shiftKey:bn[16]},isCtrlDown:function(t){return t?Ut?t.metaKey:t.ctrlKey:Ut?bn[91]:bn[17]},getClientPoint:function(t){return Nt&&(t=Xo(t)),{x:t.clientX,y:t.clientY}},getPagePoint:function(t){return Nt&&(t=Xo(t)),{x:t.pageX,y:t.pageY}},createObject:function(t,e){var i=new t;for(var n in e){var o=Nn(n),r=e[n];i[o]?(i[o](r),"setToolTip"===o&&i.enableToolTip&&i.enableToolTip()):i[n]=r}return i},setImage:function(t,e,i,n){var o=arguments.length;4===o?Mn(t,n,e,i):2===o?Qn(e)?Mn(t,e):gn[t]=e:1===o&&Mn(t,t)},getImage:function(t,e){var i;if(t==ot)return ot;if(Yn(t)?i=t:(i=gn[t],t&&i===N&&(kn&&kn[t]||Mn(t,t))),e&&i&&i.tagName){i.colors||(i.colors={});var n=i.colors[e];return n||(n=function(e,t,i,n){var o=Do();o.width=i,o.height=n;var r=o.getContext("2d");r.drawImage(e,0,0,i,n);try{for(var a=r.getImageData(0,0,i,n),s=a.data,h=0,l=s.length;h<l;h+=4){var c=s[h+0],u=s[h+1],d=s[h+2];s[h+0]=t[0]*c,s[h+1]=t[1]*u,s[h+2]=t[2]*d}r.putImageData(a,0,0)}catch(t){return e}return o}(i,Ir(e),i.width,i.height),i.colors[e]=n),n}return i},getId:(S=1,function(){return++S}),callLater:function(t,e,i,n){var o=function(){t.apply(e,i)};return n?Lt(o,n):a.requestAnimationFrame(o)},asyncEach:function(n,e,o){"function"!=typeof o&&(o=Function.prototype);var r=new Array(n.length),a=0,s=!1;n.forEach(function(t,i){e(t,function(t,e){return s?void 0:t?(s=!0,o(null)):(r[i]=e,++a===n.length?o(r):void 0)})})},xhrLoad:function(t,e,i){Zn(t)||(t=[t]),t.length;var n=i&&i.sync;us(t,function(t,e){var i=new XMLHttpRequest;i.overrideMimeType("text/plain"),i.open("GET",t,!n),i.onload=function(t){200===this.status||0===this.status?e(null,t.target.response):e(!0)},i.onerror=function(){e(!0)},i.send(null)},function(t){"function"==typeof e&&e(t)})},clone:function(t){if(!t)return ot;if(Zn(t))return t.slice(0);if(Yn(t)){var e,i={};for(e in t)i[e]=t[e];return i}return t},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(t,e){if(t===e)return 0;if(t==ot&&e!=ot)return 1;if(t!=ot&&e==ot)return-1;if(t==ot&&e==ot)return 0;var i,n=typeof t,o=typeof e;return n===Li&&o===Li?i=t.localeCompare(e):n===Fi&&o===Fi&&(i=t-e),i===N&&(i=(""+t).localeCompare(""+e)),0<i?1:i<0?-1:0},getClassMap:function(){return fn},getClass:function(t){if(Qn(t)){var e,i=fn[t];if(!i){e=t.split("."),i=a;for(var n=0;n<e.length;n++)i=i[e[n]];fn[t]=i}return i}return t},def:function(t,e,i){var n,o,r,a=function(){};if(a.prototype=e.prototype,n=new a,Qn(t)){if(fn[t])throw"'"+t+"' alreay defined";r=gs(t),n.getClassName=function(){return t}}else r=t;if(n.constructor=r,n.getClass=function(){return r},n.getSuperClass=function(){return e},i)for(o in i)Va[o]&&Va.hasOwnProperty(o)?Va[o](n,i):n[o]=i[o];r.prototype=n,r.superClass=e.prototype},startAnim:(O=function(t){t.duration&&(t.startTime=Ln()),t.timeId=cs(t.tick,ot,ot,t.interval)},function(e){return(e=fs(e)).easing=e.easing||st.animEasing,e.duration||e.frames||(e.duration=st.animDuration),e.t=0,e.duration?e.interval=0:(e.frame=0,e.interval=e.interval||10),e.tick=function(){if(e.duration){var t=(Ln()-e.startTime)/e.duration;1<t&&(t=1),e.t=t,e.action(e.easing(t),t),1===t?e.stop():e._isPaused||(e.timeId=cs(e.tick))}else e.frame++,t=e.t=e.frame/e.frames,e.action(e.easing(t),t),e.frame<e.frames?e._isPaused||(e.timeId=cs(e.tick,ot,ot,e.interval)):e.stop()},e.resume=function(){e._isPaused&&(delete e._isPaused,e.duration?e.t<1&&(e.startTime=Ln()-e.duration*e.t,e.timeId=cs(e.tick)):e.frame<e.frames&&(e.timeId=cs(e.tick,ot,ot,e.interval)))},e.pause=function(){e._isPaused=!0},e.stop=function(t){e.isRunning()&&(e.duration?e.t<1&&t&&(e.t=1,e.action(e.easing(1))):e.frame<e.frames&&t&&(e.frame=e.frames,e.action(e.easing(1))),e._37o&&e._37o(),e.finishFunc&&e.finishFunc(),jn(e.timeId,!e.duration),delete e.timeId)},e.isRunning=function(){return e.timeId!=ot},e.delay?cs(O,ot,[e],e.delay):O(e),e}),getTextSize:(C={},I=nt?Do().getContext("2d"):ot,function(t,e){I.font=t||Ha;var i=C[I.font];return i||(i=2*I.measureText("e").width+4,C[I.font]=i),{width:I.measureText(e).width+4,height:i}}),drawText:function(t,e,i,n,o,r,a,s,h,l){if(e!=ot){var c=ms(i,e),u={};u.y=l&&"middle"!==l?l===$t?r+c.height/2:r+s-c.height/2:r+s/2,u.x=h&&h!==Zt?h===Jt?o+a-c.width/2:o+a/2:o+c.width/2,jo(t,e,u,i,n)}},getDistance:function(t,e){var i=t.length;return e?3===i?_t(Bt(t[0]-e[0])+Bt(t[1]-e[1])+Bt(t[2]-e[2])):2===i?_t(Bt(t[0]-e[0])+Bt(t[1]-e[1])):t.z===N?_t(Bt(e.x-t.x)+Bt(e.y-t.y)):_t(Bt(e.x-t.x)+Bt(e.y-t.y)+Bt(e.z-t.z)):3===i?_t(Bt(t[0])+Bt(t[1])+Bt(t[2])):2===i?_t(Bt(t[0])+Bt(t[1])):void 0},brighter:function(t,e){return Pr(t,e||40)},darker:function(t,e){return Pr(t,e||-40)},unionPoint:function(t,e){if(!t)return ot;if(2===arguments.length)return t&&e?{x:pt(t.x,e.x),y:pt(t.y,e.y),width:bt(t.x-e.x),height:bt(t.y-e.y)}:ot;var i=t;if(i._as&&(i=i._as),i.length===N)return ot;var n=i.length;if(n<=0)return ot;for(var o=1,r=i[0],a={x:r.x,y:r.y,width:0,height:0};o<n;o++){r=i[o];var s=pt(a.x,r.x),h=vt(a.x+a.width,r.x),l=pt(a.y,r.y),c=vt(a.y+a.height,r.y);a.x=s,a.y=l,a.width=h-s,a.height=c-l}return a},unionRect:function(t,e){if(t&&!e)return fs(t);if(!t&&e)return fs(e);if(t&&e){var i={x:pt(t.x,e.x),y:pt(t.y,e.y)};return i.width=vt(t.x+t.width,e.x+e.width)-i.x,i.height=vt(t.y+t.height,e.y+e.height)-i.y,i}return ot},containsPoint:function(t,e){return!(!t||e.x<t.x||e.y<t.y||e.x>t.x+t.width||e.y>t.y+t.height)},containsRect:function(t,e){if(!t||!e)return!1;var i=e.x,n=e.y,o=e.width,r=e.height,a=t.width,s=t.height;if((a|s|o|r)<0)return!1;var h=t.x,l=t.y;if(i<h||n<l)return!1;if(a+=h,(o+=i)<=i){if(h<=a||a<o)return!1}else if(h<=a&&a<o)return!1;if(s+=l,(r+=n)<=n){if(l<=s||s<r)return!1}else if(l<=s&&s<r)return!1;return!0},intersectsRect:function(t,e){if(!t||!e)return!1;var i=e.width,n=e.height,o=t.width,r=t.height;if(o<=0||r<=0||i<=0||n<=0)return!1;var a=e.x,s=e.y,h=t.x,l=t.y;return r+=l,i+=a,n+=s,a<(o+=h)&&s<r&&h<i&&l<n},intersection:function(t,e){if(!t||!e)return ot;var i=e.x,n=e.y,o=t.x,r=t.y,a=i,s=n,h=o,l=r;return a+=e.width,s+=e.height,i<o&&(i=o),n<r&&(n=r),(h+=t.width)<a&&(a=h),(l+=t.height)<s&&(s=l),s-=n,(a-=i)<=0||s<=0?ot:{x:i,y:n,width:a,height:s}},grow:function(t,e){t.x-=e,t.y-=e,t.width=t.width+2*e,t.height=t.height+2*e},getLogicalPoint:function(t,e,i,n,o,r){var a=e.getBoundingClientRect();return{x:((t=Nt?Xo(t):t).clientX-a.left+e.scrollLeft-(i||0))/(o||1),y:(t.clientY-a.top+e.scrollTop-(n||0))/(r||1)}},removeHTML:function(t){return!(!t||!t.parentNode||(x===t||((x=t).parentNode.removeChild(t),x=ot),0))},getToolTipDiv:function(){if(!tn){tn=Vo(),en=Vo();var t=tn.style;st.baseZIndex!=ot&&(t.zIndex=kt(st.baseZIndex)+3+""),t.whiteSpace="nowrap",t.color=st.toolTipLabelColor,t.background=st.toolTipBackground,t.font=st.toolTipLabelFont,t.padding="5px",t.boxShadow="0px 0px 3px "+st.toolTipShadowColor}return tn},isToolTipShowing:function(){return!(!tn||!tn.parentNode)||!(!en||!en.parentNode)},hideToolTip:function(){zs(tn),zs(en),rn()},showToolTip:function(t,e){if(t&&e!=ot){var i,n;if(st.getToolTipDiv(),e.html?(e=e.html,i=en,zs(tn)):(i=tn,zs(en)),n=i.style,i.innerHTML=e,i.parentNode||Mo(nt.body,i),t.target){t=Ss(t);var o=Bs(),r=t.x,a=t.y,s=Nt?60:12;if(Nt){var h=i.getBoundingClientRect();n.left=r-h.width/2+ae,n.top=a-h.height-s<o.top?a+s+ae:a-h.height-s+ae}else{n.left=r+s+ae,n.top=a+s+ae,(h=i.getBoundingClientRect()).left+h.width>o.width&&(n.left=r-s-h.width+ae),h.top+h.height>o.height&&(n.top=a-s-h.height+ae),h.left<0&&(n.left=r+s+ae),h.top<0&&(n.top=a+s+ae)}}else n.left=t.x+ae,n.top=t.y+ae;rn()}else ja()},startDragging:function(t,e){t!==qo&&(qo?Nt?qo.handleWindowTouchEnd(e):qo.handleWindowMouseUp(e):Nt?(a.addEventListener(qi,Zo,!1),a.addEventListener(Zi,Jo,!1)):(a.addEventListener(Qi,$o,!1),a.addEventListener(Gi,Ko,!1)),qo=t)},getImageMap:function(){return gn},toBoundaries:function(t,e,i,n){var o=[];return Er(t,e,i,n).forEach(function(t){var e=[];t.forEach(function(t){e.push(t.x,t.y)}),o.push(e)}),o},getCurrentKeyCodeMap:function(){return bn},drawCenterImage:function(t,e,i,n,o,r,a){var s=vh(e,o),h=ph(e,o);mh(t,e,dt(i-s/2),dt(n-h/2),s,h,o,r,a)},drawStretchImage:function(t,e,i,n,o,r,a,s,h,l){var c,u=vh(e,s),d=ph(e,s);"uniform"===i?(d*=c=pt(r/u,a/d),n+=dt((r-(u*=c))/2),o+=dt((a-d)/2),r=u,a=d):i===Mi&&((r<u||a<d)&&(u*=c=pt(r/u,a/d),d*=c),n+=dt((r-u)/2),o+=dt((a-d)/2),r=u,a=d),mh(t,e,n,o,r,a,s,h,l)},toCanvas:function(t,e,i,n,o,r,a){t=as(t,a),e=e||vh(t,o),i=i||ph(t,o);var s=Do();Po(s,e,i,1);var h=Ao(s);return hs(h,t,n,0,0,e,i,o,r,a),h.restore(),s},createElement:function(t,e,i,n){var o=nt.createElement(t);return Eo(o,e||lt.widgetBorder,2),o.style.font=i||Ha,n!=ot&&(o.value=n),o},containedInView:function(t,e){var i=Qo(e).getBoundingClientRect();return Es({x:i.left,y:i.top,width:i.width,height:i.height},Os(t))},isIsolating:function(){return cn},setIsolating:function(t){cn=t},toColorData:Cr},!0),ro(ct,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var Da=st.disabledOpacity,Ea=st.toolTipDelay,ka=st.devicePixelRatio,Pa=st.autoMakeVisible,Ma=st.autoHideScrollBar,Ba=st.imageGradient,La=st.showToolTip,ja=st.hideToolTip,Ra=st.dashPattern,za=st.lineCap,Fa=st.lineJoin,Aa=st.labelColor,Wa=st.labelSelectColor,Ha=st.labelFont,Ua=st.widgetIndent,Na=st.widgetRowHeight,Qa=st.widgetHeaderHeight,Ga=st.widgetTitleHeight,Xa=st.scrollBarColor,Ya=st.scrollBarSize,qa=st.scrollBarTimeout,Za=st.scrollBarMinLength,Ja=st.scrollBarInteractiveSize,$a=st.zoomIncrement,Ka=st.scrollZoomIncrement,ts=st.pinchZoomIncrement,es=st.zoomMax,is=st.zoomMin,ns=st.createObject,os=st.preventDefault,rs=st.setImage,as=st.getImage,ss=st.drawCenterImage,hs=st.drawStretchImage,ls=st.getId,cs=st.callLater,us=st.asyncEach,ds=(st.xhrLoad,st.sortFunc),fs=st.clone,gs=st.getClass,_s=st.startAnim,vs=st.brighter,ps=st.darker,bs=st.drawText,ms=st.getTextSize,ys=st.isLeftButton,ws=st.getTouchCount,xs=st.isDoubleClick,Cs=st.isShiftDown,Is=st.isCtrlDown,Os=st.getClientPoint,Ss=st.getPagePoint,Ts=st.getDistance,Vs=st.unionPoint,Ds=st.unionRect,Es=st.containsPoint,ks=st.containsRect,Ps=st.intersectsRect,Ms=st.intersection,Bs=st.getWindowInfo,Ls=st.grow,js=st.getLogicalPoint,Rs=st.startDragging,zs=st.removeHTML,Fs=st.createElement,As=st.segmentResolution,Ws=st.shapeResolution,Hs=st.shapeSide,Us=st.def,Ns=function(t,e,i){Us("ht."+t,e,i)},Qs=function(t,e){t.childNodes.forEach(function(t){e(t),Qs(t,e)})};ro(st,{toolTipLabelColor:Aa,toolTipLabelFont:Ha,toolTipBackground:lt.toolTipBackground,toolTipShadowColor:ia,setDevicePixelRatio:function(t){ka=st.devicePixelRatio="number"==typeof t?t:a.devicePixelRatio,Qs(nt.body,function(t){var e=t._ht;e&&e._canvas&&(Po(e._canvas,e.getWidth(),e.getHeight()),e.redraw?e.redraw():e.iv())})}},!0);var Gs=1e-6,Xs="undefined"!=typeof Uint16Array?Uint16Array:Array,Ys="undefined"!=typeof Float32Array?Float32Array:Array,qs=function(t,e,i){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]];if(i){var o=Ts(n);0<o&&(n[0]/=o,n[1]/=o,n[2]/=o)}return n},Zs=function(t,e){return 3===t.length?t[0]*e[0]+t[1]*e[1]+t[2]*e[2]:t[0]*e[0]+t[1]*e[1]},Js=function(){var t=new Ys(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},$s=Js(),Ks=function(t){var e=new Ys(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},th=function(t,e){var i=t[0],n=t[1],o=t[2];return t[0]=e[0]*i+e[4]*n+e[8]*o+e[12],t[1]=e[1]*i+e[5]*n+e[9]*o+e[13],t[2]=e[2]*i+e[6]*n+e[10]*o+e[14],t},eh=(u=ao(ar[1]+ar[7]),d=ao(ar[0]+ar[3]-ar[10]),f=ao(ar[8]+2),_=function(){return r=h.charAt(o),o+=1,r},y=function(){var t="";if(r===f)for(;_();){if(r===f)return _(),t;t+=r}else _()},w=function(){for(;r&&r<=" ";)_()},l=function(){switch(w(),r){case u:return function(){var t,e={};if(r===u){if(_(),w(),r===d)return _(),e;for(;r;){if(t=y(),w(),_(),e[t]=l(),w(),r===d)return _(),e;_(),w()}}}();default:return y()}},function(t){var e;if(it={},t&&(h=t,o=0,r=" ",e=l(),w(),!r))return e}),ih=function(t,e){if(e){var i=wt(e),n=mt(e),o=t[4],r=t[5],a=t[6],s=t[7],h=t[8],l=t[9],c=t[10],u=t[11];t[4]=o*n+h*i,t[5]=r*n+l*i,t[6]=a*n+c*i,t[7]=s*n+u*i,t[8]=h*n-o*i,t[9]=l*n-r*i,t[10]=c*n-a*i,t[11]=u*n-s*i}},nh=function(t,e){if(e){var i=wt(e),n=mt(e),o=t[0],r=t[1],a=t[2],s=t[3],h=t[8],l=t[9],c=t[10],u=t[11];t[0]=o*n-h*i,t[1]=r*n-l*i,t[2]=a*n-c*i,t[3]=s*n-u*i,t[8]=o*i+h*n,t[9]=r*i+l*n,t[10]=a*i+c*n,t[11]=s*i+u*n}},oh=function(t,e){if(e){var i=wt(e),n=mt(e),o=t[0],r=t[1],a=t[2],s=t[3],h=t[4],l=t[5],c=t[6],u=t[7];t[0]=o*n+h*i,t[1]=r*n+l*i,t[2]=a*n+c*i,t[3]=s*n+u*i,t[4]=h*n-o*i,t[5]=l*n-r*i,t[6]=c*n-a*i,t[7]=u*n-s*i}},rh=function(t,e,i){return ah(ot,!1===i?ot:t.s3(),t.r3(),t.getRotationMode(),t.p3(),ot,e)},ah=function(t,e,i,n,o,r,a){return r||(r=Js()),o&&kc(r,o),Nl(r,i,n),a&&Mc(r,r,a),e&&Pc(r,e),t&&Mc(r,r,t),r},sh=function(t,e,i){e=kt(e),i=kt(i);var n=this;n.g=t,n._84O=e,n._85O=i,n._70I=!0,n.F=0,n._83O=e+i,n.pen={x:0,y:0}},hh="setLineDash",lh=function(t,e,i){return co(e)?t:t[hh]?(t[hh](e),i&&(t.lineDashOffset=i),t):new sh(t,e[0],1<e.length?e[1]:e[0])},ch=function(t,e){!co(e)&&t[hh]&&(t[hh](xn),t.lineDashOffset=0)};Us(sh,e,{_69I:6,moveTo:function(t,e){var i=this.pen;i.x=t,i.y=e,this.g.moveTo(t,e),this.start||(this.start={x:t,y:e})},lineTo:function(t,e){var i=this,n=i.pen,o=t-n.x,r=e-n.y,a=Vt(r,o),s=mt(a),h=wt(a),l=i._23O(n.x,n.y,t,e),c=i._85O,u=i._84O,d=i._83O;if(i.F){if(i.F>l)return i._70I?i._72I(t,e):i.moveTo(t,e),void(i.F-=l);if(i._70I?i._72I(n.x+s*i.F,n.y+h*i.F):i.moveTo(n.x+s*i.F,n.y+h*i.F),l-=i.F,i.F=0,i._70I=!i._70I,!l)return}var f=ft(l/d);if(f){for(var g=s*u,_=h*u,v=s*c,p=h*c,b=0;b<f;b++)i._70I?(i._72I(n.x+g,n.y+_),i.moveTo(n.x+v,n.y+p)):(i.moveTo(n.x+v,n.y+p),i._72I(n.x+g,n.y+_));l-=d*f}i._70I?u<l?(i._72I(n.x+s*u,n.y+h*u),i.moveTo(t,e),i.F=c-(l-u),i._70I=!1):(i._72I(t,e),l===u?(i.F=0,i._70I=!i._70I):(i.F=u-l,i.moveTo(t,e))):c<l?(i.moveTo(n.x+s*c,n.y+h*c),i._72I(t,e),i.F=u-(l-c),i._70I=!0):(i.moveTo(t,e),l===c?(i.F=0,i._70I=!i._70I):i.F=c-l)},quadraticCurveTo:function(t,e,i,n){var o,r=this,a=r.pen,s=a.x,h=a.y,l=r._22O(s,h,t,e,i,n),c=0,u=0,d=r._85O,f=r._84O;if(r.F){if(r.F>l)return r._70I?r._71I(t,e,i,n):r.moveTo(i,n),void(r.F-=l);if(c=r.F/l,o=r._20O(s,h,t,e,i,n,c),r._70I?r._71I(o[2],o[3],o[4],o[5]):r.moveTo(o[4],o[5]),r.F=0,r._70I=!r._70I,!l)return}var g=l-l*c,_=ft(g/r._83O),v=f/l,p=d/l;if(_)for(var b=0;b<_;b++)r._70I?(u=c+v,o=r._21O(s,h,t,e,i,n,c,u),r._71I(o[2],o[3],o[4],o[5]),u=(c=u)+p,o=r._21O(s,h,t,e,i,n,c,u),r.moveTo(o[4],o[5])):(u=c+p,o=r._21O(s,h,t,e,i,n,c,u),r.moveTo(o[4],o[5]),u=(c=u)+v,o=r._21O(s,h,t,e,i,n,c,u),r._71I(o[2],o[3],o[4],o[5])),c=u;g=l-l*c,r._70I?f<g?(u=c+v,o=r._21O(s,h,t,e,i,n,c,u),r._71I(o[2],o[3],o[4],o[5]),r.moveTo(i,n),r.F=d-(g-f),r._70I=!1):(o=r._19O(s,h,t,e,i,n,c),r._71I(o[2],o[3],o[4],o[5]),l===f?(r.F=0,r._70I=!r._70I):(r.F=f-g,r.moveTo(i,n))):d<g?(u=c+p,o=r._21O(s,h,t,e,i,n,c,u),r.moveTo(o[4],o[5]),o=r._19O(s,h,t,e,i,n,u),r._71I(o[2],o[3],o[4],o[5]),r.F=f-(g-d),r._70I=!0):(r.moveTo(i,n),g===d?(r.F=0,r._70I=!r._70I):r.F=d-g)},bezierCurveTo:function(){var t=arguments;this.pen={x:t[4],y:t[5]},this.g.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},arc:function(t,e,i,n,o,r){r||(n=-n,o=-o),Rr(this,t,e,n,o-n,i,i,!1)},rect:function(t,e,i,n){var o=this;o.pen={x:t,y:e},o.moveTo(t,e),o.lineTo(t,e+n),o.lineTo(t+i,e+n),o.lineTo(t+i,e),o.lineTo(t,e)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(t,e,i,n){var o=i-t,r=n-e;return _t(o*o+r*r)},_22O:function(t,e,i,n,o,r,a){for(var s,h,l,c,u,d,f,g=0,_=t,v=e,p=0<a?a:this._69I,b=1;b<=p;b++)s=(u=(c=1-(l=b/p))*c)*t+(d=2*l*c)*i+(f=l*l)*o,h=u*e+d*n+f*r,g+=this._23O(_,v,s,h),_=s,v=h;return g},_21O:function(t,e,i,n,o,r,a,s){var h=this;if(0===a)return h._20O(t,e,i,n,o,r,s);if(1===s)return h._19O(t,e,i,n,o,r,a);var l=h._20O(t,e,i,n,o,r,s);return l.push(a/s),h._19O.apply(h,l)},_20O:function(t,e,i,n,o,r,a){if(1!==a){var s=i+(o-i)*a,h=n+(r-n)*a;o=(i=t+(i-t)*a)+(s-i)*a,r=(n=e+(n-e)*a)+(h-n)*a}return[t,e,i,n,o,r]},_19O:function(t,e,i,n,o,r,a){if(1!==a){var s=t+(i-t)*a,h=e+(n-e)*a;t=s+((i+=(o-i)*a)-s)*a,e=h+((n+=(r-n)*a)-h)*a}return[t,e,i,n,o,r]},_72I:function(t,e){var i=this.pen;(t!==i.x||e!==i.y)&&(i.x=t,i.y=e,this.g.lineTo(t,e))},_71I:function(t,e,i,n){var o=this.pen;(t!==i||e!==n||i!==o.x||n!==o.y)&&(o.x=i,o.y=n,this.g.quadraticCurveTo(t,e,i,n))}}),Rt&&(Et=!0);var uh=lt.chart,dh=st.compStack=[],fh=/^style@/,gh=/^attr@/,_h=/^field@/,vh=function(t,e){return t?bh(t.width,e):0},ph=function(t,e){return t?bh(t.height,e):0},bh=function(t,e,i){if(!t||!t.func)return t;var n,o=t.func,r=t.value;return n=qn(o)?o(e,i):e?fh.test(o)?e.s(o.slice(6)):gh.test(o)?e.a(o.slice(5)):_h.test(o)?e[o.slice(6)]:e[o]?e[o](i):r:r,r!==N&&n==ot?r:n},mh=st.drawImage=(z=function(t,e,i){var n=t[e];return n&&n.func?(n=bh(n,P,b),i&&(n=i(n))):i&&(n=t[e]=i(n)),n},F=function(t,e){var i=z(t,e);if(R&&i){var n=Ir(R);return i=Cr(i),"rgba("+ft(i[0]*n[0])+","+ft(i[1]*n[1])+","+ft(i[2]*n[2])+","+i[3]+")"}return i},A=function(t){if(Zn(t)){for(var e=new yh,i=t.length,n=0;n<i;n+=2)e.add({x:t[n],y:t[n+1]});t=e}return t},W=function(t){return Zn(t)?new yh(t):t},X=function(t,e){if(t){var i=e.x+e.width/2,n=e.y+e.height/2;L.save(),Ho(L,i,n),Uo(L,t),Ho(L,-i,-n)}},Y=function(t){t&&L.restore()},m={border:function(t,e){zr(L,F(t,Ri),e.x,e.y,e.width,e.height,z(t,"width"))},image:function(t,e){var i=R,n=R||z(t,Ri),o=as(z(t,"name"),n);o&&(hs(L,o,z(t,"stretch"),e.x,e.y,e.width,e.height,P,b,n),R=i)},text:function(t,e){var i=z(t,"text");i!=ot&&bs(L,i,z(t,"font"),F(t,Ri),e.x,e.y,e.width,e.height,z(t,"align"),z(t,"vAlign"))},pieChart:function(t,e){var i=z(t,Se),n=0;if(i&&(i.forEach(function(t){n+=t}),0<n)){for(var o=z(t,"colors")||uh,r=z(t,"startAngle")||0,a=z(t,"hollow"),s=z(t,Ve),h=z(t,Me),l=z(t,Be),c=s?new yh:ot,u=e.x,d=e.y,f=e.width,g=e.height,_=u+f/2,v=d+g/2,p=pt(f,g)/2,b=0,m=0;m<i.length;m++){var y=i[m],w=Ot*y/n,x=r+w;if(L.fillStyle=o[b++],b===o.length&&(b=0),L.beginPath(),a){var C=_+mt(r)*p/2,I=v+wt(r)*p/2,O=_+mt(x)*p,S=v+wt(x)*p;L.moveTo(C,I),L.arc(_,v,p/2,r,x,!1),L.lineTo(O,S),L.arc(_,v,p,x,r,!0)}else L.moveTo(_,v),L.arc(_,v,p,x,r,!0);c&&(w=(r+x)/2,c.add({text:qn(s)?s(y,m,n,P):y,x:_+.75*mt(w)*p,y:v+.75*wt(w)*p})),L.closePath(),L.fill(),r=x}c&&c.each(function(t){bs(L,t.text,h,l,t.x,t.y,0,0,te)})}},columnChart:function(t,e){var i=z(t,Te);if(i&&0<i.length){var n=i.length,o=z(t,Ve),r=z(t,Me),a=z(t,Be),s=o?new yh:ot,h=z(t,"minValue")||0,l=z(t,"maxValue");if(l==ot&&(l=0,i.forEach(function(t){t.values.forEach(function(t){l=vt(l,t)})})),h===l)return;for(var c=e.height/(l-h),u=e.y+l*c,d=z(i[0],Se).length,f=e.width/(3*d+1),g=2*f/n,_=0,v=0;v<n;v++)for(var p=i[v],b=z(p,Ri),m=z(p,"colors"),y=z(p,Se),w=0;w<d;w++){m?L.fillStyle=m[w]:b?L.fillStyle=b:(L.fillStyle=uh[_++],_===uh.length&&(_=0));var x=y[w],C=x*c,I=e.x+(1+3*w)*f+v*g;if(Mr(L,I,u-C,g,C),s){var O=qn(o)?o(x,w,p,P):x,S=ms(r,O).height;s.add({x:I,y:u-C-S,width:g,height:S,text:O})}}s&&s.each(function(t){bs(L,t.text,r,a,t.x,t.y,t.width,t.height,te)})}},stackedColumnChart:function(t,e){var i=z(t,Te);if(i&&0<i.length){var n=i.length,o=z(i[0],Se).length,r=e.width/(3*o+1),a=0,s=z(t,"maxValue"),h=z(t,Ve),l=z(t,Me),c=z(t,Be),u=h?new yh:ot;if(s==ot)for(var d=s=0;d<o;d++){for(var f=0,g=0;g<n;g++)f+=z(i[g],Se)[d];s=vt(s,f)}if(0<s){for(d=0;d<o;d++){var _=e.y+e.height;for(g=0;g<n;g++){var v=i[g],p=z(v,Ri),b=z(v,Se)[d],m=b/s*e.height;p?L.fillStyle=p:(L.fillStyle=uh[a++],a===uh.length&&(a=0)),_-=m;var y={x:e.x+(1+3*d)*r,y:_,width:2*r,height:m};Mr(L,y.x,y.y,y.width,y.height),u&&(y.text=qn(h)?h(b,d,v,P):b,u.add(y))}}u&&u.each(function(t){bs(L,t.text,l,c,t.x,t.y,t.width,t.height,te)})}}},percentageColumnChart:function(t,e){var i=z(t,Te);if(i&&0<i.length){for(var n=i.length,o=z(i[0],Se).length,r=e.width/(3*o+1),a=0,s=z(t,Ve),h=z(t,Me),l=z(t,Be),c=s?new yh:ot,u=0;u<o;u++){for(var d=0,f=0;f<n;f++)d+=z(i[f],Se)[u];if(0<d){var g=e.y+e.height;for(f=0;f<n;f++){var _=i[f],v=z(_,Ri),p=z(_,Se)[u],b=p/d*e.height;v?L.fillStyle=v:(L.fillStyle=uh[a++],a===uh.length&&(a=0)),g-=b;var m={x:e.x+(1+3*u)*r,y:g,width:2*r,height:b};Mr(L,m.x,m.y,m.width,m.height),c&&(m.text=qn(s)?s(p,u,_,P):p,c.add(m))}}}c&&c.each(function(t){bs(L,t.text,h,l,t.x,t.y,t.width,t.height,te)})}},lineChart:function(t,e){var i=z(t,Te);if(i&&0<i.length){var n=i.length,o=z(t,"minValue")||0,r=z(t,"maxValue");if(r==ot&&(r=0,i.forEach(function(t){t.values.forEach(function(t){r=vt(r,t)})})),o===r)return;for(var a=e.height/(r-o),s=e.y+r*a,h=z(i[0],Se).length,l=e.width/(3*h+1),c=0,u=z(t,"lineWidth")||2,d=z(t,"line3d"),f=z(t,"linePoint"),g=z(t,Ve),_=z(t,Me),v=z(t,Be),p=0;p<n;p++){var b=i[p],m=z(b,Ri),y=z(b,Se);m?L.strokeStyle=m:(m=L.strokeStyle=uh[c++],c===uh.length&&(c=0)),L.beginPath();for(var w=0;w<h;w++){var x=e.x+(2+3*w)*l,C=s-y[w]*a;0===w?L.moveTo(x,C):L.lineTo(x,C)}if(L.lineWidth=u,L.stroke(),d&&kr(L,m,ot,u,j),f||g){var I,O=u/2+2;for(w=0;w<h;w++){var S=y[w];if(x=e.x+(2+3*w)*l,C=s-S*a,qn(f)?f(L,x,C,m,w,b,P):f&&(L.fillStyle=m,L.beginPath(),L.arc(x,C,O,0,Ot,!0),L.fill()),qn(g)?I=g(S,w,b,P):g&&(I=S),I){var T=ms(_,I).height,V=L.shadowBlur;if(V){var D=L.shadowOffsetX,E=L.shadowOffsetY,k=L.shadowColor;L.shadowOffsetX=0,L.shadowOffsetY=0,L.shadowBlur=0,L.shadowColor=ot}bs(L,I,_,v,x,C-T-O+2,0,T,te),V&&(L.shadowOffsetX=D,L.shadowOffsetY=E,L.shadowColor=k,L.shadowBlur=V)}}}}}}},function(t,e,i,n,o,r,a,s,h){if(e&&o&&r){if(L=t,P=a,j=(b=s)&&b._zoom?b._zoom:1,R=h,e.tagName)return void L.drawImage(e,i,n,o,r);if(!1!==z(e,"visible")){R||(R=bh(e.color,P,b));var l=vh(e,P),c=ph(e,P),_={x:0,y:0,width:l,height:c},u=z(e,"clip"),d=z(e,"opacity");L.save(),Ho(L,i,n),(l!==o||c!==r)&&L.scale(o/l,r/c),u&&(qn(u)?u(L,l,c,P,b,e):(L.beginPath(),L.rect(0,0,l,c),L.clip())),d!=ot&&(L.globalAlpha*=d),z(e,"comps").forEach(function(t){if(!1!==z(t,Qe)){dh.splice(0,0,t);var e=z(t,"opacity"),i=z(t,"shadow"),n=z(t,"type"),o=function(t,e){var i=z(t,ce);if(Zn(i)){var n=i.length,o=z(t,"relative"),r=e.width,a=e.height;if(4===n)i={x:i[0],y:i[1],width:i[2],height:i[3]},o&&(i.x*=r,i.y*=a,i.width*=r,i.height*=a);else if(3===n){var s=i[0];i={width:i[1],height:i[2]},o&&(i.width*=r,i.height*=a),s=ta(s,e,i),i.x=s.x-i.width/2,i.y=s.y-i.height/2}var h=z(t,"offsetX");h&&(i.x+=h),(h=z(t,"offsetY"))&&(i.y+=h)}return i}(t,_);if(e!=ot){var r=L.globalAlpha;L.globalAlpha*=e}if(i){var a=L.shadowOffsetX,s=L.shadowOffsetY,h=L.shadowBlur,l=L.shadowColor,c=z(t,"shadowOffsetX"),u=z(t,"shadowOffsetY"),d=z(t,"shadowBlur"),f=z(t,"shadowColor");L.shadowOffsetX=c==ot?3:c,L.shadowOffsetY=u==ot?3:u,L.shadowBlur=d==ot?6:d,L.shadowColor=f||ia}if(qn(n))n(L,o,t,P,b);else if(st.getCompType(n))st.getCompType(n)(L,o,t,P,b);else if(Nr[n]||n===fe)!function(t,e,i){var n=z(t,Oe,A),o=z(t,We),r=e===fe,a=ot;if(!i&&r&&((i=t.unionRect)||(i=Vs(n),t.points.func||(t.unionRect=i)),a=i),i){r?a||(a=t.unionRect)||(a=Vs(n),t.points.func||(t.unionRect=a)):a=i;var s=uo(a,i);if(s)X(o,a);else{var h=a.width,l=a.height,c=i.width,u=i.height,d=c/h,f=u/l;L.save(),Ho(L,i.x+c/2,i.y+u/2),L.scale(d,f),o&&Uo(L,o),Ho(L,-a.x-h/2,-a.y-l/2)}var g,_,v,p,b=z(t,"borderPattern"),m=lh(L,b),y=F(t,"background"),w=as(z(t,"repeatImage"),R),x=F(t,"borderColor"),C=z(t,"borderWidth"),I=z(t,"segments",W),O=z(t,"gradient"),S=F(t,"gradientColor"),T=z(t,"border3d"),V=z(t,"border3dColor"),D=z(t,"border3dAccuracy"),E=z(t,"closePath"),k=L.lineJoin,P=L.lineCap;if(L.lineJoin=z(t,"borderJoin")||Fa,L.lineCap=z(t,"borderCap")||za,r?y||w?(w?jr(L,w):Lr(L,y,O,S,a),Dr(L,n,I,E),L.fill(),m!==L&&Dr(m,n,I,E)):Dr(m,n,I,E):("roundRect"===e?g=z(t,"cornerRadius"):"polygon"===e?g=z(t,"polygonSide"):"arc"===e&&(g=z(t,"arcFrom"),_=z(t,"arcTo"),v=z(t,"arcClose"),p=z(t,"arcOval")),y||w?(w?jr(L,w):Lr(L,y,O,S,a),Br(L,e,a,g,_,v,p),L.fill(),L!==m&&Br(m,e,a,g,_,v,p)):Br(m,e,a,g,_,v,p)),C&&x&&(L.lineWidth=C,L.strokeStyle=x,L.stroke(),T&&kr(L,x,V,C,j,D)),ch(L,b),z(t,"dash")){var M=z(t,"dashWidth")||C;if(0<M){b=z(t,"dashPattern")||Ra,m=lh(L,b,z(t,"dashOffset"));var B=z(t,"dashColor")||oa;m!==L&&(r?Dr(m,n,I,E):Br(m,e,a,g,_,v,p)),L.strokeStyle=B,L.lineWidth=M,L.stroke(),z(t,"dash3d")&&kr(L,B,z(t,"dash3dColor"),M,j,z(t,"dash3dAccuracy")),ch(L,b)}}e===ce&&Fr(L,y,z(t,"depth"),a),L.lineJoin=k,L.lineCap=P,s?Y(o):L.restore()}}(t,n,o);else if("SVGPath"===n)!function(t,e,i){var n=z(t,"path"),o=z(t,We),r=ot,a=Vr(null,n);if(i||((i=t.unionRect)||(i=Vs(a),t.path.func||(t.unionRect=i)),r=i),i){r||(r=t.unionRect)||(r=Vs(a),t.path.func||(t.unionRect=r));var s=uo(r,i);if(s)X(o,r);else{var h=r.width,l=r.height,c=i.width,u=i.height,d=c/h,f=u/l;L.save(),Ho(L,i.x+c/2,i.y+u/2),L.scale(d,f),o&&Uo(L,o),Ho(L,-r.x-h/2,-r.y-l/2)}var g=z(t,"borderPattern"),_=lh(L,g),v=F(t,"background"),p=F(t,"borderColor"),b=z(t,"borderWidth"),m=z(t,"gradient"),y=F(t,"gradientColor"),w=z(t,"border3d"),x=z(t,"border3dColor"),C=z(t,"border3dAccuracy"),I=L.lineJoin,O=L.lineCap;if(L.lineJoin=z(t,"borderJoin")||Fa,L.lineCap=z(t,"borderCap")||za,v?(Lr(L,v,m,y,r),Vr(L,n),L.fill(),_!==L&&Vr(L,n)):Vr(L,n),b&&p&&(L.lineWidth=b,L.strokeStyle=p,L.stroke(),w&&kr(L,p,x,b,j,C)),ch(L,g),z(t,"dash")){var S=z(t,"dashWidth")||b;if(0<S){g=z(t,"dashPattern")||Ra,_=lh(L,g,z(t,"dashOffset"));var T=z(t,"dashColor")||oa;_!==L&&Vr(L,n),L.strokeStyle=T,L.lineWidth=S,L.stroke(),z(t,"dash3d")&&kr(L,T,z(t,"dash3dColor"),S,j,z(t,"dash3dAccuracy")),ch(L,g)}}e===ce&&Fr(L,v,z(t,"depth"),r),L.lineJoin=I,L.lineCap=O,s?Y(o):L.restore()}}(t,n,o);else if(m[n]&&o){var g=z(t,We);X(g,o),m[n](t,o),Y(g)}i&&(L.shadowOffsetX=a,L.shadowOffsetY=s,L.shadowBlur=h,L.shadowColor=l),e!=ot&&(L.globalAlpha=r),dh.splice(0,1)}}),L.restore()}}});st.getCurrentComp=function(){return dh[0]},st.getParentComp=function(){return dh[1]},st.getInternal=function(){return{isEnter:vr,isEsc:pr,isSpace:_r,isLeft:ur,isUp:dr,isRight:fr,isDown:gr,addMethod:ro,superCall:ho,toPointsArray:Er,translateAndScale:Wo,appendArray:no,createWorldMatrix:ah,vec3TransformMat4:th,setCanvas:Po,createDiv:Vo,createView:To,createCanvas:Do,createImage:Rn,initContext:Ao,layout:Go,fillRect:Mr,Mat:Qr,drawBorder:zr,isString:Qn,setBorder:Eo,getPropertyValue:po,setPropertyValue:bo,drawVerticalLine:mo,draw3DRect:Fr,getPinchDist:Xr,isSameRect:uo,getPosition:ta,intersectionLineRect:_o,getNodeRect:Hh,getImageWidth:vh,getImageHeight:ph,formatNumber:io,initItemElement:So,drawPoints:Dr,createG2:lh,closePopup:Yo,isH:Wn,createAnim:oo,createNormalMatrix:su,createNormals:Rc,toFloatArray:bd,glMV:hu,batchShape:Ru,createNodeMatrix:rh,getFaceInfo:gu,transformAppend:xc,drawFaceInfo:_u,to3dPointsArray:wd,setGLDebugMode:function(t){fc=t},cube:function(){return{vs:Gu,is:Xu,uv:Yu}},ui:function(){return{DataUI:$l,NodeUI:Kl,EdgeUI:tc,GroupUI:ic,ShapeUI:nc,GridUI:rc,Data3dUI:Hd,Node3dUI:Ud,Shape3dUI:Qd}},getInternalVersion:function(){return"U2FsdGVkX18V9dMc2RTZnKL2LQXxdn86TppHEIbAw9PFw5KawE/c1TAWmxpBiZUs"},getDragger:function(){return qo},addMSMap:function(t){ro(Va,t)},k:tt}},function(u){function y(t,e){t!=ot&&(e==ot&&Li!=typeof t?this._54O(t,256):this._54O(t,e))}function w(){return new y(ot)}function l(t){return d.charAt(t)}function t(t){var e=w();return e._58O(t),e}function x(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function n(t){this.m=t}function o(t){var e=this;e.m=t,e.mp=t._50O(),e.mpl=32767&e.mp,e.mph=e.mp>>15,e.um=(1<<t.DB-15)-1,e.mt2=2*t.t}function I(t,e){return new y(t,e)}function r(){var t=this;t.n=ot,t.e=0,t.d=ot,t.p=ot,t.q=ot,t.dmp1=ot,t.dmq1=ot,t._10A=ot}function C(t){var e,i,n,o="",r=0;for(e=0;e<t.length&&t.charAt(e)!=m;++e)(n=b.indexOf(t.charAt(e)))<0||(r=0==r?(o+=l(n>>2),i=3&n,1):1==r?(o+=l(i<<2|n>>4),i=15&n,2):2==r?(o+=l(i),o+=l(n>>2),i=3&n,3):(o+=l(i<<2|n>>4),o+=l(15&n),0));return 1==r&&(o+=l(i<<2)),o}function O(t){var e=t.substring(0,38);return e&&30==e.indexOf("05000420")?["ss",t.substring(38)]:[]}function e(t,e){var i=I(e=(e=e.replace(E,"")).replace(/[ \n]+/g,""),16);if(i._55O()>this.n._55O())return 0;var n,o,r,a,s=O(this._37O(i)[S](16).replace(/^1f+00/,""));if(0==s.length)return!1;for(var h,l,c,u=Hs,d=[0,.5,.75,.875,.9375],f=[],g=[],_=[],v=Ot/u,p=s[1],b=(n=t,o=p,r=void 0,a=void 0,r=P._4O.Util._56O(n,"ss"),a={},a.v=r==o,a.t=1,a.s=0,hn=a.v,a.t=0,[r,a])[0],m=0,y=0;m<d.length;m++){var w=0==m%2?0:.5;for(h=0;h<=u;h++)l=(h+w)*v,c=1-d[m],f.push(.5*mt(l)*c,2*d[m]*.5-.5,.5*-wt(l)*c),g.push((h+w)/u,c)}for(m=0;m<d.length-1;m++){var x=m*(u+1),C=(m+1)*(u+1);for(h=0;h<u;h++)_.push(x+h,C+h+1,C+h,x+h,x+h+1,C+h+1)}return _.forEach(function(t){y+=t}),p==b&&10<y}var i,S="toString";et=u["D"+11182[S](xt(2,5))];var a=y.prototype;Xe+=ne.substr(0,1);var s=u.navigator?u.navigator.appName:"";i="Microsoft Internet Explorer"==s?(a.am=function(t,e,i,n,o,r){for(var a=32767&e,s=e>>15;0<=--r;){var h=32767&this[t],l=this[t++]>>15,c=s*h+l*a;o=((h=a*h+((32767&c)<<15)+i[n]+(1073741823&o))>>>30)+(c>>>15)+s*l+(o>>>30),i[n++]=1073741823&h}return o},30):"Netscape"!=s?(a.am=function(t,e,i,n,o,r){for(;0<=--r;){var a=e*this[t++]+i[n]+o;o=ft(a/67108864),i[n++]=67108863&a}return o},26):(a.am=function(t,e,i,n,o,r){for(var a=16383&e,s=e>>14;0<=--r;){var h=16383&this[t],l=this[t++]>>14,c=s*h+l*a;o=((h=a*h+((16383&c)<<14)+i[n]+o)>>28)+(c>>14)+s*l,i[n++]=268435455&h}return o},28),a.DB=i,a.DM=(1<<i)-1,a.DV=1<<i;a.FV=xt(2,52),a.F1=52-i,a.F2=2*i-52;var h,c,d="0123456789abcdefghijklmnopqrstuvwxyz",f=[],g=function(t){return String.fromCharCode(t)};for(h="0".charCodeAt(0),c=0;c<=9;++c)f[h++]=c;for(h="a".charCodeAt(0),c=10;c<36;++c)f[h++]=c;for(h="A".charCodeAt(0),c=10;c<36;++c)f[h++]=c;var _=n.prototype;_._73O=function(t){return t.s<0||0<=t._52O(this.m)?t.mod(this.m):t},_.revert=function(t){return t},_._74O=function(t){t._49O(this.m,ot,t)},_._75O=function(t,e,i){t._47O(e,i),this._74O(i)},_._76O=function(t,e){t._48O(e),this._74O(e)};var v=o.prototype;v._73O=function(t){var e=w();return t.abs()._59O(this.m.t,e),e._49O(this.m,ot,e),t.s<0&&0<e._52O(y.ZERO)&&this.m._78O(e,e),e},v.revert=function(t){var e=w();return t._77O(e),this._74O(e),e},v._74O=function(t){for(var e=this;t.t<=e.mt2;)t[t.t++]=0;for(var i=0;i<e.m.t;++i){var n=32767&t[i],o=n*e.mpl+((n*e.mph+(t[i]>>15)*e.mpl&e.um)<<15)&t.DM;for(t[n=i+e.m.t]+=e.m.am(0,o,t,i,0,e.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t._57O(),t._45O(e.m.t,t),0<=t._52O(e.m)&&t._78O(e.m,t)},v._75O=function(t,e,i){t._47O(e,i),this._74O(i)},v._76O=function(t,e){t._48O(e),this._74O(e)},a._77O=function(t){for(var e=this.t-1;0<=e;--e)t[e]=this[e];t.t=this.t,t.s=this.s},a._58O=function(t){this.t=1,this.s=t<0?-1:0,0<t?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},a._54O=function(t,e){var i,n,o,r=this;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void r.fromRadix(t,e);i=2}r.t=0,r.s=0;for(var a=t.length,s=!1,h=0;0<=--a;){var l=8==i?255&t[a]:(n=a,(o=f[t.charCodeAt(n)])==ot?-1:o);l<0?"-"==t.charAt(a)&&(s=!0):(s=!1,0==h?r[r.t++]=l:h+i>r.DB?(r[r.t-1]|=(l&(1<<r.DB-h)-1)<<h,r[r.t++]=l>>r.DB-h):r[r.t-1]|=l<<h,(h+=i)>=r.DB&&(h-=r.DB))}8==i&&0!=(128&t[0])&&(r.s=-1,0<h&&(r[r.t-1]|=(1<<r.DB-h)-1<<h)),r._57O(),s&&y.ZERO._78O(r,r)},a._57O=function(){for(var t=this,e=t.s&t.DM;0<t.t&&t[t.t-1]==e;)--t.t},a._59O=function(t,e){var i;for(i=this.t-1;0<=i;--i)e[i+t]=this[i];for(i=t-1;0<=i;--i)e[i]=0;e.t=this.t+t,e.s=this.s},a._45O=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=vt(this.t-t,0),e.s=this.s},a._44O=function(t,e){var i,n=this,o=t%n.DB,r=n.DB-o,a=(1<<r)-1,s=ft(t/n.DB),h=n.s<<o&n.DM;for(i=n.t-1;0<=i;--i)e[i+s+1]=n[i]>>r|h,h=(n[i]&a)<<o;for(i=s-1;0<=i;--i)e[i]=0;e[s]=h,e.t=n.t+s+1,e.s=n.s,e._57O()},a._46O=function(t,e){var i=this;e.s=i.s;var n=ft(t/i.DB);if(n>=i.t)e.t=0;else{var o=t%i.DB,r=i.DB-o,a=(1<<o)-1;e[0]=i[n]>>o;for(var s=n+1;s<i.t;++s)e[s-n-1]|=(i[s]&a)<<r,e[s-n]=i[s]>>o;0<o&&(e[i.t-n-1]|=(i.s&a)<<r),e.t=i.t-n,e._57O()}},a._78O=function(t,e){for(var i=this,n=0,o=0,r=pt(t.t,i.t);n<r;)o+=i[n]-t[n],e[n++]=o&i.DM,o>>=i.DB;if(t.t<i.t){for(o-=t.s;n<i.t;)o+=i[n],e[n++]=o&i.DM,o>>=i.DB;o+=i.s}else{for(o+=i.s;n<t.t;)o-=t[n],e[n++]=o&i.DM,o>>=i.DB;o-=t.s}e.s=o<0?-1:0,o<-1?e[n++]=i.DV+o:0<o&&(e[n++]=o),e.t=n,e._57O()},a._47O=function(t,e){var i=this.abs(),n=t.abs(),o=i.t;for(e.t=o+n.t;0<=--o;)e[o]=0;for(o=0;o<n.t;++o)e[o+i.t]=i.am(0,n[o],e,o,0,i.t);e.s=0,e._57O(),this.s!=t.s&&y.ZERO._78O(e,e)},a._48O=function(t){for(var e=this.abs(),i=t.t=2*e.t;0<=--i;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t._57O()},a._49O=function(t,e,i){var n=t.abs(),o=this;if(!(n.t<=0)){var r=o.abs();if(r.t<n.t)return e!=ot&&e._58O(0),void(i!=ot&&o._77O(i));i==ot&&(i=w());var a=w(),s=o.s,h=t.s,l=o.DB-x(n[n.t-1]);0<l?(n._44O(l,a),r._44O(l,i)):(n._77O(a),r._77O(i));var c=a.t,u=a[c-1];if(0!=u){var d=u*(1<<o.F1)+(1<c?a[c-2]>>o.F2:0),f=o.FV/d,g=(1<<o.F1)/d,_=1<<o.F2,v=i.t,p=v-c,b=e==ot?w():e;for(a._59O(p,b),0<=i._52O(b)&&(i[i.t++]=1,i._78O(b,i)),y.ONE._59O(c,b),b._78O(a,a);a.t<c;)a[a.t++]=0;for(;0<=--p;){var m=i[--v]==u?o.DM:ft(i[v]*f+(i[v-1]+_)*g);if((i[v]+=a.am(0,m,i,p,0,c))<m)for(a._59O(p,b),i._78O(b,i);i[v]<--m;)i._78O(b,i)}e!=ot&&(i._45O(c,e),s!=h&&y.ZERO._78O(e,e)),i.t=c,i._57O(),0<l&&i._46O(l,i),s<0&&y.ZERO._78O(i,i)}}},a._50O=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return 0<(e=(e=65535&(e=255&(e=15&e*(2-(15&t)*e))*(2-(255&t)*e))*(2-(65535&(65535&t)*e)))*(2-t*e%this.DV)%this.DV)?this.DV-e:-e},a._51O=function(){return 0==(0<this.t?1&this[0]:this.s)},a.exp=function(t,e){if(4294967295<t||t<1)return y.ONE;var i=w(),n=w(),o=e._73O(this),r=x(t)-1;for(o._77O(i);0<=--r;)if(e._76O(i,n),0<(t&1<<r))e._75O(n,o,i);else{var a=i;i=n,n=a}return e.revert(i)},a.toString=function(t){var e,i=this;if(i.s<0)return"-"+i._85O()[S](t);if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return i.toRadix(t);e=2}var n,o=(1<<e)-1,r=!1,a="",s=i.t,h=i.DB-s*i.DB%e;if(0<s--)for(h<i.DB&&0<(n=i[s]>>h)&&(r=!0,a=l(n));0<=s;)h<e?(n=(i[s]&(1<<h)-1)<<e-h,n|=i[--s]>>(h+=i.DB-e)):(n=i[s]>>(h-=e)&o,h<=0&&(h+=i.DB,--s)),0<n&&(r=!0),r&&(a+=l(n));return r?a:"0"},a._85O=function(){var t=w();return y.ZERO._78O(this,t),t},a.abs=function(){return this.s<0?this._85O():this},a._52O=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;0<=--i;)if(0!=(e=this[i]-t[i]))return e;return 0},a._55O=function(){var t=this;return t.t<=0?0:t.DB*(t.t-1)+x(t[t.t-1]^t.s&t.DM)},a.mod=function(t){var e=w();return this.abs()._49O(t,ot,e),this.s<0&&0<e._52O(y.ZERO)&&t._78O(e,e),e},a._53O=function(t,e){var i;return i=t<256||e._51O()?new n(e):new o(e),this.exp(t,i)},y.ZERO=t(0),y.ONE=t(1),a._86O=function(){var t=this;if(t.s<0){if(1==t.t)return t[0]-t.DV;if(0==t.t)return-1}else{if(1==t.t)return t[0];if(0==t.t)return 0}return(t[1]&(1<<32-t.DB)-1)<<t.DB|t[0]};wr=function(){var t,e,i,n,o,r=(n=(i=V).split(""),o=C(i),n.forEach(function(t){0<t.length&&o&&(sn+=kt(t))}),o),a=r.substr(0,4),s=r.substr(4,2),h=r.substr(6,2),l=!1,c=tt,u=[],d=Wi.charAt(7);if(et&&(et[S]().indexOf("nat")<0||et[Xe][S]().indexOf("nat")<0||!r?t=eh(In[d]):(e=(r=new et(a-0,s-1,h-0)).setHours(9),et[Xe]()>e?t=eh(In[d]):l=!0)),r&&t&&c){for(var f in t)u.push(f);var g,_=t[u[0]],v=t[u[1]],p=t[u[2]],b=t[u[4]],m=t[u[5]],y=t[u[6]],w=R._27O(c);w&&y&&((g=_+v+p+b+""+m)&&w._31O(g,y)&&(l=!0))}return l||(Br=co),d};var p=r.prototype;p._37O=function(t){return t._53O(this.e,this.n)},p._38O=function(t,e){var i=this;i.isPublic=!0,typeof t!==Li?(i.n=t,i.e=e):t!=ot&&e!=ot&&0<t.length&&0<e.length&&(i.n=I(t,16),i.e=kt(e,16))};var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m="=",T=25,V="IBcCFQ==",D=D||function(t,e){var i={},n=i._7A={},o=n._6A=function(){function i(){}return{_80O:function(t){i.prototype=this;var e=new i;return t&&e._5A(t),e.hasOwnProperty("_82O")||(e._82O=function(){e.$super._82O.apply(this,arguments)}),(e._82O.prototype=e).$super=this,e},_3A:function(){var t=this._80O();return t._82O.apply(t,arguments),t},_82O:function(){},_5A:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty(S)&&(this.toString=t.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),c=n._39O=o._80O({_82O:function(t,e){t=this._84O=t||[],this._65O=null!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},_89O:function(t){var e=this._84O,i=t._84O,n=this._65O,o=t._65O;if(this._57O(),n%4)for(var r=0;r<o;r++){var a=255&i[r>>>2]>>>24-r%4*8;e[n+r>>>2]|=a<<24-(n+r)%4*8}else if(65535<i.length)for(r=0;r<o;r+=4)e[n+r>>>2]=i[r>>>2];else e.push.apply(e,i);return this._65O+=o,this},_57O:function(){var t=this._84O,e=this._65O;t[e>>>2]&=4294967295<<32-e%4*8,t.length=gt(e/4)},_88O:function(){var t=o._88O.call(this);return t._84O=this._84O.slice(0),t},_87O:function(t){for(var e=[],i=0;i<t;i+=4)e.push(0|4294967296*Dt);return new c._82O(e,t)}}),r=i._2A={},a=r._69O={stringify:function(t){var e,i=t._84O,n=t._65O,o=[];for(e=0;e<n;e++){var r=255&i[e>>>2]>>>24-e%4*8;o.push((r>>>4).toString(16)),o.push((15&r).toString(16))}return o.join("")},_68O:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i[n>>>3]|=kt(t.substr(n,2),16)<<24-n%8*4;return new c._82O(i,e/2)}},s=r._8A={stringify:function(t){var e,i=t._84O,n=t._65O,o=[];for(e=0;e<n;e++){var r=255&i[e>>>2]>>>24-e%4*8;o.push(g(r))}return o.join("")},_68O:function(t){var e,i=t.length,n=[];for(e=0;e<i;e++)n[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new c._82O(n,i)}},h=r._9A={stringify:function(t){try{return decodeURIComponent(escape(s.stringify(t)))}catch(t){throw new Error("")}},_68O:function(t){return s._68O(unescape(encodeURIComponent(t)))}},l=n._32O=o._80O({_1A:function(){this._83O=new c._82O,this._23O=0},_33O:function(t){typeof t==Li&&(t=h._68O(t)),this._83O._89O(t),this._23O+=t._65O},_25O:function(t){var e=this._83O,i=e._84O,n=e._65O,o=this._79O,r=n/(4*o),a=(r=t?gt(r):vt((0|r)-this._22O,0))*o,s=pt(4*a,n);if(a){for(var h=0;h<a;h+=o)this._20O(i,h);var l=i.splice(0,a);e._65O-=s}return new c._82O(l,s)},_88O:function(){var t=o._88O.call(this);return t._83O=this._83O._88O(),t},_22O:0});n._66O=l._80O({cfg:o._80O(),_82O:function(t){this.cfg=this.cfg._80O(t),this._1A()},_1A:function(){l._1A.call(this),this._34O()},_81O:function(t){return this._33O(t),this._25O(),this},_72O:function(t){return t&&this._33O(t),this._21O()},_79O:16,_26O:function(i){return function(t,e){return new i._82O(e)._72O(t)}},_19O:function(i){return function(t,e){return new u._71O._82O(i,e)._72O(t)}}});var u=i._67O={};return i}();!function(){var t=D,e=t._7A,i=e._39O,n=e._66O,o=t._67O,r=[],m=[];!function(){function t(t){for(var e=_t(t),i=2;i<=e;i++)if(!(t%i))return!1;return!0}function e(t){return 0|4294967296*(t-(0|t))}for(var i=2,n=0;n<64;)t(i)&&(n<8&&(r[n]=e(xt(i,.5))),m[n]=e(xt(i,1/3)),n++),i++}();var y=[],a=o._41O=n._80O({_34O:function(){this._64O=new i._82O(r.slice(0))},_20O:function(t,e){for(var i=this._64O._84O,n=i[0],o=i[1],r=i[2],a=i[3],s=i[4],h=i[5],l=i[6],c=i[7],u=0;u<64;u++){if(u<16)y[u]=0|t[e+u];else{var d=y[u-15],f=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,g=y[u-2],_=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;y[u]=f+y[u-7]+_+y[u-16]}var v=n&o^n&r^o&r,p=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=c+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&h^~s&l)+m[u]+y[u];c=l,l=h,h=s,s=0|a+b,a=r,r=o,o=n,n=0|b+(p+v)}i[0]=0|i[0]+n,i[1]=0|i[1]+o,i[2]=0|i[2]+r,i[3]=0|i[3]+a,i[4]=0|i[4]+s,i[5]=0|i[5]+h,i[6]=0|i[6]+l,i[7]=0|i[7]+c},_21O:function(){var t=this._83O,e=t._84O,i=8*this._23O,n=8*t._65O;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=ft(i/4294967296),e[15+(n+64>>>9<<4)]=i,t._65O=4*e.length,this._25O(),this._64O},_88O:function(){var t=n._88O.call(this);return t._64O=this._64O._88O(),t}});t._41O=n._26O(a),t._42O=n._19O(a)}();var E=new RegExp("");E.compile("[^0-9a-f]","gi"),r._28O=-1,r._29O=-2,p._31O=e,p._63O=e,r._43O=-2;var k=new function(){var h=this;h._5O=function(t,e){if("8"!=t.substring(e+2,e+3))return 1;var i=kt(t.substring(e+3,e+4));return 0==i?-1:0<i&&i<10?i+1:-2},h._13O=function(t,e){var i=h._5O(t,e);return i<1?"":t.substring(e+2,e+2+2*i)},h._12O=function(t,e){var i=h._13O(t,e);return""==i?-1:(kt(i.substring(0,1))<8?new y(i,16):new y(i.substring(2),16))._86O()},h._6O=function(t,e){var i=h._5O(t,e);return i<0?i:e+2*(i+1)},h._11O=function(t,e){var i=h._6O(t,e),n=h._12O(t,e);return t.substring(i,i+2*n)},h._10O=function(t,e){return h._6O(t,e)+2*h._12O(t,e)},h._7O=function(t,e){var i=[],n=h._6O(t,e);i.push(n);for(var o=h._12O(t,e),r=n,a=0;;){var s=h._10O(t,r);if(s==ot||2*o<=s-n)break;if(200<=a)break;i.push(s),r=s,a++}return i}};if(k._90O=g(34),k._91O=K+g(108),P==ot||!P)var P={};P._4O!=ot&&P._4O||(P._4O={}),P._4O.Util=new function(){this._56O=function(t){return(new P._4O._3O)._30O(t)},this._4A=function(t){return(new P._4O._3O)._36O(t)}},P._4O._3O=function(){var i=this;i._8O=function(t,e){if("ss"==t&&"cj"==e){try{i.md=D._67O._41O._3A()}catch(t){}i._24O=function(t){i.md._81O(t)},i._35O=function(t){var e=D._2A._69O._68O(t);i.md._81O(e)},i._60O=function(){return i.md._72O()[S](D._2A._69O)},i._30O=function(t){return i._24O(t),i._60O()},i._36O=function(t){return i._35O(t),i._60O()}}},i._24O=function(){},i._35O=function(){},i._60O=function(){},i._30O=function(){},i._36O=function(){},i._8O("ss","cj")},ln=function(t){var e=u[k._91O],i=1,n=!1;if(mr.forEach(function(t){i*=t}),mr.a)return mr.a;if(i<t){if(e){var o=(e=e.split(k._90O))[3],r=e[7],a=e[11],s=e[19],h=e[23],l=e[27],c=o+r+a+s+h;n=En()(c,l)}n||($l.prototype._42=an)}else n=!0;return mr.a=n},T=String.fromCharCode(T+20);var M,B="02",L=I,j=/^1f+00/,R=(M={_18O:function(t){return C(t.replace(/\s+/g,""))},_14O:function(t){var e=this._18O(t);return this._15O(e)},_15O:function(t){var e=this._17O(t);if("2a864886f70d010101"==e._61O){var i=this._16O(e.key),n=new r;return n._38O(i.n,i.e),n}},_16O:function(t){var e={};t.substr(0,2);var i=k._7O(t,0);return i.length,t.substr(i[0],2),e.n=k._11O(t,i[0]),t.substr(i[1],2),e.e=k._11O(t,i[1]),e},_17O:function(t){var e={};e._40O=ot;var i=k._7O(t,0);i.length;var n=i[0];t.substr(n,2);var o=k._7O(t,n);return o.length,t.substr(o[0],2),e._61O=k._11O(t,o[0]),"06"==t.substr(o[1],2)?e._40O=k._11O(t,o[1]):"30"==t.substr(o[1],2)&&(e._40O={},e._40O.p=k._70O(t,o[1],[0],B),e._40O.q=k._70O(t,o[1],[1],B),e._40O.g=k._70O(t,o[1],[2],B)),t.substr(i[1],2),e.key=k._11O(t,i[1]).substr(2),e}})._17O?M:ot,z=R._27O=function(t){return R._14O(t)};En=function(){return function(t,e){e=e.replace(E,"").replace(/[ \n]+/g,"");var i=L(e,xt(2,4));if(!this||!this.n||i._55O()>this.n._55O())return 0;var n=O(this._37O(i)[S](xt(2,4)).replace(j,""));if(0==n.length)return!1;var o,r=n[0];return n[1]==(o=t,P._4O.Util._56O(o,r))}.bind(z(tt))}}(a);var yh=rt.List=function(){this._as=[];var t,e,i=arguments.length;if(1===i){var n=arguments[0];if(Jn(n)&&(n=n._as),Zn(n))for(e=n.length,t=0;t<e;t++)this._as.push(n[t]);else n!=ot&&this._as.push(n)}else if(1<i)for(t=0;t<i;t++)this._as.push(arguments[t])};Ns("List",e,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(t,e){return e===N?this._as.push(t):this._as.splice(e,0,t)},addAll:function(t){Jn(t)&&(t=t._as),Zn(t)?no(this._as,t):this._as.push(t)},get:function(t){return this._as[t]},slice:function(t,e){return new yh(this._as.slice(t,e))},remove:function(t){var e=this._as.indexOf(t);return 0<=e&&e<this._as.length&&this.removeAt(e),e},removeAt:function(t){return this._as.splice(t,1)[0]},set:function(t,e){return this._as[t]=e},clear:function(){return this._as.splice(0,this._as.length)},contains:function(t){return 0<=this._as.indexOf(t)},indexOf:function(t){return this._as.indexOf(t)},each:function(t,e){for(var i=0,n=this._as.length;i<n;i++){var o=this._as[i];e?t.call(e,o):t(o)}},reverseEach:function(t,e){for(var i=this._as.length-1;0<=i;i--){var n=this._as[i];e?t.call(e,n):t(n)}},toArray:function(t,e){if(t){for(var i,n=[],o=0,r=this._as.length;o<r;o++)i=this._as[o],e?t.call(e,i)&&n.push(i):t(i)&&n.push(i);return n}return this._as.concat()},toList:function(t,e){if(t){for(var i,n=new yh,o=0,r=this._as.length;o<r;o++)i=this._as[o],e?t.call(e,i)&&n.add(i):t(i)&&n.add(i);return n}return new yh(this)},reverse:function(){this._as.reverse()},sort:function(t){return this._as.sort(t||ds),this},toString:function(){return this._as.toString()}});var wh=new yh;ro(wh,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:On,each:On,reverseEach:On,toArray:function(){return[]},toList:function(){return new yh},add:Sn,addAll:Sn,set:Sn,remove:Sn,removeAt:Sn,clear:Sn});var xh=rt.Notifier=function(){};Ns("Notifier",e,{contains:function(t,e){if(this._ls)for(var i,n=0,o=this._ls.size();n<o;n++)if(t===(i=this._ls.get(n)).l&&e===i.s)return!0;return!1},add:function(t,e,i){var n=this,o={l:t,s:e,a:i};n._ls||(n._ls=new yh),n._f?(n._as||(n._as=new yh),n._as.add(o)):o.a?n._ls.add(o,0):n._ls.add(o)},remove:function(t,e){var i=this;i._ls&&(i._f?(i._rs||(i._rs=new yh),i._rs.add({l:t,s:e})):i._remove(t,e))},_remove:function(t,e){for(var i,n=this._ls,o=0,r=n.size();o<r;o++)if((i=n.get(o)).l===t&&i.s===e)return void n.removeAt(o)},fire:function(t){var e=this,i=e._ls;if(e._b=1,i){e._f=1;for(var n,o=0,r=i.size();o<r;o++)(n=i.get(o)).s?n.l.call(n.s,t):n.l(t);if(delete e._f,e._rs){for(r=e._rs.size(),o=0;o<r;o++)n=e._rs.get(o),e._remove(n.l,n.s);delete e._rs}if(e._as){for(r=e._as.size(),o=0;o<r;o++)(n=e._as.get(o)).a?i.add(n,0):i.add(n);delete e._as}}}});var Ch=rt.Data=function(){this._id=ls()};Ns("Data",e,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:ot,_parent:ot,_children:wh,_childMap:ot,_styleMap:ot,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return ot},_22Q:function(){return ot},s:function(t,e){if(2===arguments.length)this.setStyle(t,e);else{if(!Yn(t))return this.getStyle(t);for(var i in t)this.setStyle(i,t[i])}return this},fp:function(t,e,i){return this.firePropertyChange(t,e,i)},firePropertyChange:function(t,e,i){if(e===i)return!1;var n={property:t,oldValue:e,newValue:i,data:this};return this._dataModel&&this._dataModel.handleDataPropertyChange(n),this.onPropertyChanged(n),!0},onPropertyChanged:function(t){var e=this._parent,i=t.property;if(to(e)){var n=this.s(ye),o="s:ingroup"===i;(n&&Eh[i]||i===o)&&e._81I(),(n||o)&&e.fp("childChange",!0,!1)}},_21I:function(t){if(t&&this._dataModel)throw"HT-DM";this._dataModel=t},getId:function(){return this._id},setId:function(t){this._id=t},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(t,e){return this._children.toList(t,e)},eachChild:function(t,e){this._children.each(t,e)},addChild:function(t,e){var i=this;t!==i&&(i._children===wh&&(i._children=new yh,i._childMap={}),e===N&&(e=i._children.size()),i._childMap[t._id]||i.isDescendantOf(t)||(t._parent&&t._parent.removeChild(t),(e<0||e>i._children.size())&&(e=i._children.size()),i._children.add(t,e),(i._childMap[t._id]=t).setParent(i),i.onChildAdded(t,e),i.fp(mi,ot,t)))},onChildAdded:function(){},removeChild:function(t){var e=this;if(e._childMap&&e._childMap[t._id]){var i=e._children.remove(t);delete e._childMap[t._id],e.fp(mi,t,ot),t.setParent(ot),e.onChildRemoved(t,i)}},onChildRemoved:function(){},getChildAt:function(t){return this._children.get(t)},clearChildren:function(){if(!this._children.isEmpty())for(var t=0,e=this._children.toArray(),i=e.length;t<i;t++)this.removeChild(e[t])},getParent:function(){return this._parent},setParent:function(t){var e=this;if(!(e._73I||e._parent===t||e===t||t&&t.isDescendantOf(e))){var i=e._parent;e._parent=t,e._73I=1,i&&i.removeChild(e),t&&t.addChild(e),delete e._73I,e.fp("parent",i,t),e.onParentChanged(i,t)}},onParentChanged:function(){},hasChildren:function(){return 0<this._children.size()},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(t){return!!t&&(this.isDescendantOf(t)||t.isDescendantOf(this))},isParentOf:function(t){return!(!t||!this._childMap)&&!!this._childMap[t._id]},isDescendantOf:function(t){if(!t||t.isEmpty())return!1;for(var e=this._parent;e;){if(t===e)return!0;e=e._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(t,e){e===N&&(e=1);var i=this._styleMap?this._styleMap[t]:N;return i===N&&e?ht[t]:i},setStyle:function(t,e){var i=this;i._styleMap||(i._styleMap={});var n=i._styleMap[t];e===N?delete i._styleMap[t]:i._styleMap[t]=e,i.fp("s:"+t,n,e)&&i.onStyleChanged(t,n,e)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){return this._displayName||this._name||this._tag||this._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(t,e){var i=this.s(Pe);i||this.s(Pe,i={}),e?i[t]=e:delete i[t],this.fp(Pe,ot,i)},removeStyleIcon:function(t){var e=this.s(Pe);if(e){var i=e[t];delete e[t],this.fp(Pe,ot,e)}return i},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var t,e={};for(t in this._styleMap)e[t]=1;return e}});var Ih=rt.DataModel=function(){var n=this;n._datas=new yh,n._dataMap={},n._roots=new yh,n._rootMap={},n._78O={},n._36I=new xh,n._35I=new xh,n._3o=new Oh(n);var o=n._29Q=[],r=n._scheduleCallback=function(){for(var t=Date.now(),e=0;e<o.length;e++){var i=o[e];i.enabled&&t-i.lastTime>i.interval&&(n.each(function(t){i.action(t)}),i.lastTime=t)}o.length&&(n._30Q=a.requestAnimationFrame(r))}};Ns("DataModel",e,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function(t,e,i){this.addDataModelChangeListener(t,e,i)},umm:function(t,e){this.removeDataModelChangeListener(t,e)},md:function(t,e,i){this.addDataPropertyChangeListener(t,e,i)},umd:function(t,e){this.removeDataPropertyChangeListener(t,e)},mh:function(t,e,i){this.addHierarchyChangeListener(t,e,i)},umh:function(t,e){this.removeHierarchyChangeListener(t,e)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(t){return this._attrObject=t},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(t){return this._dataMap[t]},removeDataById:function(t){this.remove(this.getDataById(t))},toDatas:function(t,e){return this._datas.toList(t,e)},each:function(t,e){this._datas.each(t,e)},getDataByTag:function(t){return this._78O[t]},removeDataByTag:function(t){this.remove(this.getDataByTag(t))},add:function(t,e){var i=this,n=t._id,o=t._tag,r=i._roots;if(i._dataMap[n])throw"'"+n+"' already exists";o!=ot&&(i._78O[o]=t),i._dataMap[n]=t,i._datas.add(t),t._parent||(i._rootMap[n]=t,0<=e?r.add(t,e):r.add(t)),t._21I(i),i.onAdded(t),i._36I.fire({kind:"add",data:t})},onAdded:function(){},remove:function(t){if(t){var e=this,i=t._id,n=t.getTag(),o=e.getHistoryManager();t._dataModel===e&&(o&&o.beginInteraction(),e.prepareRemove(t),t.toChildren().each(e.remove,e),t._parent&&t._parent.removeChild(t),e._datas.remove(t),delete e._dataMap[i],n!=ot&&delete e._78O[n],e._rootMap[i]&&(delete e._rootMap[i],e._roots.remove(t)),t._21I(ot),e.onRemoved(t),e._36I.fire({kind:ve,data:t}),o&&o.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var t=this;0<t._datas.size()&&(t._datas.each(function(t){t._21I(ot)}),t._datas.clear(),t._dataMap={},t._roots.clear(),t._rootMap={},t._78O={},t._36I.fire({kind:pe}))},contains:function(t){return t&&t._dataModel===this},handleDataPropertyChange:function(t){var e=t.data,i=t.property;if("parent"===i){var n=e._id,o=this._rootMap,r=this._roots;e._parent?o[n]&&(delete o[n],r.remove(e)):o[n]||(o[n]=e,r.add(e))}else if("tag"===i){var a=t.oldValue,s=t.newValue,h=this._78O;a!=ot&&delete h[a],s!=ot&&(h[s]=e)}this.onDataPropertyChanged(e,t),this._35I.fire(t)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(t,e,i){this._36I.add(t,e,i)},removeDataModelChangeListener:function(t,e){this._36I.remove(t,e)},addDataPropertyChangeListener:function(t,e,i){this._35I.add(t,e,i)},removeDataPropertyChangeListener:function(t,e){this._35I.remove(t,e)},_38I:function(t,e,i){this._37I&&this._37I.fire({data:t,oldIndex:e,newIndex:i})},addHierarchyChangeListener:function(t,e,i){this._37I||(this._37I=new xh),this._37I.add(t,e,i)},removeHierarchyChangeListener:function(t,e){this._37I.remove(t,e)},getSiblings:function(t){var e=t._parent;return e?e._children:this._roots},eachByDepthFirst:function(t,e,i){if(e)this._11I(t,e,i);else for(var n=0,o=this._roots,r=o.size();n<r;n++)if(!1===this._11I(t,o.get(n),i))return},_11I:function(t,e,i){for(var n=e.size(),o=0;o<n;o++)if(!1===this._11I(t,e.getChildAt(o),i))return!1;if(i){if(!1===t.call(i,e))return!1}else if(!1===t(e))return!1;return!0},eachByBreadthFirst:function(t,e,i){var n=new yh;for(e?n.add(e):this._roots.each(n.add,n);0<n.size();)if((e=n.removeAt(0)).eachChild(n.add,n),i){if(!1===t.call(i,e))return!1}else if(!1===t(e))return!1;return!0},moveTo:function(t,e){var i=this.getSiblings(t),n=i.indexOf(t);n===e||n<0||0<=e&&e<=i.size()&&(i.remove(t),e>i.size()&&e--,i.add(t,e),this._38I(t,n,e))},moveUp:function(t){this.moveTo(t,this.getSiblings(t).indexOf(t)-1)},moveDown:function(t){this.moveTo(t,this.getSiblings(t).indexOf(t)+1)},moveToTop:function(t){this.moveTo(t,0)},moveToBottom:function(t){this.moveTo(t,this.getSiblings(t).size())},moveSelectionUp:function(t){t||(t=this.sm());var e=new yh;Zr(t,e,this._roots),e.each(this.moveUp,this)},moveSelectionDown:function(t){t||(t=this.sm());var e=new yh;Jr(t,e,this._roots),e.each(this.moveDown,this)},moveSelectionToTop:function(t){t||(t=this.sm());var e=new yh;qr(t,e,this._roots),e.each(this.moveToTop,this)},moveSelectionToBottom:function(t){t||(t=this.sm());var e=new yh;Yr(t,e,this._roots),e.each(this.moveToBottom,this)},addScheduleTask:function(t){var e=this;e.removeScheduleTask(t),t.enabled==ot&&(t.enabled=!0),t.interval==ot&&(t.interval=10),t.action==ot&&(t.action=On),t.lastTime=Date.now(),e._29Q.push(t),e._30Q==ot&&(e._30Q=a.requestAnimationFrame(e._scheduleCallback))},removeScheduleTask:function(t){var e=this._29Q,i=e.indexOf(t);0<=i&&e.splice(i,1),e.length||this._30Q==ot||(a.cancelAnimationFrame(this._30Q),delete this._30Q)}});var Oh=rt.SelectionModel=function(t){var e=this;e._68O=Xt,e._map={},e._73O=new yh,e._74I=new xh,e._21I(t)};Ns("SelectionModel",e,{ms_fire:1,ms_dm:1,ms:function(t,e,i){this.addSelectionChangeListener(t,e,i)},ums:function(t,e){this.removeSelectionChangeListener(t,e)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===Gt},co:function(t){return this._map[t._id]!=ot},ss:function(t){this.setSelection(t)},as:function(t){this.appendSelection(t)},rs:function(t){this.removeSelection(t)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(t){var e=this;if(e._68O!==t&&(t===re||t===Gt||t===Xt)){e.cs();var i=e._68O;e._68O=t,e.fp("selectionMode",i,t)}},_21I:function(t){var e=this,i=e._dataModel;i!==t&&(i&&(e.cs(),i.umm(e.handleDataModelChange,e)),(e._dataModel=t).mm(e.handleDataModelChange,e,!0),e.fp(xi,i,t))},dispose:function(){this.cs(),this._dataModel.umm(this.handleDataModelChange,this)},handleDataModelChange:function(t){var e=this;if(t.kind===ve){var i=t.data;e.co(i)&&(e._73O.remove(i),delete e._map[i._id],e._75I(ve,new yh(i)))}else t.kind===pe&&e.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(t){var e=this;if(e._filterFunc!==t){e.cs();var i=e._filterFunc;e._filterFunc=t,e.fp("filterFunc",i,e._filterFunc)}},_75I:function(t,e,i,n){i&&(this._73O.each(function(t){n[t._id]?i.remove(t):i.add(t)}),e=i.toList()),this._74I.fire({kind:t,datas:new yh(e)})},addSelectionChangeListener:function(t,e,i){this._74I.add(t,e,i)},removeSelectionChangeListener:function(t,e){this._74I.remove(t,e)},_97O:function(t,e){for(var i,n=this,o=0,r=new yh(t);o<r.size();o++)i=r.get(o),(n._filterFunc&&!n._filterFunc(i)||e&&n.co(i)||!e&&!n.co(i)||!n._dataModel.contains(i))&&(r.removeAt(o),o--);return r},appendSelection:function(t){var e=this;if(e._68O!==re){var i,n,o=e._73O,r=e._97O(t,!0);r.isEmpty()||(e.sg()&&(i=new yh(o),n=e._map,o.clear(),e._map={},r=new yh(r.get(r.size()-1))),r.each(function(t){o.add(t),e._map[t._id]=t}),e._75I("append",r,i,n))}},removeSelection:function(t){var e=this._97O(t),i=0,n=e.size();if(0!==n){for(;i<n;i++){var o=e.get(i);this._73O.remove(o),delete this._map[o._id]}this._75I(ve,e)}},toSelection:function(t,e){return this._73O.toList(t,e)},getSelection:function(){return this._73O},each:function(t,e){this._73O.each(t,e)},setSelection:function(t){var e=this,i=e._73O;if(e._68O!==re&&!(i.isEmpty()&&!t||1===i.size()&&e.ld()===t)){var n=new yh(i),o=e._map;i.clear(),e._map={};var r=e._97O(t,!0);e.sg()&&1<r.size()&&(r=new yh(r.get(r.size()-1))),r.each(function(t){i.add(t),e._map[t._id]=t}),e._75I("set",ot,n,o)}},clearSelection:function(){var t=this._73O;if(0<t.size()){var e=t.toList();t.clear(),this._map={},this._75I(pe,e)}},selectAll:function(){var t=this;if(t._68O!==re){var e,i,n=t._dataModel.toDatas();if(t._filterFunc)for(e=0;e<n.size();e++)i=n.get(e),t._filterFunc(i)||(n.removeAt(e),e--);var o=t._73O,r=new yh(o),a=t._map;o.clear(),t._map={},t.sg()&&1<n.size()&&(n=new yh(n.get(n.size()-1)));var s=n.size();for(e=0;e<s;e++)i=n.get(e),o.add(i),t._map[i._id]=i;t._75I("all",ot,r,a)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(t){return this._map[t._id]!=ot},getLastData:function(){var t=this._73O;return 0<t.size()?t.get(t.size()-1):ot},getFirstData:function(){var t=this._73O;return 0<t.size()?t.get(0):ot},isSelectable:function(t){return!(!t||this._68O===re)&&(!this._filterFunc||this._filterFunc(t))}}),ro(st,{edgeGroupAgentFunc:ot,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:lt.rectSelectBorder,graphViewRectSelectBackground:na,graphViewEditPointSize:Nt?17:7,graphViewEditPointBorderColor:lt.editPointBorder,graphViewEditPointBackground:lt.editPointBackground,setEdgeType:function(t,e,i){yn[t]=e,wn[t]=i},getEdgeType:function(t){return yn[t]}},!0),ro(ht,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":N,"image.stretch":"fill",icons:N,ingroup:!0,"body.color":N,opacity:N,pixelPerfect:!0,"select.color":va,"select.width":1,"select.padding":2,"select.type":ce,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":va,"border.color":N,"border.width":2,"border.padding":2,"border.type":ce,label:N,"label.font":N,"label.color":Aa,"label.background":N,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":N,"label.max":N,"label.opacity":N,"label.scale":1,"label.align":N,label2:N,"label2.font":N,"label2.color":Aa,"label2.background":N,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":N,"label2.max":N,"label2.opacity":N,"label2.scale":1,"label2.align":N,note:N,"note.expanded":!0,"note.font":N,"note.color":Wa,"note.background":va,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":N,"note.toggleable":!0,"note.border.width":1,"note.border.color":N,"note.opacity":N,"note.scale":1,"note.align":N,note2:N,"note2.expanded":!0,"note2.font":N,"note2.color":Wa,"note2.background":va,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":N,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":N,"note2.opacity":N,"note2.scale":1,"note2.align":N,"group.type":N,"group.image":N,"group.image.stretch":"fill","group.repeat.image":N,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":N,"group.title.color":Wa,"group.title.background":lt.groupTitleBackground,"group.title.align":Zt,"group.background":lt.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":N,"group.border.color":ga,"group.border.cap":za,"group.border.join":Fa,"group.gradient":ot,"group.gradient.color":"#FFF",shape:N,"shape.background":ga,"shape.repeat.image":N,"shape.border.width":0,"shape.border.color":ga,"shape.border.3d":!1,"shape.border.3d.color":N,"shape.border.3d.accuracy":N,"shape.border.cap":za,"shape.border.join":Fa,"shape.border.pattern":N,"shape.gradient":ot,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":Ra,"shape.dash.offset":0,"shape.dash.color":oa,"shape.dash.width":N,"shape.dash.3d":!1,"shape.dash.3d.color":N,"shape.dash.3d.accuracy":N,"shape.polygon.side":6,"shape.arc.from":It,"shape.arc.to":Ot,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":N,"edge.type":N,"edge.points":N,"edge.segments":N,"edge.color":ga,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":N,"edge.3d.accuracy":N,"edge.cap":za,"edge.join":Fa,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":N,"edge.dash":!1,"edge.dash.pattern":Ra,"edge.dash.offset":0,"edge.dash.color":oa,"edge.dash.width":N,"edge.dash.3d":!1,"edge.dash.3d.color":N,"edge.dash.3d.accuracy":N,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":N,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":N,"grid.column.percents":N,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":lt.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":lt.gridCellBorderColor,"grid.block":N,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":lt.gridBlockColor},!0),ro(Ih,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(t){this._5I=t},_76I:function(t,e,i){this._39I&&this._39I.fire({data:t,oldIndex:e,newIndex:i})},addIndexChangeListener:function(t,e,i){this._39I||(this._39I=new xh),this._39I.add(t,e,i)},removeIndexChangeListener:function(t,e){this._39I.remove(t,e)},prepareRemove:function(t){Kn(t)&&(t.setSource(ot),t.setTarget(ot)),t._70O&&t._70O.toList().each(this.remove,this),t._69O&&t._69O.toList().each(function(t){t.setHost(ot)}),t._host&&t.setHost(ot)},onAdded:function(t){this.isAutoAdjustIndex()&&this._76O(t)},onDataPropertyChanged:function(t,e){Dh[e.property]&&this.isAutoAdjustIndex()&&this._76O(t)},isAdjustable:function(t){return $n(t)||Kn(t)},isAdjustedToBottom:function(t){return!!to(t)&&(t.isExpanded()&&Fh(t))},_76O:function(t){this.isAdjustedToBottom(t)?(this.sendToBottom(t),t.eachChild(this._76O,this)):this.sendToTop(t)},sendToTop:function(e){var i=this;if(i.contains(e)&&i.isAdjustable(e)){var t=i._datas;if(e!==t.get(i.size()-1)){var n=t.indexOf(e);t.removeAt(n),t.add(e),i._76I(e,n,i.size()-1)}if(Kn(e)){var o=e._40I;o&&!i.isAdjustedToBottom(o)&&i.sendToTop(o),(o=e._41I)&&!i.isAdjustedToBottom(o)&&i.sendToTop(o)}e._69O&&e._69O.each(function(t){t.isRelatedTo(e)||$n(e)&&t.isLoopedHostOn(e)||i.sendToTop(t)}),e.ISubGraph||(!to(e)||e.isExpanded())&&e._adjustChildrenToTop&&e.eachChild(function(t){Kn(t)||i.sendToTop(t)})}},sendToBottom:function(t,e){if(t!==e&&this.contains(t)&&this.isAdjustable(t)&&(!e||this.contains(e))){var i=this._datas,n=i.remove(t),o=e?this._datas.indexOf(e):0;if(i.add(t,o),n!==o){this._76I(t,n,o);var r=t._parent;!r||r.ISubGraph||Kn(r)||this.sendToBottom(t._parent,t)}}}}),ro(Va,{ms_edit:function(t){t._46O=function(t){var e=this,i=e.gv.dm().getHistoryManager(),n=e._index,o=e._89I,r=e._node,a=e._shape,s=e._edge,h=e._77I;r&&o?(this.fi({kind:"endEditRect",event:t,data:r,direction:o}),i&&i.endInteraction()):a&&0<=n?(e.fi({kind:"endEditPoint",event:t,data:a,index:n}),i&&i.endInteraction()):s&&0<=n?(e.fi({kind:"endEditPoint",event:t,data:s,index:n}),i&&i.endInteraction()):h&&(e.fi({kind:"endEditRotation",event:t,data:h}),i&&i.endInteraction())},t._78I=function(t){var e=this;e.autoScroll(t);var i=e.gv.lp(t),n=e._index,o=e._89I,r=e._node,a=e._shape,s=e._edge,h=e._77I;if(r&&o)e._80O(i),e.fi({kind:"betweenEditRect",event:t,data:r,direction:o});else if(a&&0<=n)i.e=a.getPoints().get(n).e,a.setPoint(n,i),e.fi({kind:"betweenEditPoint",event:t,data:a,index:n});else if(s&&0<=n){var l=s.s(Fe);i.e=l.get(n).e,l.set(n,i),s.fp(Fe,ot,l),e.fi({kind:"betweenEditPoint",event:t,data:s,index:n})}else if(h){var c=h.p(),u=St+Vt(i.y-c.y,i.x-c.x);bt(u)<.04&&(u=0),h.setRotation(u),e.fi({kind:"betweenEditRotation",event:t,data:h})}},t._80O=function(t){var e=this._rect,i=e.x,n=e.y,o=e.width,r=e.height,a=this._89I;"northwest"===a?e=Vs(t,{x:i+o,y:n+r}):a===oe?e=Vs({x:i,y:t.y},{x:i+o,y:n+r}):"northeast"===a?e=Vs({x:i,y:t.y},{x:t.x,y:n+r}):a===ne?e=Vs({x:t.x,y:n},{x:i+o,y:n+r}):a===ie?e=Vs({x:i,y:n},{x:t.x,y:n+r}):"southwest"===a?e=Vs({x:t.x,y:n},{x:i+o,y:t.y}):"south"===a?e=Vs({x:i,y:n},{x:i+o,y:t.y}):"southeast"===a&&(e=Vs({x:i,y:n},t)),this._node.setRect(e)},t._80I=function(t,e,i,n,o){var r=this.gv.getEditPointSize()+2;return!!Es({x:e-r/2,y:i-r/2,width:r,height:r},t)&&(this._89I!==n&&(this.setCursor(o),this._89I=n),!0)},t._79I=function(t,e,i){var n=this,o=n.gv,r=e?o.getDataUI(e):ot,a=r?r._55O:ot;if(a){var s,h,l,c=o.getEditPointSize()+2,u=o.lp(t);if($n(e)){if(a._56O&&$n(e)&&(h=a._98o,Es({x:h.x-c/2,y:h.y-c/2,width:c,height:c},u)))return n._77I=e,i&&n.fi({kind:"beginEditRotation",event:t,data:e}),n.setCursor("crosshair"),!0;if(a._43O&&e instanceof Yl)for(s=(l=e.getPoints()).size()-1;0<=s;s--)if(h=l.get(s),Es({x:h.x-c/2,y:h.y-c/2,width:c,height:c},u))return n._index=s,n._shape=e,i&&n.fi({kind:"beginEditPoint",event:t,data:e,index:s}),n.setCursor("crosshair"),!0;if(a._42O){var d=e.getRect(),f=d.x,g=d.y,_=d.width,v=d.height;if(n._80I(u,f,g,"northwest","nwse-resize")||n._80I(u,f+_/2,g,oe,Wi)||n._80I(u,f+_,g,"northeast","nesw-resize")||n._80I(u,f,g+v/2,ne,Ai)||n._80I(u,f+_,g+v/2,ie,Ai)||n._80I(u,f,g+v,"southwest","nesw-resize")||n._80I(u,f+_/2,g+v,"south",Wi)||n._80I(u,f+_,g+v,"southeast","nwse-resize"))return n._node=e,n._rect=e.getRect(),i&&n.fi({kind:"beginEditRect",event:t,data:e,direction:n._89I}),!0}}if(a._43O&&Kn(e)&&e.s(Ae)===Oe&&(l=e.s(Fe)))for(s=l.size()-1;0<=s;s--)if(h=l.get(s),Es({x:h.x-c/2,y:h.y-c/2,width:c,height:c},u))return n._index=s,n._edge=e,i&&n.fi({kind:"beginEditPoint",event:t,data:e,index:s}),n.setCursor("crosshair"),!0}return!1}},ms_gv:function(t){t._currentSubGraph=ot,t.upSubGraph=function(){this.setCurrentSubGraph(Rh(this._currentSubGraph))},t.isVisible=function(t){if(Rh(t)!==this._currentSubGraph)return!1;if(Kn(t)){var e=t._40I,i=t._41I;if(!e||!i)return!1;if(!(t.s("edge.independent")||this.isVisible(e)&&this.isVisible(i)))return!1;if(t.isEdgeGroupHidden())return!1}else for(var n=t._parent;n&&!n.ISubGraph;){if(to(n)&&(!n.isExpanded()||!this.isVisible(n)))return!1;n=n._parent}if(this instanceof Id){if(!t.s("3d.visible"))return!1}else if(!t.s("2d.visible"))return!1;return!this._visibleFunc||this._visibleFunc(t)},t._16o=function(t){var i=this;t.datas.each(function(t){i.invalidateData(t);var e=t._parent;to(e)&&$n(t)&&t.s(ye)&&(i.invalidateData(e),e._49I&&e._49I.each(function(t){i.invalidateData(t)}))}),i.onSelectionChanged(t)},t.onSelectionChanged=function(t){var e=this.sm();if(1===e.size()&&("set"===t.kind||"append"===t.kind)){var i=e.ld();this.isAutoMakeVisible()&&this.makeVisible(i),this._76O&&this._dataModel.isAutoAdjustIndex()&&this._76O(i)}},t.makeVisible=function(t){if(t){if(this.getDataUI?this.getDataUI(t):this.getData3dUI(t)){var e=t,i=Rh(t);for(i!==this._currentSubGraph&&this.setCurrentSubGraph(i);(e=e._parent)&&e!==i;)to(e)&&e.setExpanded(!0);this._23I=t,this.iv()}}},t.getLabel=function(t){var e=t.getStyle(Ve);return e===N?t.getName():e},t.getLabelBackground=function(t){return t.getStyle("label.background")},t.getLabelColor=function(t){return t.getStyle("label.color")},t.getLabel2=function(t){return t.getStyle("label2")},t.getLabel2Background=function(t){return t.getStyle("label2.background")},t.getLabel2Color=function(t){return t.getStyle("label2.color")},t.getNote=function(t){return t.getStyle(Ee)},t.getNoteBackground=function(t){return t.getStyle("note.background")},t.getNote2=function(t){return t.getStyle(ke)},t.getNote2Background=function(t){return t.getStyle("note2.background")},t.handleClick=function(t,e,i){e?(this.fi({kind:"clickData",event:t,data:e,part:i}),this.onDataClicked(e,t)):(this.fi({kind:"clickBackground",event:t}),this.onBackgroundClicked(t))},t.handleDoubleClick=function(t,e,i){var n=this;ys(t)&&(e?(n.fi({kind:"doubleClickData",event:t,data:e,part:i}),n.onDataDoubleClicked(e,t,i),n.checkDoubleClickOnNote(t,e,i)||n.checkDoubleClickOnRotation&&n.checkDoubleClickOnRotation(t,e,i)||(Kn(e)?n.onEdgeDoubleClicked(e,t,i):e.ISubGraph?n.onSubGraphDoubleClicked(e,t,i):to(e)?n.onGroupDoubleClicked(e,t,i):e.IDoorWindow?n.onDoorWindowDoubleClicked(e,t,i):e.ICSGBox&&n.onCSGBoxDoubleClicked(e,t,i))):(n.fi({kind:"doubleClickBackground",event:t}),n.onBackgroundDoubleClicked(t)))},t.onSubGraphDoubleClicked=function(t){this.setCurrentSubGraph(t)},t.onEdgeDoubleClicked=function(t,e){t.ISubGraph&&!Is(e)?this.setCurrentSubGraph(t):t.s("edge.toggleable")&&t.toggle()},t.onGroupDoubleClicked=function(t){t.s("group.toggleable")&&t.toggle()},t.onDoorWindowDoubleClicked=function(t){t.s("dw.toggleable")&&t.toggle(!0)},t.onCSGBoxDoubleClicked=function(t,e){if(this instanceof Id){var i=this.getHitFaceInfo(e);i&&i.face&&t.s(i.face+".toggleable")&&t.toggleFace(i.face,!0)}},t.onBackgroundClicked=function(){},t.onBackgroundDoubleClicked=function(){this.upSubGraph()},t.onDataClicked=function(){},t.onDataDoubleClicked=function(){},t.onAutoLayoutEnded=function(){},t.onMoveEnded=function(){},t.onPanEnded=function(){},t.onPinchEnded=function(){},t.onRectSelectEnded=function(){},t.onZoomEnded=function(){}},ms_icons:function(t){t.getRotation=function(t){return t==ot?0:t},t._15O=function(){var t=this,e=t.s(Pe);if(e){var i=t,n=t.data||t._data,o=t._38o={icons:e,rects:{}};for(var r in e){var a=e[r],s=bh(a.shape3d,n,i);if(!(!1===bh(a.visible,n,i)||bh(a.for3d,n,i)&&!t.I3d||s&&!t.I3d)){var h=s?[s]:bh(a.names,n,i),l=h?h.length:0,c=bh(a.position,n,i)||3,u=bh(a.offsetX,n,i)||0,d=bh(a.offsetY,n,i)||0,f=bh(a.direction,n,i)||ie,g=bh(a.gap,n,i),_=g!=ot?g:1,v=bh(a.rotation,n,i),p=bh(a.keepOrien,n,i),b=bh(a.rotationFixed,n,i)?v:t.getRotation(v,p,c),m=ot,y=o.rects[r]=new Array(l);y.rotation=b;for(var w=0;w<l;w++){var x,C,I,O,S=h[w];if(s)O=I=0;else{var T=as(S);I=bh(a.width,n,i),O=bh(a.height,n,i),I==ot&&(I=vh(T,n)),O==ot&&(O=ph(T,n))}if(m?f===ie?u+=I/2:f===ne?u-=I/2:f===oe?d-=O/2:d+=O/2:m={width:I,height:O},t.I3d){var V=-I/2,D=-O/2;C={width:I,height:O,mat:t._16O(bh(a.autorotate,n,i),c,m,bh(a.face,n,i)||Yt,bh(a.t3,n,i),bh(a.r3,n,i),bh(a.rotationMode,n,i),u,d),vs:new Ys([V,-D,0,V,-D-O,0,V+I,-D-O,0,V+I,-D,0])}}else C={x:(x=t.getPosition(c,u,d,m,bh(a.positionFixed,n,i))).x-I/2,y:x.y-O/2,width:I,height:O},t._68o(C,b);y[w]=C,f===ie?u+=I/2+_:f===ne?u-=I/2+_:f===oe?d-=O/2+_:d+=O/2+_}}}}}}});var Sh={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Th={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Vh={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Dh={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Eh={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},kh={"edge.type":1,"edge.group":1},Ph={rotation:1,rotationX:1,rotationZ:1},Mh={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},Bh={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Lh={shape:1,thickness:1,position:1},jh=function(t,e){if(!t||!to(e)||e.isEmpty())return!1;for(t=t._parent;to(t);){if(t===e)return!0;t=t._parent}return!1},Rh=function(t){if(!t)return ot;if(Kn(t)){var e=t._40I,i=t._41I;if(!e||!i)return ot;var n=Rh(e);return n===Rh(i)?n:ot}for(var o=t._parent;Kn(o)&&!o.ISubGraph;)o=o._parent;return o?o.ISubGraph?o:Rh(o):ot},zh=function(t,e,i,n){var o=e.getStyle(i)*n;o&&Ls(t,o),(o=e.getStyle(i+".left")*n)&&(t.x-=o,t.width+=o),(o=e.getStyle(i+".right")*n)&&(t.width+=o),(o=e.getStyle(i+".top")*n)&&(t.y-=o,t.height+=o),(o=e.getStyle(i+".bottom")*n)&&(t.height+=o),t.width<0&&(t.width=-t.width,t.x-=t.width),t.height<0&&(t.height=-t.height,t.y-=t.height)},Fh=function(t){for(var e,i=0,n=t.size();i<n;i++)if(e=t.getChildAt(i),$n(e)&&Fh(e))return!0;return t.hasAgentEdges()},Ah=function(t){if(!t)return ot;for(var e=t._parent;to(e);){if(!to(e._parent))return e.isExpanded()?t:e;e.isExpanded()||(t=e),e=e._parent}return t},Wh=function(t,e){if(!t||!e)return ot;var i,n,o,r=Rh(t),a=Rh(e);if(r===a)return t;for(;a&&r!==a;)a=Rh(a);if(r===a)return t;(i=new yh).add(t,0);for(var s=t._parent;$n(s)&&!e.isDescendantOf(s);)i.add(s,0),s=s._parent;for(o=i.size(),n=0;n<o;n++){var h=i.get(n);if(to(h)&&!h.isExpanded())return h;if(h.ISubGraph)return h}return t},Hh=function(t,e){var i;if(to(e)&&e.isExpanded()){var n=t.getDataUI(e);n&&n._88I&&(i=n._88I.rect)}return i||e.getRect()},Uh=function(t,e,i,n,o){return e?((i=ta(i,Hh(t,e))).x+=n,i.y+=o,i):ot},Nh=function(t,e){var i=function(t,e){if(!t||!e)return ot;var i,n,o,r,a,s;if(t===e){if(!(r=t.getLoopedEdges()))return ot;r=new yh(r)}else{if(a=t.getAgentEdges(),s=e.getAgentEdges(),!a||!s)return ot;for(n=a.size(),i=0;i<n;i++)o=a.get(i),s.contains(o)&&(r||(r=new yh),r.add(o))}if(r)for(i=0;i<r.size();i++)(o=r.get(i)).getStyle(Ae)===Oe&&(o._22I(ot),r.removeAt(i),i--);return r}(t,e);if(i&&!i.isEmpty()){if(1===i.size())return void i.get(0)._22I(ot);var n=new yh,o=new yh;i.each(function(t){var e=t.s("edge.group");n.contains(e)||n.add(e)}),n.sort(),n.each(function(e){o.add(new rt.EdgeGroup(i.toList(function(t){return e===t.s("edge.group")}),o))}),o.each(function(e){e.each(function(t){t._22I(e)})})}},Qh=function(t,e){if(e){var i=e.rect,n=e.color,o=e.rotation,r=e.labelWidth,a=e.background,s=e.opacity,h=e.scale,l=h!=ot&&1!==h;if(s!=ot){var c=t.globalAlpha;t.globalAlpha*=s}if(o||l){t.save();var u=i.x+i.width/2,d=i.y+i.height/2;Ho(t,u,d),o&&Uo(t,o),l&&t.scale(h,h),Ho(t,-u,-d)}if(a&&Mr(t,i.x,i.y,i.width,i.height,a),r){var f=i.width,g=t.createLinearGradient(i.x,i.y,i.x+f,i.y);g.addColorStop(0,n),g.addColorStop(.9,n),g.addColorStop(1,Bi),n=g,i.width=r}Lo(t,e.ss,i,e.font,n,e.align),r&&(i.width=f),(o||l)&&t.restore(),s!=ot&&(t.globalAlpha=c)}},Gh=function(t,e){if(e){var i=e.rect,n=i.x,o=i.y,r=i.width,a=i.height,s=e.background,h=e.backgroundImage,l=e.borderWidth,c=e.borderColor,u=e.labelWidth,d=e.opacity,f=e.scale,g=f!=ot&&1!==f;if(d!=ot){var _=t.globalAlpha;t.globalAlpha*=d}if(g){t.save();var v=i.x+i.width/2,p=i.y+i.height/2;Ho(t,v,p),t.scale(f,f),Ho(t,-v,-p)}if(e.expanded){var b=pt(8,r/4),m=o+a-8;if(t.fillStyle=s,t.beginPath(),t.moveTo(n,o),t.lineTo(n,m),t.lineTo(n+r/2,m),t.lineTo(n+r/2,o+a),t.lineTo(n+r/2+b,m),t.lineTo(n+r,m),t.lineTo(n+r,o),t.closePath(),t.fill(),l&&(t.lineWidth=l,t.lineJoin="round",t.lineCap="round",t.strokeStyle=c||ps(s),t.beginPath(),t.moveTo(n+r,o),t.lineTo(n+r,m),t.lineTo(n+r/2+b,m),t.lineTo(n+r/2,o+a),t.stroke(),t.strokeStyle=c||vs(s),t.beginPath(),t.moveTo(n+r,o),t.lineTo(n,o),t.lineTo(n,m),t.lineTo(n+r/2,m),t.lineTo(n+r/2,o+a),t.stroke()),h)hs(t,as(h),Mi,i.x,i.y,i.width,i.height-8,e.data,e.view);else{if(i.height-=8,s=e.color,u){var y=r,w=t.createLinearGradient(n,o,n+y,o);w.addColorStop(0,s),w.addColorStop(.9,s),w.addColorStop(1,Bi),s=w,i.width=u}Lo(t,e.ss,i,e.font,s,e.align),u&&(i.width=y),i.height+=8}}else if(e.icon)mh(t,as(e.icon),n,o,r,a,e.data,e.view);else{var x=r/2;l&&(t.lineWidth=l,t.lineJoin="round",t.lineCap="round",t.strokeStyle=c||ps(s),t.beginPath(),t.arc(n+x,o+x,x,St,1.6*It,!0),t.moveTo(n+x,o+a),t.lineTo(n+r-x/5,o+x),t.stroke(),t.strokeStyle=c||vs(s),t.beginPath(),t.arc(n+x,o+x,x,1.6*It,St,!0),t.moveTo(n+x,o+a),t.lineTo(n+x/5,o+x),t.stroke()),t.fillStyle=s,t.beginPath(),t.arc(n+x,o+x,x,0,Ot,!0),t.moveTo(n+x,o+a),t.lineTo(n+r-x/5,o+x),t.lineTo(n+x/5,o+x),t.closePath(),t.fill(),t.fillStyle=e.color,t.beginPath(),t.arc(n+x,o+x,x/3,0,Ot,!0),t.fill()}g&&t.restore(),d!=ot&&(t.globalAlpha=_)}},Xh=function(t,e){return 2*t<e?t:e/2},Yh=function(t,e,i,n){if(!t||!e)return 0;var o=Vt(e.y-t.y,e.x-t.x);return i||(o=e.x<t.x?o+It:o),o+n},qh=function(t,e,i,n,o,r,a){a&&(t.x>e.x||t.x===e.x&&t.y>e.y)&&(i=Kr[i],o=-o);var s=ta(i,{x:0,y:0,width:Ts(t,e),height:0},r);return s.x+=n,s.y+=o,(s=new Qr(Vt(e.y-t.y,e.x-t.x)).tf(s)).x+=t.x,s.y+=t.y,s},Zh=function(t,i,n,e,o){if(t._19Q=!0,!n.getEdgeGroup())return e?n.s("edge.gap"):0;var r,a=0,s=0,h=0;if(n.getEdgeGroup().getSiblings().each(function(t){t.each(function(t){if(i.isVisible(t)&&t.s(Ae)==o){var e=t.s("edge.gap");h=(r?s+=h/2+e/2:r=t,e),t===n&&(a=s)}})}),e)return s-a+h;var l=a-s/2;return r&&n._40I!==r._40I&&(t._19Q=!1),l},Jh=(c=function(t){var e=[];return t.forEach(function(t){e.push({x:t.x,y:t.y}),e.push({x:t.x+t.width,y:t.y+t.height}),e.push({x:t.x+t.width,y:t.y}),e.push({x:t.x,y:t.y+t.height})}),e},function(t,e,i){if("oval"===t){var o=0,n=i.height/i.width,r=n*n,a=i.x+i.width/2,s=i.y+i.height/2;c(e).forEach(function(t){var e=t.x-a,i=t.y-s,n=e*e+i*i/r;o<n&&(o=n)});var h=n*(o=_t(o));return{x:a-o,y:s-h,width:2*o,height:2*h}}if("circle"!==t)return"roundRect"===t&&Ls(i,pt(i.width,i.height)/16),i;var l=0;return a=i.x+i.width/2,s=i.y+i.height/2,c(e).forEach(function(t){var e=t.x-a,i=t.y-s,n=e*e+i*i;l<n&&(l=n)}),l=_t(l),{x:a-l,y:s-l,width:2*l,height:2*l}}),$h=rt.graph={},Kh=function(t,e,i){Us("ht.graph."+t,e,i)};rt.layout={};var tl={comps:[{type:fe,points:[85,50,70,115,100,71,86,107,88,49,47,65,84,72,67,82,81,71,90,99,101,57,74,118,97,106,81,104,83,57,69,100,120,101,77,50,102,73,116,53,103,106,110,84,76,103,113,104,104,57,119,108,74,69,56,68,112,67,121,49,57,86,98,75],borderWidth:1,borderColor:ot}]};tl[be]=tl[me]=160,rs("node_image",Rn(30,30,[{type:ce,rect:[4,5,22,16],gradient:Ba,gradientColor:_a,background:ga},{type:ce,rect:[2,3,26,20],borderWidth:1,borderColor:ga},{type:ce,rect:[11,23,8,4],background:ga},{type:ce,rect:[6,27,18,2],background:ga}])),rs("node_icon",Rn(16,16,[{type:ce,rect:[2,2,12,10],gradient:Ba,gradientColor:_a,background:ga},{type:he,rect:[2,2,12,10],width:1,color:ga},{type:ce,rect:[6,12,4,2],background:ga},{type:ce,rect:[4,14,8,1],background:ga}])),rs("group_image",Rn(66,39,[{type:ce,rect:[44.3,18,18.1,12.8],gradient:Ba,gradientColor:_a,background:ga},{type:ce,rect:[3.3,17.8,18.1,12.8],gradient:Ba,gradientColor:_a,background:ga},{type:ce,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:ga,gradient:Ba,gradientColor:_a,background:ga},{type:ce,rect:[26.2,29.4,12.8,4.2],background:ga},{type:ce,rect:[21.3,33.5,22.5,2.3],background:ga},{type:ce,rect:[5.3,32.7,14.1,2.1],background:ga},{type:ce,rect:[9,30.4,6.7,2.4],background:ga},{type:ce,rect:[50,30.7,6.7,2.4],background:ga},{type:ce,rect:[46.3,33,14.1,2.1],background:ga}])),rs("group_icon",Rn(16,16,[{type:ce,rect:[4,12,4,2],background:ga},{type:ce,rect:[2,13,8,1],background:ga},{type:ce,rect:[12,12,2,1],background:ga},{type:ce,rect:[11,13,4,1],background:ga},{type:ce,rect:[10,7,6,5],gradient:Ba,gradientColor:_a,background:ga},{type:ce,rect:[1,2,10,10],gradient:Ba,gradientColor:_a,background:ga},{type:he,rect:[1,2,10,10],width:1,color:ga}])),rs("edge_icon",Rn(16,16,[{type:ce,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Ba,gradientColor:_a,background:ga},{type:ce,rect:[10.8,1,4,4],background:ga},{type:ce,rect:[1,11,4,4],background:ga}])),rs("subGraph_image",Rn(72,45,[{type:fe,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Ba,gradientColor:_a,background:ga},{type:ce,rect:[29.6,30.7,3.6,1.8],background:ga},{type:ce,rect:[28.4,32.3,6,1.2],background:ga},{type:ce,rect:[37.3,32,10.8,1.8],background:ga},{type:ce,rect:[39.1,29.9,7.2,2.3],background:ga},{type:ce,rect:[26.6,23.7,9.6,7.2],gradient:Ba,gradientColor:_a,background:ga},{type:ce,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:ga,gradient:Ba,gradientColor:_a,background:ga}])),rs("subGraph_icon",Rn(17,17,[{type:fe,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Ba,gradientColor:_a,background:ga}])),rs("shape_icon",Rn(16,16,[{type:fe,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:ga}])),rs("polyline_icon",Rn(16,16,[{type:fe,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:ga},zn(7.5,.4),zn(7.5,6.3),zn(13.6,6.3),zn(13.6,14),zn(.7,13.9),zn(.7,.3)])),rs("grid_icon",Rn(16,16,[{type:ce,rect:[1,1,4,4],background:ga,gradient:Ba,gradientColor:_a},{type:ce,rect:[6,1,4,4],background:ga,gradient:Ba,gradientColor:_a},{type:ce,rect:[11,1,4,4],background:ga,gradient:Ba,gradientColor:_a},{type:ce,rect:[11,6,4,4],background:ga,gradient:Ba,gradientColor:_a},{type:ce,rect:[6,6,4,4],background:ga,gradient:Ba,gradientColor:_a},{type:ce,rect:[1,6,4,4],background:ga,gradient:Ba,gradientColor:_a},{type:ce,rect:[11,11,4,4],background:ga,gradient:Ba,gradientColor:_a},{type:ce,rect:[6,11,4,4],background:ga,gradient:Ba,gradientColor:_a},{type:ce,rect:[1,11,4,4],background:ga,gradient:Ba,gradientColor:_a}])),rs("light_icon",Rn(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:ga},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:ga,gradient:Ba,gradientColor:_a,background:{func:function(t){var e=t?t.s(dc):ot;return Zn(e)?"rgb("+kt(255*e[0])+","+kt(255*e[1])+","+kt(255*e[2])+")":e||ga}}}]));var el=function(t,e){for(var i=t.vertices,n=0;n<i.length;n++){var o=i[n],r=o.y;o.y=o.z,o.z=-r,e&&(o.y+=e)}},il=function(t){for(var e,i,n,o,r,a,s=[],h=[],l=[],c=t.faces,u=0,d=0,f=0,g=c.length;u<g;u++,d+=6,f+=9){var _=c[u];1===_.i?(e||(e=[],i=[],n=[]),nl(_,u,d,f,t,e,n,i)):2===_.i?(o||(o=[],r=[],a=[]),nl(_,u,d,f,t,o,a,r)):nl(_,u,d,f,t,s,l,h)}return{vs:s,uv:h,ns:l,top_vs:e,top_uv:i,top_ns:n,bottom_vs:o,bottom_uv:r,bottom_ns:a}},nl=function(t,e,i,n,o,r,a,s){var h=o.vertices,l=o.faceVertexUvs,c=h[t.a],u=h[t.b],d=h[t.c];r[n]=c.x,r[n+1]=c.y,r[n+2]=c.z,r[n+3]=u.x,r[n+4]=u.y,r[n+5]=u.z,r[n+6]=d.x,r[n+7]=d.y,r[n+8]=d.z;var f=t.vertexNormals;if(3===f.length){var g=f[0],_=f[1],v=f[2];a[n]=g.x,a[n+1]=g.y,a[n+2]=g.z,a[n+3]=_.x,a[n+4]=_.y,a[n+5]=_.z,a[n+6]=v.x,a[n+7]=v.y,a[n+8]=v.z}else{var p=t.normal;a[n]=p.x,a[n+1]=p.y,a[n+2]=p.z,a[n+3]=p.x,a[n+4]=p.y,a[n+5]=p.z,a[n+6]=p.x,a[n+7]=p.y,a[n+8]=p.z}var b=l[0][e][0],m=l[0][e][1],y=l[0][e][2];s[i]=b.x,s[i+1]=b.y,s[i+2]=m.x,s[i+3]=m.y,s[i+4]=y.x,s[i+5]=y.y},ol=function(t,e,i,n,o,r,a,s,h){i==ot&&(i=!0),n==ot&&(n=!0),a==ot&&(a=1),s==ot&&(s=0);var l=new yl;return Dr(l,t,e,h),il(new jl(l,{top:i,bottom:n,curveSegments:o,amount:a,repeatUVLength:r},-a/2+s))},rl=function(t,e){this.x=t||0,this.y=e||0};rl.prototype={constructor:rl,add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},equals:function(t){return t.x===this.x&&t.y===this.y},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},distanceTo:function(t){return _t(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},clone:function(){return new rl(this.x,this.y)}};var al=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0};al.prototype={constructor:al,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setY:function(t){return this.y=t,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12],this.y=o[1]*e+o[5]*i+o[9]*n+o[13],this.z=o[2]*e+o[6]*i+o[10]*n+o[14],this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},length:function(){return _t(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(t){var e=this.x,i=this.y,n=this.z;return this.x=i*t.z-n*t.y,this.y=n*t.x-e*t.z,this.z=e*t.y-i*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,o=t.z,r=e.x,a=e.y,s=e.z;return this.x=n*s-o*a,this.y=o*r-i*s,this.z=i*a-n*r,this},distanceTo:function(t){return _t(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},clone:function(){return new al(this.x,this.y,this.z)}};var sl=function(){this.elements=new Float32Array(16)};sl.prototype={constructor:sl,set:function(t,e,i,n,o,r,a,s,h,l,c,u,d,f,g,_){var v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=n,v[1]=o,v[5]=r,v[9]=a,v[13]=s,v[2]=h,v[6]=l,v[10]=c,v[14]=u,v[3]=d,v[7]=f,v[11]=g,v[15]=_,this},makeRotationAxis:function(t,e){var i=mt(e),n=wt(e),o=1-i,r=t.x,a=t.y,s=t.z,h=o*r,l=o*a;return this.set(h*r+i,h*a-n*s,h*s+n*a,0,h*a+n*s,l*a+i,l*s-n*r,0,h*s-n*a,l*s+n*r,o*s*s+i,0,0,0,0,1),this}};var hl=function(t){this.repeatUVLength=t};hl.prototype={generateTopUV:function(t,e,i,n,o,r,a){var s,h,l,c,u=t.vertices,d=u[n].x,f=u[n].y,g=u[o].x,_=u[o].y,v=u[r].x,p=u[r].y,b=this.repeatUVLength;if(b)h=s=0,c=l=b;else{this._bb||(this._bb=e.getBoundingBox());var m=this._bb;s=m.minX,h=m.minY,l=m.maxX-s,c=m.maxY-h}return a?[new rl((d-s)/l,(f-h)/c),new rl((g-s)/l,(_-h)/c),new rl((v-s)/l,(p-h)/c)]:[new rl((d-s)/l,1-(f-h)/c),new rl((g-s)/l,1-(_-h)/c),new rl((v-s)/l,1-(p-h)/c)]},generateBottomUV:function(t,e,i,n,o,r){return this.generateTopUV(t,e,i,n,o,r,!0)},generateSideWallUV:function(t,e,i,n,o,r,a,s,h,l,c,u){if(!this._cl){for(var d,f,g=[],_=0,v=i.length,p=0;p<v;p++){d=i[p],f=i[(p+1)%v];var b=d.x-f.x,m=d.y-f.y,y=_t(b*b+m*m);g.push(_),_+=y}for(p=0;p<v;p++)g[p]/=_;this._cl=g}var w=1-h/l,x=1-(h+1)/l,C=(g=this._cl)[c],I=g[u];return C<I&&(C+=1),[new rl(C,w),new rl(I,w),new rl(I,x),new rl(C,x)]}};var ll=function(t,e,i,n,o,r){this.a=t,this.b=e,this.c=i,this.i=r,this.normal=n instanceof al?n:new al,this.vertexNormals=n instanceof Array?n:[]};ll.prototype={constructor:ll};var cl=function(){},ul=cl.prototype;ul.getPointAt=function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},ul.getPoints=function(t){t||(t=5);var e,i=[];for(e=0;e<=t;e++)i.push(this.getPoint(e/t));return i},ul.getSpacedPoints=function(t){t||(t=5);var e,i=[];for(e=0;e<=t;e++)i.push(this.getPointAt(e/t));return i},ul.getLength=function(){var t=this.getLengths();return t[t.length-1]},ul.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],o=this.getPoint(0),r=0;for(n.push(0),i=1;i<=t;i++)r+=(e=this.getPoint(i/t)).distanceTo(o),n.push(r),o=e;return this.cacheArcLengths=n},ul.getUtoTmapping=function(t,e){var i,n=this.getLengths(),o=0,r=n.length;i=e||t*n[r-1];for(var a,s=0,h=r-1;s<=h;)if((a=n[o=ft(s+(h-s)/2)]-i)<0)s=o+1;else{if(!(0<a)){h=o;break}h=o-1}if(n[o=h]==i)return o/(r-1);var l=n[o];return(o+(i-l)/(n[o+1]-l))/(r-1)},ul.getTangent=function(t){var e=t-1e-4,i=t+1e-4;e<0&&(e=0),1<i&&(i=1);var n=this.getPoint(e);return this.getPoint(i).clone().sub(n).normalize()},ul.getTangentAt=function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},cl.create=function(t,e){return t.prototype=Oo(cl.prototype),t.prototype.getPoint=e,t};var dl=function(){this.curves=[],this.autoClose=!1},fl=dl.prototype=Oo(ul);fl.add=function(t){this.curves.push(t)},fl.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Tl(e,t))},fl.getPoint=function(t){for(var e,i=t*this.getLength(),n=this.getCurveLengths(),o=0;o<n.length;){if(n[o]>=i){var r=1-(n[o]-i)/(e=this.curves[o]).getLength();return e.getPointAt(r)}o++}return null},fl.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},fl.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var t,e=[],i=0,n=this.curves.length;for(t=0;t<n;t++)i+=this.curves[t].getLength(),e.push(i);return this.cacheLengths=e},fl.getTransformedPoints=function(t){return this.getPoints(t)},fl.getBoundingBox=function(){var t,e,i,n,o,r,a=this.getPoints();t=e=Number.NEGATIVE_INFINITY,n=o=Number.POSITIVE_INFINITY;var s,h,l,c,u=a[0]instanceof al;for(c=u?new al:new rl,h=0,l=a.length;h<l;h++)(s=a[h]).x>t&&(t=s.x),s.x<n&&(n=s.x),s.y>e&&(e=s.y),s.y<o&&(o=s.y),u&&(s.z>i&&(i=s.z),s.z<r&&(r=s.z)),c.add(s);var d={minX:n,minY:o,maxX:t,maxY:e};return u&&(d.maxZ=i,d.minZ=r),d};var gl=function(t){dl.call(this),this.actions=[],t&&this.fromPoints(t)},_l=gl.prototype=Oo(dl.prototype),vl="moveTo",pl="quadraticCurveTo",bl="bezierCurveTo",ml="ellipse";_l.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},_l.moveTo=function(){var t=Array.prototype.slice.call(arguments);this.actions.push({action:vl,args:t})},_l.lineTo=function(t,e){var i=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,o=n[n.length-2],r=n[n.length-1],a=new Tl(new rl(o,r),new rl(t,e));this.curves.push(a),this.actions.push({action:"lineTo",args:i})},_l.quadraticCurveTo=function(t,e,i,n){var o=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,a=r[r.length-2],s=r[r.length-1],h=new Dl(new rl(a,s),new rl(t,e),new rl(i,n));this.curves.push(h),this.actions.push({action:pl,args:o})},_l.bezierCurveTo=function(t,e,i,n,o,r){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,h=s[s.length-2],l=s[s.length-1],c=new El(new rl(h,l),new rl(t,e),new rl(i,n),new rl(o,r));this.curves.push(c),this.actions.push({action:bl,args:a})},_l.arc=function(t,e,i,n,o,r){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],h=a[a.length-1];this.absarc(t+s,e+h,i,n,o,r)},_l.absarc=function(t,e,i,n,o,r){this.absellipse(t,e,i,i,n,o,r)},_l.ellipse=function(t,e,i,n,o,r,a){var s=this.actions[this.actions.length-1].args,h=s[s.length-2],l=s[s.length-1];this.absellipse(t+h,e+l,i,n,o,r,a)},_l.absellipse=function(t,e,i,n,o,r,a){var s=Array.prototype.slice.call(arguments),h=new Sl(t,e,i,n,o,r,a);this.curves.push(h);var l=h.getPoint(1);s.push(l.x),s.push(l.y),this.actions.push({action:ml,args:s})},_l.getSpacedPoints=function(t){t||(t=40);for(var e=[],i=0;i<t;i++)e.push(this.getPoint(i/t));return e},_l.getPoints=function(t,e){t=t||12;var i,n,o,r,a,s,h,l,c,u,d,f,g,_,v,p,b,m,y=[];for(i=0,n=this.actions.length;i<n;i++)switch(o=this.actions[i],r=o.action,a=o.args,r){case vl:case"lineTo":y.push(new rl(a[0],a[1]));break;case pl:for(s=a[2],h=a[3],u=a[0],d=a[1],g=0<y.length?(f=(_=y[y.length-1]).x,_.y):(f=(_=this.actions[i-1].args)[_.length-2],_[_.length-1]),v=1;v<=t;v++)p=v/t,b=xl.b2(p,f,u,s),m=xl.b2(p,g,d,h),y.push(new rl(b,m));break;case bl:for(s=a[4],h=a[5],u=a[0],d=a[1],l=a[2],c=a[3],g=0<y.length?(f=(_=y[y.length-1]).x,_.y):(f=(_=this.actions[i-1].args)[_.length-2],_[_.length-1]),v=1;v<=t;v++)p=v/t,b=xl.b3(p,f,u,l,s),m=xl.b3(p,g,d,c,h),y.push(new rl(b,m));break;case"arc":var w=a[0],x=a[1],C=a[2],I=a[3],O=a[4],S=!!a[5],T=O-I,V=2*t;for(v=1;v<=V;v++)p=v/V,S||(p=1-p),b=w+C*mt(D=I+p*T),m=x+C*wt(D),y.push(new rl(b,m));break;case ml:w=a[0],x=a[1];var D,E=a[2],k=a[3];I=a[4],O=a[5],S=!!a[6],T=O-I,V=2*t;for(v=1;v<=V;v++)p=v/V,S||(p=1-p),b=w+E*mt(D=I+p*T),m=x+k*wt(D),y.push(new rl(b,m))}var P=y[y.length-1];return bt(P.x-y[0].x)<1e-10&&bt(P.y-y[0].y)<1e-10&&y.splice(y.length-1,1),e&&y.push(y[0]),y},_l.toShapes=function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i],r=new yl;r.actions=o.actions,r.curves=o.curves,e.push(r)}return e}function n(t,e){for(var i=e.length,n=!1,o=i-1,r=0;r<i;o=r++){var a=e[o],s=e[r],h=s.x-a.x,l=s.y-a.y;if(1e-10<bt(l)){if(l<0&&(a=e[r],h=-h,s=e[o],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y==a.y){if(t.x==a.x)return!0}else{var c=l*(t.x-a.x)-h*(t.y-a.y);if(0==c)return!0;if(c<0)continue;n=!n}}else{if(t.y!=a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return n}var o=function(t){var e,i,n,o,r,a=[],s=new gl;for(e=0,i=t.length;e<i;e++)r=(n=t[e]).args,(o=n.action)==vl&&0!=s.actions.length&&(a.push(s),s=new gl),s[o].apply(s,r);return 0!=s.actions.length&&a.push(s),a}(this.actions);if(0==o.length)return[];if(!0===e)return i(o);var r,a,s,h=[];if(1==o.length)return a=o[0],(s=new yl).actions=a.actions,s.curves=a.curves,h.push(s),h;var l=!yl.Utils.isClockWise(o[0].getPoints());l=t?!l:l;var c,u,d,f,g,_,v=[],p=[],b=[],m=0;for(p[m]=N,b[m]=[],u=0,d=o.length;u<d;u++)c=(a=o[u]).getPoints(),r=xl.isClockWise(c),(r=t?!r:r)?(!l&&p[m]&&m++,p[m]={s:new yl,p:c},p[m].s.actions=a.actions,p[m].s.curves=a.curves,l&&m++,b[m]=[]):b[m].push({h:a,p:c[0]});if(!p[0])return i(o);if(1<p.length){for(var y=!1,w=[],x=0,C=p.length;x<C;x++)v[x]=[];for(x=0,C=p.length;x<C;x++){p[x];for(var I=b[x],O=0;O<I.length;O++){for(var S=I[O],T=!0,V=0;V<p.length;V++)n(S.p,p[V].p)&&(x!=V&&w.push({froms:x,tos:V,hole:O}),T?(T=!1,v[V].push(S)):y=!0);T&&v[x].push(S)}}0<w.length&&(y||(b=v))}for(u=0,d=p.length;u<d;u++)for(s=p[u].s,h.push(s),g=0,_=(f=b[u]).length;g<_;g++)s.holes.push(f[g].h);return h};var yl=function(){gl.apply(this,arguments),this.holes=[]},wl=yl.prototype=Oo(_l);wl.getPointsHoles=function(t){var e,i=this.holes.length,n=[];for(e=0;e<i;e++)n[e]=this.holes[e].getTransformedPoints(t);return n},wl.extractAllPoints=function(t){return{shape:this.getTransformedPoints(t),holes:this.getPointsHoles(t)}},wl.extractPoints=function(t){return this.extractAllPoints(t)};var xl={triangulateShape:function(t,e){function O(t,e,i){return t.x!=e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function I(t,e,i,n,o){var r=e.x-t.x,a=e.y-t.y,s=n.x-i.x,h=n.y-i.y,l=t.x-i.x,c=t.y-i.y,u=a*s-r*h,d=a*l-r*c;if(1e-10<bt(u)){var f;if(0<u){if(d<0||u<d)return[];if((f=h*l-s*c)<0||u<f)return[]}else{if(0<d||d<u)return[];if(0<(f=h*l-s*c)||f<u)return[]}if(0==f)return!o||0!=d&&d!=u?[t]:[];if(f==u)return!o||0!=d&&d!=u?[e]:[];if(0==d)return[i];if(d==u)return[n];var g=f/u;return[{x:t.x+g*r,y:t.y+g*a}]}if(0!=d||h*l!=s*c)return[];var _,v,p,b,m,y,w,x,C=0==r&&0==a,I=0==s&&0==h;return C&&I?t.x!=i.x||t.y!=i.y?[]:[t]:C?O(i,n,t)?[t]:[]:I?O(t,e,i)?[i]:[]:(x=0!=r?(b=t.x<e.x?(p=(_=t).x,(v=e).x):(p=(_=e).x,(v=t).x),i.x<n.x?(w=(m=i).x,(y=n).x):(w=(m=n).x,(y=i).x)):(b=t.y<e.y?(p=(_=t).y,(v=e).y):(p=(_=e).y,(v=t).y),i.y<n.y?(w=(m=i).y,(y=n).y):(w=(m=n).y,(y=i).y)),p<=w?b<w?[]:b==w?o?[]:[m]:b<=x?[m,v]:[m,y]:x<p?[]:p==x?o?[]:[_]:b<=x?[_,v]:[_,y])}function S(t,e,i,n){var o=e.x-t.x,r=e.y-t.y,a=i.x-t.x,s=i.y-t.y,h=n.x-t.x,l=n.y-t.y,c=o*s-r*a,u=o*l-r*h;if(1e-10<bt(c)){var d=h*s-l*a;return 0<c?0<=u&&0<=d:0<=u||0<=d}return 0<u}for(var i,n,o,r,a,s,h={},l=t.concat(),c=0,u=e.length;c<u;c++)Array.prototype.push.apply(l,e[c]);for(i=0,n=l.length;i<n;i++)h[a=l[i].x+":"+l[i].y],h[a]=i;var d=function(t,a){function e(t,e){var i=v.length-1,n=t-1;n<0&&(n=i);var o=t+1;i<o&&(o=0);var r=S(v[t],v[n],v[o],l[e]);if(!r)return!1;var a=l.length-1,s=e-1;s<0&&(s=a);var h=e+1;return a<h&&(h=0),!!(r=S(l[e],l[s],l[h],v[t]))}function i(t,e){var i,n;for(i=0;i<v.length;i++)if(n=i+1,n%=v.length,0<I(t,e,v[i],v[n],!0).length)return!0;return!1}function n(t,e){var i,n,o,r;for(i=0;i<p.length;i++)for(n=a[p[i]],o=0;o<n.length;o++)if(r=o+1,r%=n.length,0<I(t,e,n[o],n[r],!0).length)return!0;return!1}for(var l,o,r,s,h,c,u,d,f,g,_,v=t.concat(),p=[],b=[],m=0,y=a.length;m<y;m++)p.push(m);for(var w=0,x=2*p.length;0<p.length&&!(--x<0);)for(r=w;r<v.length;r++){for(s=v[r],o=-1,m=0;m<p.length;m++)if(c=p[m],b[u=s.x+":"+s.y+":"+c]===N){l=a[c];for(var C=0;C<l.length;C++)if(h=l[C],e(r,C)&&!i(s,h)&&!n(s,h)){o=C,p.splice(m,1),d=v.slice(0,r+1),f=v.slice(r),g=l.slice(o),_=l.slice(0,o+1),v=d.concat(g).concat(_).concat(f),w=r;break}if(0<=o)break;b[u]=!0}if(0<=o)break}return v}(t,e),f=Cl.Triangulate(d,!1);for(i=0,n=f.length;i<n;i++)for(r=f[i],o=0;o<3;o++)(s=h[a=r[o].x+":"+r[o].y])!==N&&(r[o]=s);return f.concat()},isClockWise:function(t){return Cl.Triangulate.area(t)<0},b2p0:function(t,e){var i=1-t;return i*i*e},b2p1:function(t,e){return 2*(1-t)*t*e},b2p2:function(t,e){return t*t*e},b2:function(t,e,i,n){return this.b2p0(t,e)+this.b2p1(t,i)+this.b2p2(t,n)},b3p0:function(t,e){var i=1-t;return i*i*i*e},b3p1:function(t,e){var i=1-t;return 3*i*i*t*e},b3p2:function(t,e){return 3*(1-t)*t*t*e},b3p3:function(t,e){return t*t*t*e},b3:function(t,e,i,n,o){return this.b3p0(t,e)+this.b3p1(t,i)+this.b3p2(t,n)+this.b3p3(t,o)}},Cl={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(t){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(t){var e=t.familyName.toLowerCase();return this.faces[e]=this.faces[e]||{},this.faces[e][t.cssFontWeight]=this.faces[e][t.cssFontWeight]||{},this.faces[e][t.cssFontWeight][t.cssFontStyle]=t,this.faces[e][t.cssFontWeight][t.cssFontStyle]=t},drawText:function(t){var e,i=this.getFace(),n=this.size/i.resolution,o=0,r=String(t).split(""),a=r.length,s=[];for(e=0;e<a;e++){var h=new gl,l=this.extractGlyphPoints(r[e],i,n,o,h);o+=l.offset,s.push(l.path)}return{paths:s,offset:o/2}},extractGlyphPoints:function(t,e,i,n,o){var r,a,s,h,l,c,u,d,f,g,_,v,p,b,m,y,w,x,C=[],I=e.glyphs[t]||e.glyphs["?"];if(I){if(I.o)for(l=(h=I._cachedOutline||(I._cachedOutline=I.o.split(" "))).length,u=c=i,r=0;r<l;)switch(h[r++]){case"m":d=h[r++]*c+n,f=h[r++]*u,o.moveTo(d,f);break;case"l":d=h[r++]*c+n,f=h[r++]*u,o.lineTo(d,f);break;case"q":if(g=h[r++]*c+n,_=h[r++]*u,b=h[r++]*c+n,m=h[r++]*u,o.quadraticCurveTo(b,m,g,_),x=C[C.length-1])for(v=x.x,p=x.y,a=1,s=this.divisions;a<=s;a++){var O=a/s;xl.b2(O,v,b,g),xl.b2(O,p,m,_)}break;case"b":if(g=h[r++]*c+n,_=h[r++]*u,b=h[r++]*c+n,m=h[r++]*u,y=h[r++]*c+n,w=h[r++]*u,o.bezierCurveTo(b,m,y,w,g,_),x=C[C.length-1])for(v=x.x,p=x.y,a=1,s=this.divisions;a<=s;a++){O=a/s;xl.b3(O,v,b,y,g),xl.b3(O,p,m,w,_)}}return{offset:I.ha*i,path:o}}},generateShapes:function(t,e){var i=(e=e||{}).size!==N?e.size:100,n=e.curveSegments!==N?e.curveSegments:4,o=e.font!==N?e.font:"helvetiker",r=e.weight!==N?e.weight:"normal",a=e.style!==N?e.style:"normal";Cl.size=i,Cl.divisions=n,Cl.face=o,Cl.weight=r,Cl.style=a;for(var s=Cl.drawText(t).paths,h=[],l=0,c=s.length;l<c;l++)Array.prototype.push.apply(h,s[l].toShapes());return h}};v=function(t){for(var e=t.length,i=0,n=e-1,o=0;o<e;n=o++)i+=t[n].x*t[o].y-t[o].x*t[n].y;return.5*i},p=function(t,e,i,n,o,r){var a,s,h,l,c,u,d,f,g,_,v,p,b,m,y;if(s=t[r[e]].x,h=t[r[e]].y,l=t[r[i]].x,c=t[r[i]].y,u=t[r[n]].x,(l-s)*((d=t[r[n]].y)-h)-(c-h)*(u-s)<1e-10)return!1;for(_=u-l,v=d-c,p=s-u,b=h-d,m=l-s,y=c-h,a=0;a<o;a++)if(f=t[r[a]].x,g=t[r[a]].y,!(f===s&&g===h||f===l&&g===c||f===u&&g===d)&&(-1e-10<=_*(g-c)-v*(f-l)&&-1e-10<=p*(g-d)-b*(f-u)&&-1e-10<=m*(g-h)-y*(f-s)))return!1;return!0},(i=Cl).Triangulate=function(t,e){var i=t.length;if(i<3)return null;var n,o,r,a=[],s=[],h=[];if(0<v(t))for(o=0;o<i;o++)s[o]=o;else for(o=0;o<i;o++)s[o]=i-1-o;var l=i,c=2*l;for(o=l-1;2<l;){if(c--<=0)return e?h:a;if(l<=(n=o)&&(n=0),l<=(o=n+1)&&(o=0),l<=(r=o+1)&&(r=0),p(t,n,o,r,l,s)){var u,d,f,g,_;for(u=s[n],d=s[o],f=s[r],a.push([t[u],t[d],t[f]]),h.push([s[n],s[o],s[r]]),_=(g=o)+1;_<l;g++,_++)s[g]=s[_];c=2*--l}}return e?h:a},i.Triangulate.area=v,a._typeface_js={faces:Cl.faces,loadFace:Cl.loadFace};var Il=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},Ol=Il.prototype={constructor:Il,computeFaceNormals:function(){for(var t=new al,e=new al,i=0,n=this.faces.length;i<n;i++){var o=this.faces[i],r=this.vertices[o.a],a=this.vertices[o.b],s=this.vertices[o.c];t.subVectors(s,a),e.subVectors(r,a),t.cross(e),t.normalize(),o.normal.copy(t)}},computeVertexNormals:function(t){var e,i,n,o,r,a;for(a=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)a[e]=new al;if(t){var s,h,l,c=new al,u=new al;for(n=0,o=this.faces.length;n<o;n++)r=this.faces[n],s=this.vertices[r.a],h=this.vertices[r.b],l=this.vertices[r.c],c.subVectors(l,h),u.subVectors(s,h),c.cross(u),a[r.a].add(c),a[r.b].add(c),a[r.c].add(c)}else for(n=0,o=this.faces.length;n<o;n++)a[(r=this.faces[n]).a].add(r.normal),a[r.b].add(r.normal),a[r.c].add(r.normal);for(e=0,i=this.vertices.length;e<i;e++)a[e].normalize();for(n=0,o=this.faces.length;n<o;n++)(r=this.faces[n]).vertexNormals[0]=a[r.a].clone(),r.vertexNormals[1]=a[r.b].clone(),r.vertexNormals[2]=a[r.c].clone()},mergeVertices:function(){var t,e,i,n,o,r,a,s,h={},l=[],c=[],u=xt(10,4);for(i=0,n=this.vertices.length;i<n;i++)t=this.vertices[i],h[e=dt(t.x*u)+"_"+dt(t.y*u)+"_"+dt(t.z*u)]===N?(h[e]=i,l.push(this.vertices[i]),c[i]=l.length-1):c[i]=c[h[e]];var d=[];for(i=0,n=this.faces.length;i<n;i++){(o=this.faces[i]).a=c[o.a],o.b=c[o.b],o.c=c[o.c],r=[o.a,o.b,o.c];for(var f=0;f<3;f++)if(r[f]==r[(f+1)%3]){d.push(i);break}}for(i=d.length-1;0<=i;i--){var g=d[i];for(this.faces.splice(g,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(g,1)}var _=this.vertices.length-l.length;return this.vertices=l,_}},Sl=function(t,e,i,n,o,r,a){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=o,this.aEndAngle=r,this.aClockwise=a};Sl.prototype=Oo(ul),Sl.prototype.getPoint=function(t){var e,i=this.aEndAngle-this.aStartAngle;i<0&&(i+=Ot),Ot<i&&(i-=Ot),e=!0===this.aClockwise?this.aEndAngle+(1-t)*(Ot-i):this.aStartAngle+t*i;var n=this.aX+this.xRadius*mt(e),o=this.aY+this.yRadius*wt(e);return new rl(n,o)};var Tl=function(t,e){this.v1=t,this.v2=e},Vl=Tl.prototype=Oo(ul);Vl.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Vl.getPointAt=function(t){return this.getPoint(t)},Vl.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};var Dl=function(t,e,i){this.v0=t,this.v1=e,this.v2=i};Dl.prototype=Oo(ul),Dl.prototype.getPoint=function(t){var e,i;return e=xl.b2(t,this.v0.x,this.v1.x,this.v2.x),i=xl.b2(t,this.v0.y,this.v1.y,this.v2.y),new rl(e,i)};var El=function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n};El.prototype=Oo(ul),El.prototype.getPoint=function(t){var e,i;return e=xl.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=xl.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new rl(e,i)},cl.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new al;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e});var kl=cl.create(function(t,e,i){this.v0=t,this.v1=e,this.v2=i},function(t){var e,i,n;return e=xl.b2(t,this.v0.x,this.v1.x,this.v2.x),i=xl.b2(t,this.v0.y,this.v1.y,this.v2.y),n=xl.b2(t,this.v0.z,this.v1.z,this.v2.z),new al(e,i,n)}),Pl=cl.create(function(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n},function(t){var e,i,n;return e=xl.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=xl.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),n=xl.b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new al(e,i,n)}),Ml=function(t,e,i,n,o,r,a,s){Il.call(this),n=n!==N?n:.5,o=o!==N?o:.5,t=t||8,r=r||0,a=a||Ot;var h,l,c=(s=s!==N?s:1)/2,u=[],d=[],f=this.vertices,g=this.faces,_=this.faceVertexUvs;for(l=0;l<=1;l++){var v=[],p=[],b=l/1,m=b*(o-n)+n;for(h=0;h<=t;h++){var y=h/t,w=new al,x=-(y*a+r);w.z=m*wt(x),w.y=-b*s+c,w.x=m*mt(x),f.push(w),v.push(f.length-1),p.push(new rl(y,b))}u.push(v),d.push(p)}var C,I,O=(o-n)/s;for(h=0;h<t;h++)for(I=0!==n?(C=f[u[0][h]].clone(),f[u[0][h+1]].clone()):(C=f[u[1][h]].clone(),f[u[1][h+1]].clone()),C.setY(_t(C.x*C.x+C.z*C.z)*O).normalize(),I.setY(_t(I.x*I.x+I.z*I.z)*O).normalize(),l=0;l<1;l++){var S=u[l][h],T=u[l+1][h],V=u[l+1][h+1],D=u[l][h+1],E=C.clone(),k=C.clone(),P=I.clone(),M=I.clone(),B=d[l][h].clone(),L=d[l+1][h].clone(),j=d[l+1][h+1].clone(),R=d[l][h+1].clone();g.push(new ll(S,T,D,[E,k,M])),_[0].push([B,L,R]),g.push(new ll(T,V,D,[k.clone(),P,M.clone()])),_[0].push([L.clone(),j,R.clone()])}if(e&&0<n)for(this.vertices.push(new al(0,c,0)),h=0;h<t;h++){S=u[0][h],T=u[0][h+1],V=this.vertices.length-1,E=new al(0,1,0),k=new al(0,1,0),P=new al(0,1,0),B=d[0][h].clone(),L=d[0][h+1].clone(),j=new rl(L.x,0);g.push(new ll(S,T,V,[E,k,P],null,1));var z=mt(H=h/t*Ot),F=wt(H),A=mt(U=(h+1)/t*Ot),W=wt(U);_[0].push([new rl(.5+.5*z,.5+.5*F),new rl(.5+.5*A,.5+.5*W),new rl(.5,.5)])}if(i&&0<o)for(this.vertices.push(new al(0,-c,0)),h=0;h<t;h++){S=u[l][h+1],T=u[l][h],V=f.length-1,E=new al(0,-1,0),k=new al(0,-1,0),P=new al(0,-1,0),B=d[l][h+1].clone(),L=d[l][h].clone();g.push(new ll(S,T,V,[E,k,P],null,2));var H,U;z=mt(H=h/t*Ot),F=wt(H),A=mt(U=(h+1)/t*Ot),W=wt(U);_[0].push([new rl(.5+.5*A,.5-.5*W),new rl(.5+.5*z,.5-.5*F),new rl(.5,.5)])}};Ml.prototype=Oo(Ol);var Bl=function(t,e,i,n,o,r,a){Il.call(this),a=a||.5,t=t||16,e=e||16,i=(i!==N?i:0)-It,n=n!==N?n:Ot,o=o!==N?o:0,r=r!==N?r:It;var s,h,l=[],c=[],u=this.vertices,d=this.faces,f=this.faceVertexUvs;for(h=0;h<=e;h++){var g=[],_=[];for(s=0;s<=t;s++){var v=s/t,p=h/e,b=new al;b.x=-a*mt(i+v*n)*wt(o+p*r),b.y=a*mt(o+p*r),b.z=a*wt(i+v*n)*wt(o+p*r),u.push(b),g.push(u.length-1),_.push(new rl(v,p))}l.push(g),c.push(_)}for(h=0;h<e;h++)for(s=0;s<t;s++){var m=l[h][s+1],y=l[h][s],w=l[h+1][s],x=l[h+1][s+1],C=u[m].clone().normalize(),I=u[y].clone().normalize(),O=u[w].clone().normalize(),S=u[x].clone().normalize(),T=c[h][s+1].clone(),V=c[h][s].clone(),D=c[h+1][s].clone(),E=c[h+1][s+1].clone();bt(u[m].y)===a?(T.x=(T.x+V.x)/2,d.push(new ll(m,w,x,[C,O,S])),f[0].push([T,D,E])):bt(u[w].y)===a?(D.x=(D.x+E.x)/2,d.push(new ll(m,y,w,[C,I,O])),f[0].push([T,V,D])):(d.push(new ll(m,y,x,[C,I,S])),f[0].push([T,V,E]),d.push(new ll(y,w,x,[I.clone(),O,S.clone()])),f[0].push([V.clone(),D,E.clone()]))}};Bl.prototype=Oo(Ol);var Ll=function(t,e,i,n,o,r){Il.call(this),t=t||.33,e=e||.17,n=n||8,i=i||6,o=o||0,r=r||Ot;for(var a=new al,s=[],h=[],l=0;l<=n;l++)for(var c=l/n*Ot+It,u=0;u<=i;u++){var d=u/i*r+o;a.x=t*mt(d),a.z=-t*wt(d);var f=new al,g=t+e*mt(c);f.x=g*mt(d),f.z=-g*wt(d),f.y=e*wt(c),this.vertices.push(f),s.push(new rl(u/i,1-l/n)),h.push(f.clone().sub(a).normalize())}for(l=1;l<=n;l++)for(u=1;u<=i;u++){var _=(i+1)*l+u-1,v=(i+1)*(l-1)+u-1,p=(i+1)*(l-1)+u,b=(i+1)*l+u,m=new ll(_,v,b,[h[_].clone(),h[v].clone(),h[b].clone()]);this.faces.push(m),this.faceVertexUvs[0].push([s[_].clone(),s[v].clone(),s[b].clone()]),m=new ll(v,p,b,[h[v].clone(),h[p].clone(),h[b].clone()]),this.faces.push(m),this.faceVertexUvs[0].push([s[v].clone(),s[p].clone(),s[b].clone()])}this.computeFaceNormals()};Ll.prototype=Oo(Ol);var jl=function(t,e,i){return t?(Il.call(this),t=t instanceof Array?t:[t],this.addShapeList(t,e),el(this,i),void this.computeFaceNormals()):void(t=[])},Rl=jl.prototype=Oo(Il.prototype);Rl.addShapeList=function(t,e){for(var i=t.length,n=0;n<i;n++){var o=t[n];this.addShape(o,e)}},Rl.addShape=function(c,u){function e(t,e){for(var i,n,o=t.length;0<=--o;){(n=(i=o)-1)<0&&(n=t.length-1);var r=0,a=f;for(r=0;r<a;r++){var s=k*r,h=k*(r+1);l(e+i+s,e+n+s,e+n+h,e+i+h,t,r,a,i,n)}}}function t(t,e,i){y.vertices.push(new al(t,e,i))}function i(t,e,i,n){t+=w,e+=w,i+=w,y.faces.push(new ll(t,e,i,null,null,n?2:1));var o=n?v.generateBottomUV(y,c,u,t,e,i):v.generateTopUV(y,c,u,t,e,i);y.faceVertexUvs[0].push(o)}function l(t,e,i,n,o,r,a,s,h){t+=w,e+=w,i+=w,n+=w,y.faces.push(new ll(t,e,n)),y.faces.push(new ll(e,i,n));var l=v.generateSideWallUV(y,c,o,u,t,e,i,n,r,a,s,h);y.faceVertexUvs[0].push([l[0],l[1],l[3]]),y.faceVertexUvs[0].push([l[1],l[2],l[3]])}var n,o,r,a,s,h=u.amount,d=u.curveSegments||Ws,f=u.steps||1,g=u.extrudePath,_=!1,v=new hl(u.repeatUVLength);g&&(n=g.getSpacedPoints(f),_=!0,o=u.frames!==N?u.frames:new zl.FrenetFrames(g,f,!1),r=new al,a=new al,s=new al);var p,b,m,y=this,w=this.vertices.length,x=c.extractPoints(d),C=x.shape,I=x.holes,O=!xl.isClockWise(C);if(O){for(C=C.reverse(),b=0,m=I.length;b<m;b++)p=I[b],xl.isClockWise(p)&&(I[b]=p.reverse());O=!1}var S,T=xl.triangulateShape(C,I),V=C;for(b=0,m=I.length;b<m;b++)p=I[b],C=C.concat(p);for(var D,E,k=C.length,P=T.length,M=0;M<k;M++)D=C[M],_?(a.copy(o.normals[0]).multiplyScalar(D.x),r.copy(o.binormals[0]).multiplyScalar(D.y),s.copy(n[0]).add(a).add(r),t(s.x,s.y,s.z)):t(D.x,D.y,0);for(S=1;S<=f;S++)for(M=0;M<k;M++)D=C[M],_?(a.copy(o.normals[S]).multiplyScalar(D.x),r.copy(o.binormals[S]).multiplyScalar(D.y),s.copy(n[S]).add(a).add(r),t(s.x,s.y,s.z)):t(D.x,D.y,h/f*S);(function(){if(u.bottom)for(var t=0;t<P;t++)i((E=T[t])[2],E[1],E[0],!0);if(u.top)for(t=0;t<P;t++)i((E=T[t])[0]+k*f,E[1]+k*f,E[2]+k*f,!1)})(),function(){var t=0;for(e(V,t),t+=V.length,b=0,m=I.length;b<m;b++)e(p=I[b],t),t+=p.length}()};var zl=function(t,e,i,n,o){Il.call(this),i=i||1,n=n||8,o=o||!1;var r,a,s,h,l,c,u,d,f,g,_,v,p,b,m,y,w,x,C,I,O,S,T=[],V=this,D=(e=e||64)+1,E=new al,k=new zl.FrenetFrames(t,e,o),P=k.tangents,M=k.normals,B=k.binormals;for(this.tangents=P,this.normals=M,this.binormals=B,d=0;d<D;d++)for(T[d]=[],s=d/(D-1),u=t.getPointAt(s),P[d],r=M[d],a=B[d],f=0;f<n;f++)l=-i*mt(h=f/n*Ot),c=i*wt(h),E.copy(u),E.x+=l*r.x+c*a.x,E.y+=l*r.y+c*a.y,E.z+=l*r.z+c*a.z,T[d][f]=(I=E.x,O=E.y,S=E.z,V.vertices.push(new al(I,O,S))-1);for(d=0;d<e;d++)for(f=0;f<n;f++)g=o?(d+1)%e:d+1,_=(f+1)%n,v=T[d][f],p=T[g][f],b=T[g][_],m=T[d][_],y=new rl(d/e,f/n),w=new rl((d+1)/e,f/n),x=new rl((d+1)/e,(f+1)/n),C=new rl(d/e,(f+1)/n),this.faces.push(new ll(v,p,m)),this.faceVertexUvs[0].push([y,w,C]),this.faces.push(new ll(p,b,m)),this.faceVertexUvs[0].push([w.clone(),x,C.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};zl.prototype=Oo(Ol),zl.FrenetFrames=function(t,e,i){var n,o,r,a,s,h,l,c=new al,u=[],d=[],f=[],g=new al,_=new sl,v=e+1;for(this.tangents=u,this.normals=d,this.binormals=f,h=0;h<v;h++)l=h/(v-1),u[h]=t.getTangentAt(l),u[h].normalize();for(d[0]=new al,f[0]=new al,o=Number.MAX_VALUE,r=bt(u[0].x),a=bt(u[0].y),s=bt(u[0].z),r<=o&&(o=r,c.set(1,0,0)),a<=o&&(o=a,c.set(0,1,0)),s<=o&&c.set(0,0,1),g.crossVectors(u[0],c).normalize(),d[0].crossVectors(u[0],g),f[0].crossVectors(u[0],d[0]),h=1;h<v;h++)d[h]=d[h-1].clone(),f[h]=f[h-1].clone(),g.crossVectors(u[h-1],u[h]),1e-4<g.length()&&(g.normalize(),n=yt(fo(u[h-1].dot(u[h]),-1,1)),d[h].applyMatrix4(_.makeRotationAxis(g,n))),f[h].crossVectors(u[h],d[h]);if(i)for(n=yt(fo(d[0].dot(d[v-1]),-1,1)),n/=v-1,0<u[0].dot(g.crossVectors(d[0],d[v-1]))&&(n=-n),h=1;h<v;h++)d[h].applyMatrix4(_.makeRotationAxis(u[h],n*h)),f[h].crossVectors(u[h],d[h])};var Fl=function(t,e,i,n){Il.call(this),e=e||18,i=i||0,n=n==ot?Ot:n;for(var o=1/(t.length-1),r=1/e,a=0,s=e;a<=s;a++)for(var h=i+a*r*n,l=mt(h),c=wt(h),u=0,d=t.length;u<d;u++){var f=t[u],g=new al;g.x=l*f.x-c*f.y,g.y=c*f.x+l*f.y,g.z=f.z,this.vertices.push(g)}var _=t.length;for(a=0,s=e;a<s;a++)for(u=0,d=t.length-1;u<d;u++){var v=u+_*a,p=v,b=v+_,m=(l=v+1+_,v+1),y=a*r,w=u*o,x=y+r,C=w+o;this.faces.push(new ll(p,m,b)),this.faceVertexUvs[0].push([new rl(y,w),new rl(y,C),new rl(x,w)]),this.faces.push(new ll(b,m,l)),this.faceVertexUvs[0].push([new rl(x,w),new rl(y,C),new rl(x,C)])}this.mergeVertices(),el(this),this.computeFaceNormals(),this.computeVertexNormals()};Fl.prototype=Oo(Ol);Oo(Rl);var Al=rt.Node=function(){ho(Al,this)},Wl={X:ih,Y:nh,Z:oh},Hl={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},Ul="xzy",Nl=function(t,e,i){if(e){var n=e[0],o=e[1],r=e[2];"xzy"===i?(nh(t,o),oh(t,r),ih(t,n)):"xyz"===i?(oh(t,r),nh(t,o),ih(t,n)):"yxz"===i?(oh(t,r),ih(t,n),nh(t,o)):"yzx"===i?(ih(t,n),oh(t,r),nh(t,o)):"zxy"===i?(nh(t,o),ih(t,n),oh(t,r)):"zyx"===i?(ih(t,n),nh(t,o),oh(t,r)):(nh(t,o),oh(t,r),ih(t,n))}};Ns("Node",Ch,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:Ul,_64O:0,_rotationX:0,_53O:0,_host:ot,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return Kl},_22Q:function(){return Ud},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(t,e){th(t,ah(ot,ot,this.r3(),this.getRotationMode())),this.translate3d(t[0]*e,t[1]*e,t[2]*e)},translateFront:function(t){this.translate3dBy([0,0,1],t)},translateBack:function(t){this.translate3dBy([0,0,-1],t)},translateLeft:function(t){this.translate3dBy([-1,0,0],t)},translateRight:function(t){this.translate3dBy([1,0,0],t)},translateTop:function(t){this.translate3dBy([0,1,0],t)},translateBottom:function(t){this.translate3dBy([0,-1,0],t)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.p(t,i),this.setElevation(e)},translate3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.translate(t,i),this.setElevation(this._54O+e)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.setSize(t,i),this.setTall(e)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]),this.setRotationX(t),this.setRotation(-e),this.setRotationZ(i)},setRotationY:function(t){this.setRotation(-t)},getRotationY:function(){return-this._64O},lookAt:function(t,e){e=e||Yt;var i=this,n=qs(t,i.p3()),o=Ts(n);e===Yt?(i.r3([-Ct(n[1]/o),-Vt(n[2],n[0])+St,0]),i.setRotationMode("xzy")):e===Jt?(i.r3(0,-Vt(n[2],n[0]),Ct(n[1]/o)),i.setRotationMode("zyx")):e===Zt?(i.r3(0,-Vt(n[2],n[0])+It,-Ct(n[1]/o)),i.setRotationMode("zyx")):e===$t?(i.r3([-Ct(n[1]/o)+St,-Vt(n[2],n[0])+St,0]),i.setRotationMode("xzy")):e===Kt&&(i.r3([-Ct(n[1]/o)-St,-Vt(n[2],n[0])+St,0]),i.setRotationMode("xzy")),e===qt&&(i.r3([-Ct(n[1]/o)+It,-Vt(n[2],n[0])+St,It]),i.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(t){var e=this;if(e!==t&&e._host!==t){var i=e._host;i&&i._removeAttach(e),e._host=t,e._host&&e._host._addAttach(e),e.fp("host",i,t),e.onHostChanged(i,t)}},getAttaches:function(){return this._69O},_addAttach:function(t){this._69O||(this._69O=new yh),this._69O.add(t),this.fp("attaches",ot,t)},_removeAttach:function(t){this._69O.remove(t),this._69O.isEmpty()&&delete this._69O,this.fp("attaches",t,ot)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(t){this._44I||(this._44I=new yh),this._42I||(this._42I=new yh),this._44I.add(t),this._42I.add(t),this._20I()},_4I:function(t){this._44I||(this._44I=new yh),this._43I||(this._43I=new yh),this._44I.add(t),this._43I.add(t),this._20I()},_16I:function(t){this._44I.remove(t),this._42I.remove(t),this._44I.isEmpty()&&delete this._44I,this._42I.isEmpty()&&delete this._42I,this._20I()},_18I:function(t){this._44I.remove(t),this._43I.remove(t),this._44I.isEmpty()&&delete this._44I,this._43I.isEmpty()&&delete this._43I,this._20I()},_20I:function(){var e,i=this;(delete i._45I,i._44I&&!i._44I.isEmpty())?(i._44I.each(function(t){t.isLooped()&&(e||(e={}),e[t._id]||(i._45I||(i._45I=new yh),i._45I.add(t),e[t._id]=t))}),e?(i._70O=new yh,i._44I.each(function(t){e[t._id]?"A"===e[t._id]||(e[t._id]="A",i._70O.add(t)):i._70O.add(t)})):i._70O=i._44I):delete i._70O},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(t){this._46I||(this._46I=new yh),this._48I||(this._48I=new yh),this._46I.add(t),this._48I.add(t),this._19I()},_3I:function(t){this._47I||(this._47I=new yh),this._48I||(this._48I=new yh),this._47I.add(t),this._48I.add(t),this._19I()},_15I:function(t){this._46I.remove(t),this._48I.remove(t),this._46I.isEmpty()&&delete this._46I,this._48I.isEmpty()&&delete this._48I,this._19I()},_17I:function(t){this._47I.remove(t),this._48I.remove(t),this._47I.isEmpty()&&delete this._47I,this._48I.isEmpty()&&delete this._48I,this._19I()},_19I:function(){var e=this;delete e._49I;var t=e._48I;if(t&&!t.isEmpty()){var i={};t.each(function(t){i[t._id]?e._49I||(e._49I=new yh):i[t._id]=t}),e._49I?t.each(function(t){i[t._id]&&(e._49I.add(t),delete i[t._id])}):e._49I=t}},getImage:function(){return this._image},setImage:function(t){var e=this._image,i=this.getWidth(),n=this.getHeight();this._image=t,this.fp("image",e,t),this.fp(be,i,this.getWidth()),this.fp(me,n,this.getHeight())},getElevation:function(){return this._54O},setElevation:function(t){if(!this._50O){this._50O=1;var e=this._54O;this._54O=t,this.fp(bi,e,t),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(t){if(!this._49O){this._49O=1;var e=this._64O;this._64O=t,this.fp(We,e,t),delete this._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(t){if(!this._51O){this._51O=1;var e=this._rotationX;this._rotationX=t,this.fp("rotationX",e,t),delete this._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(t){if(!this._52O){this._52O=1;var e=this._53O;this._53O=t,this.fp("rotationZ",e,t),delete this._52O}},getPosition:function(){return this._position},setPosition:function(t,e){if(!this._50I){var i;if(this._50I=1,(i=2===arguments.length?{x:t,y:e}:t).x!==this._position.x||i.y!==this._position.y){var n=this._position;this._position=i,this.fp(pi,n,i)}delete this._50I}},translate:function(t,e){var i=this._position;this.p(i.x+t,i.y+e)},getWidth:function(){if(0<=this._width)return this._width;var t=as(this._image);return t?vh(t,this):20},setWidth:function(t){var e=this._width;this._width=t,this.fp(be,e,t)},getHeight:function(){if(0<=this._height)return this._height;var t=as(this._image);return t?ph(t,this):20},setHeight:function(t){var e=this._height;this._height=t,this.fp(me,e,t)},setSize:function(t,e){2===arguments.length?(this.setWidth(t),this.setHeight(e)):(this.setWidth(t.width),this.setHeight(t.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(t,e,i,n){1===arguments.length?(this.p(t.x+t.width/2,t.y+t.height/2),this.setWidth(t.width),this.setHeight(t.height)):(this.p(t+i/2,e+n/2),this.setWidth(i),this.setHeight(n))},getRect:function(){var t=this.getWidth(),e=this.getHeight();return Sr({x:this._position.x-t/2,y:this._position.y-e/2,width:t,height:e},this._64O)},getCorners:function(t,e){t==ot&&(t=0),e==ot&&(e=t);var i=this._position,n=this.getWidth()/2+t,o=this.getHeight()/2+e,r=new Qr(this._64O,i.x,i.y);return[r.tf(-n,-o),r.tf(n,-o),r.tf(n,o),r.tf(-n,o)]},rotateAt:function(t,e,i){var n=this._position,o=this._64O,r=new Qr(o,n.x,n.y).tf(t,e),a=_t(t*t+e*e),s=Vt(n.y-r.y,n.x-r.x)+i;this.setRotation(o+i),this.p(r.x+a*mt(s),r.y+a*wt(s))},onParentChanged:function(){Al.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(t){t._7I()})},onPropertyChanged:function(e){Al.superClass.onPropertyChanged.call(this,e),this._69O&&this._69O.each(function(t){t.handleHostPropertyChange(e)}),this._49I&&this._49I.each(function(t){t.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(t){this.updateAttach(t)},onStyleChanged:function(t){Al.superClass.onStyleChanged.apply(this,arguments),Bh[t]&&this.updateAttach()},updateAttach:function(t){this._51I||cn||(this._51I=1,this._71O(t),delete this._51I)},_71O:function(t){var e,i,n,o,r,a,s=this,h=s._host,l=t?t.property:ot,c=t?t.oldValue:ot,u=t?t.newValue:ot;if(h instanceof Xl){if(l===bi)s.setElevation(s._54O+u-c);else if(!t||Mh[l]){if(e=s.s("attach.row.index"),i=s.s("attach.column.index"),!(n=h.getCellRect(e,i)))return;o=s.s("attach.row.span"),r=s.s("attach.column.span"),(1!==o||1!==r)&&(n=Ds(n,h.getCellRect(e+o-1,i+r-1))),zh(n,s,"attach.padding",1),s.setRect(n)}}else if(h instanceof Yl&&0<=(a=s.s("attach.index"))&&(!t||Lh[l])){var d=s.s("attach.thickness");d!=ot&&s.setHeight(h.getThickness()*d);var f=s.s("attach.offset"),g=h.getPoints(),_=g.size();if(a<_){var v=g.get(a),p=_===a+1?g.get(0):g.get(a+1),b=[p.x-v.x,p.y-v.y],m=Ts(b);if(m){s.s("attach.offset.relative")&&(f*=m),s.s("attach.offset.opposite")&&(f=m-f);var y={x:v.x+b[0]/m*f,y:v.y+b[1]/m*f},w=s.s("attach.gap");w&&(s.s("attach.gap.relative")&&(w*=h.getThickness()),y=Ec(ot,y,p,w)),s.p(y),s.setRotation(Vt(b[1],b[0]))}}}else t&&(l===pi?s.translate(u.x-c.x,u.y-c.y):l===bi?s.setElevation(s._54O+u-c):Ph[l]&&s._11Q(h,l,u-c))},_11Q:function(t,e,i){var n=t.p3(),o=qs(this.p3(),n),r=Js(),a=Hl[this.getRotationMode()],s=a[0],h=a[1],l=a[2],c=Wl[s],u=Wl[h],d=Wl[l];e===We&&(e="rotationY",i=-i),e===We+s?(d(r,t[He+l]()),u(r,t[He+h]()),c(r,i),u(r,-t[He+h]()),d(r,-t[He+l]()),this[Ue+s](this[He+s]()+i)):e===We+h?(d(r,t[He+l]()),u(r,i),d(r,-t[He+l]()),this[Ue+h](this[He+h]()+i)):e===We+l&&(d(r,i),this[Ue+l](this[He+l]()+i)),th(o,r),this.p3(n[0]+o[0],n[1]+o[1],n[2]+o[2])},isHostOn:function(t){if(this._host&&t&&t._69O)for(var e={},i=this._host;i&&i!==this&&!e[i._id];){if(i===t)return console.log(2),!0;i=(e[i._id]=i)._host}return console.log(2),!1},isLoopedHostOn:function(t){return this.isHostOn(t)&&t.isHostOn(this)},getSerializableProperties:function(){var t=Al.superClass.getSerializableProperties.call(this);return ro(t,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),t}});var Ql=rt.Edge=function(t,e){ho(Ql,this),this.setSource(t),this.setTarget(e)};Ns("Edge",Ch,{_icon:"edge_icon",getUIClass:function(){return tc},_22Q:function(){return Nd},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(t){if(this._source!==t){var e=this._source;this._source=t,e&&e._16I(this),t&&t._2I(this),this._7I(),this.fp("source",e,t)}},setTarget:function(t){if(this._target!==t){var e=this._target;this._target=t,e&&e._18I(this),t&&t._4I(this),this._7I(),this.fp("target",e,t)}},isLooped:function(){return this._source===this._target&&!!this._source&&!!this._target},_7I:function(){var t,e=this,i=function(t){if(t.isLooped())return t._source;var e=Ah(t._source),i=Ah(t._target);return e===i?t._source:Wh(e,i)}(e);e._40I!==i&&((t=this._40I)&&t._15I(e),(e._40I=i)&&i._1I(e),e.fp("sourceAgent",t,i),Nh(t,e._41I),Nh(i,e._41I));var n=function(t){if(t.isLooped())return t._target;var e=Ah(t._source),i=Ah(t._target);return e===i?t._target:Wh(i,e)}(e);e._41I!==n&&((t=e._41I)&&t._17I(e),(e._41I=n)&&n._3I(e),e.fp("targetAgent",t,n),Nh(t,e._40I),Nh(n,e._40I))},_22I:function(t){this._52I=t,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){return this._52I&&this._52I.get(0)!==this&&!this.getStyle(ze)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var t=this._52I;return t&&!this.getStyle(ze)&&1<t.size()&&this===t.get(0)},toggle:function(){var t=this._52I,e=!this.s(ze);t&&1<t.size()&&(t.each(function(t){t.s(ze,e)}),t.getSiblings().each(function(e){e!==t&&e.each(function(t){t.fp("edgeGroup",ot,e)})}))},setStyle:function(t,e){var i;(t===Fe||"edge.segments"===t)&&(e=Zn(i=e)?new yh(i):i),Ql.superClass.setStyle.call(this,t,e)},onStyleChanged:function(t){Ql.superClass.onStyleChanged.apply(this,arguments),kh[t]&&Nh(this._41I,this._40I)},getSerializableProperties:function(){var t=Ql.superClass.getSerializableProperties.call(this);return ro(t,{source:1,target:1}),t}});var Gl=rt.Group=function(){ho(Gl,this)};Ns("Group",Al,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return ic},onChildAdded:function(){Gl.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){Gl.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){if(!this._54I&&!cn){var t=this.getChildrenRect();t&&(this._53I=1,this.p(ta(this.s("group.position"),t,this.getSize())),delete this._53I)}},getChildrenRect:function(){var e,i=this;return i.eachChild(function(t){e=Ds(e,i.getChildRect(t))}),e},getChildRect:function(e){var i;return $n(e)&&e.s(ye)&&(to(e)&&e.isExpanded()&&e.eachChild(function(t){i=Ds(i,e.getChildRect(t))}),!i&&e.getRect&&(i=e.getRect())),i},setPosition:function(t,e){var i;this._54I||(i=2===arguments.length?{x:t,y:e}:t,cn||this._53I||(this._54I=1,$r(this._children,i.x-this._position.x,i.y-this._position.y),delete this._54I),Gl.superClass.setPosition.call(this,i))},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(t){if(this._57O!==t){var e=this._57O;this._57O=t,this.fp("expanded",e,this._57O),this._8I()}},_8I:function(){Gl.superClass._8I.call(this),this.eachChild(function(t){$n(t)&&t._8I()})},onStyleChanged:function(t){Gl.superClass.onStyleChanged.apply(this,arguments),"group.position"===t&&this._81I()},getSerializableProperties:function(){var t=Gl.superClass.getSerializableProperties.call(this);return t.expanded=1,t}});var Xl=rt.Grid=function(){ho(Xl,this)};Ns("Grid",Al,{IRotatable:!1,_icon:"grid_icon",_image:ot,getUIClass:function(){return rc},setRotation:function(){},getCellRect:function(t,e){var i=this.s("grid.row.count"),n=this.s("grid.column.count");if(i<=0||n<=0||t<0||i<=t||e<0||n<=e)return ot;var o,r,a,s=this.getRect(),h=this.s("grid.row.percents"),l=this.s("grid.column.percents");if(zh(s,this,"grid.border",-1),h&&h._as&&(h=h._as),l&&l._as&&(l=l._as),h&&h.length===i){for(o=a=0;o<t;o++)a+=s.height*h[o];s.y+=a,s.height=s.height*h[t]}else s.height=s.height/i,s.y+=s.height*t;if(l&&l.length===n){for(o=r=0;o<e;o++)r+=s.width*l[o];s.x+=r,s.width=s.width*l[e]}else s.width=s.width/n,s.x+=s.width*e;return Ls(s,-this.s("grid.gap")),s}});var Yl=rt.Shape=function(){ho(Yl,this),this._59O=new yh};Yl.__de__=tl,Ns("Shape",Al,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return nc},_22Q:function(){return Qd},getLength:function(t){return xo(Er(this._59O,this._58O,t,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var t=this._58O;return t?new yh(t._as.slice(0)):t},setSegments:function(t){var e=this._58O;t=t?Zn(t)?new yh(t.slice(0)):new yh(t._as.slice(0)):new yh,(e&&t&&e._as.join(",")!==t._as.join(",")||e!==t)&&(this._58O=t,this.fp("segments",e,t))},getPoints:function(){return this._59O},toPoints:function(){var t=this._59O;return new yh(t._as.slice(0))},setPoints:function(t){var e=this._59O;t=t?Zn(t)?new yh(t.slice(0)):new yh(t._as.slice(0)):new yh,(e&&t&&e._as.join(",")!==t._as.join(",")||e!==t)&&(this._59O=t,this.fs(),this.fp("points",e,t))},addPoint:function(t,e){var i=this.toPoints();i.add(t,e),this.setPoints(i)},setPoint:function(t,e){var i=this.toPoints();i.set(t,e),this.setPoints(i)},removePointAt:function(t){var e=this.toPoints();e.removeAt(t),this.setPoints(e)},setWidth:function(t){var e=this;if(t<1&&(t=1),!e._55I&&!cn&&e.getWidth()){e._55I=1;var i=e._position.x,n=t/e.getWidth(),o=e.toPoints(),r=new yh;o.each(function(t){r.add({x:(t.x-i)*n+i,y:t.y,e:t.e})}),e.setPoints(r),e.fs(),delete e._55I}Yl.superClass.setWidth.call(e,t)},setHeight:function(t){var e=this;if(t<1&&(t=1),!e._55I&&!cn&&e.getHeight()){e._55I=1;var i=e._position.y,n=t/e.getHeight(),o=e.toPoints(),r=new yh;o.each(function(t){r.add({x:t.x,y:(t.y-i)*n+i,e:t.e})}),e.setPoints(r),e.fs(),delete e._55I}Yl.superClass.setHeight.call(e,t)},setPosition:function(t,e){var i,n=this;if(!n._28Q){if(n._28Q=1,!n._55I&&!cn){var o=(i=2===arguments.length?{x:t,y:e}:t).x-n._position.x,r=i.y-n._position.y;if(0===o&&0===r)return void delete n._28Q;n._55I=1;var a=n.toPoints(),s=new yh;a.each(function(t){s.add({x:t.x+o,y:t.y+r,e:t.e})}),n.setPoints(s),n.fs(),delete n._55I}Yl.superClass.setPosition.apply(n,arguments),delete n._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){if(!this._55I&&!cn){var t=Vs(this._59O);t&&(this._55I=1,this.setRect(t),delete this._55I)}this.fp(fe,!1,!0)},getSerializableProperties:function(){var t=Yl.superClass.getSerializableProperties.call(this);return t.segments=1,t.points=1,t.thickness=1,t.closePath=1,t}});var ql=rt.Polyline=function(){ho(ql,this),this.s({"shape.background":null,"shape.border.width":2})};Ns("Polyline",Yl,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return Gd},getUIClass:function(){return oc},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(t){if(!this._24Q&&!cn&&this.getTall()){this._24Q=1;var e=this._54O,i=t/this.getTall();this._59O.each(function(t){t.e=t.e==ot?e:(t.e-e)*i+e}),this.fs(),delete this._24Q}ql.superClass.setTall.call(this,t)},setElevation:function(e){if(!this._24Q&&!cn){this._24Q=1;var i=e-this._54O;this._59O.each(function(t){t.e==ot?t.e=e:t.e+=i}),this.fs(),delete this._24Q}ql.superClass.setElevation.apply(this,arguments)},fireShapeChange:function(){var t=this._59O;if(!this._24Q&&!cn){var e=t.size();if(e){var i=1,n=t.get(0),o=this._54O;n.e==ot&&(n.e=o);for(var r=n.e,a=0;i<e;i++){(n=t.get(i)).e==ot&&(n.e=o);var s=pt(r,n.e);a=vt(r+a,n.e)-(r=s)}this._24Q=1,this.setTall(a),this.setElevation(r+a/2),delete this._24Q}}ql.superClass.fireShapeChange.apply(this,arguments)}});var Zl=rt.SubGraph=function(){ho(Zl,this)};Ns("SubGraph",Al,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){Zl.superClass._8I.call(this),this.eachChild(function(t){$n(t)&&t._8I()})}}),rt.EdgeGroup=function(t,e){this._70O=t,this._siblings=e;for(var i,n,o=0,r=t.size(),a=ht[ze];o<r;o++)if((i=t.get(o).getStyle(ze,!1))!=ot){a=i;break}a==ot&&(a=!0);var s=st.edgeGroupAgentFunc;for(s&&((n=s(t))&&n!==t.get(0)&&(t.remove(n),t.add(n,0))),o=0;o<r;o++)t.get(o).s(ze,a)},Ns("EdgeGroup",e,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(t){return this._70O.get(t)},indexOf:function(t){return this._70O.indexOf(t)},each:function(t,e){this._70O.each(t,e)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(e,i){this._siblings.each(function(t){t._70O.each(e,i)})}});var Jl=rt.JSONSerializer=function(t,e){this.dm=this._dataModel=t,this._hierarchical=!!e};Ns("JSONSerializer",e,{ms_ac:["hierarchical"],serialize:function(t){return JSON.stringify(this.toJSON(),function(t,e){return Gn(e)?io(e):e},t==ot?2:t)},toJSON:function(){var e=this,t=e.dm,i=t.getRoots(),n=e.json={v:st.getVersion(),d:[],a:{}},o=t.getSerializableAttrs();for(var r in o){var a=t.a(r);a!==N&&e[ki](r,a,n.a)}return lo(n.a)&&delete n.a,e._hierarchical?i.each(e.serializeData,this):t.each(function(t){e.serializeData(t)}),n},isSerializable:function(){return!0},getProperties:function(t){return t.getSerializableProperties()},getStyles:function(t){return t.getSerializableStyles()},getAttrs:function(t){return t.getSerializableAttrs()},serializeData:function(t){var e=this;if(e.isSerializable(t)){var i,n,o,r=new(t.getClass()),a={c:t.getClassName(),i:t.getId(),p:{},s:{},a:{}};for(i in e.json.d.push(a),e.getProperties(t))t[o=Un(i)]&&((n=t[o]())!==r[o]()&&e[ki](i,n,a.p));for(i in e.getStyles(t))(n=t.s(i))!==r.s(i)&&e[ki](i,n,a.s);for(i in e.getAttrs(t))(n=t.a(i))!==r.a(i)&&e[ki](i,n,a.a);lo(a.p)&&delete a.p,lo(a.s)&&delete a.s,lo(a.a)&&delete a.a}e._hierarchical&&t.getChildren().each(e.serializeData,e)},serializeValue:function(t,e,i){Jn(e)?e={__a:e._as}:e instanceof Ch&&(e={__i:e.getId()}),i[t]=e},deserialize:function(t,e,i){cn=!0;t=this.json=Qn(t)?JSON.parse(t):t,this._82I={};for(var n=this.dm,o=new yh,r=new yh,a=0,s=t.d.length;a<s;a++){var h=t.d[a],l=new(gs(h.c)),c=h.i;i&&c!=ot&&(l._id=c),this._82I[c]=l,o.add(l),r.add(h)}for(a=0;a<s;a++)this.deserializeData(o.get(a),r.get(a));for(var u in o.each(function(t){e&&!t.getParent()&&t.setParent(e),n.add(t)}),t.a)n.a(u,this[Pi](t.a[u]));return cn=!1,o},deserializeData:function(t,e){for(var i in e.p)t[Nn(i)](this[Pi](e.p[i]));for(i in e.s)t.s(i,this[Pi](e.s[i]));for(i in e.a)t.a(i,this[Pi](e.a[i]))},deserializeValue:function(t){if(Yn(t)){var e=t.__i;if(e!=ot)return this._82I[e];if(e=t.__a,Zn(e))return new yh(e)}return t}}),ro(Ih,{serialize:function(t,e){return new Jl(this,e).serialize(t)},toJSON:function(t){return new Jl(this,t).toJSON()},deserialize:function(t,e,i){return new Jl(this).deserialize(t,e,i)}}),$h.GraphView=function(t){var e=this;e._24I={},e._34I=new yh,e._25I={},e._56I={},e._view=To(1,e),e._canvas=Do(e._view),e.dm(t||new Ih),e.setEditable(!1),e.setScrollBarVisible(st.graphViewScrollBarVisible)},Kh("GraphView",e,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",Ke,ti,Je,$e,"resettable","editInteractor",qe,"pannable","rectSelectable","autoScrollZone",si,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:st.graphViewResettable,_pannable:st.graphViewPannable,_rectSelectable:st.graphViewRectSelectable,_autoScrollZone:st.graphViewAutoScrollZone,_rectSelectBackground:st.graphViewRectSelectBackground,_rectSelectBorderColor:st.graphViewRectSelectBorderColor,_editPointSize:st.graphViewEditPointSize,_editPointBorderColor:st.graphViewEditPointBorderColor,_editPointBackground:st.graphViewEditPointBackground,_scrollBarColor:Xa,_scrollBarSize:Ya,_autoHideScrollBar:Ma,_autoMakeVisible:Pa,setEditable:function(t){var e=this,i=$h.XEditInteractor;t?e.setInteractors([new hc(e),i?new i(e):new cc(e),new lc(e),new sc(e),new uc(e,{editable:!i})]):e.setInteractors([new hc(e),new lc(e),new sc(e),new uc(e,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function(t){var e=t.getUIClass();return e?new e(this,t):ot},getDataUI:function(t){var e=this._25I[t._id];return e===N&&(e=this._33I(t),this._25I[t._id]=e),e},invalidateAll:function(t){var e=this;if(t){for(var i in e._25I){var n=e._25I[i];n&&n.dispose()}e._25I={},e._56I={},e._24I={},e._34I.clear(),e.redraw()}else e.dm().each(function(t){e.invalidateData(t)})},invalidateSelection:function(){var e=this;e.sm().each(function(t){e.invalidateData(t)})},invalidateData:function(t){this._24I[t._id]=t,this._21Q(t),this.iv()},_21Q:function(t){var e=this._24I;if(Kn(t)&&wn[t.s(Ae)]){var i=t.getSourceAgent();i&&i.getAgentEdges().each(function(t){e[t._id]=t}),(i=t.getTargetAgent())&&i.getAgentEdges().each(function(t){e[t._id]=t}),this.iv()}},redraw:function(t){this._32I||(t?this._34I.add(t):(this._32I=1,this._34I.clear()),this.iv())},each:function(t,e){var i,n,o=0,r=this._layers,a=this._dataModel._datas._as,s=a.length;if(r)for(var h=r.length;o<h;o++){n=r[o];for(var l=0;l<s;l++)if((i=a[l])._layer===n&&!1===(e?t.call(e,i):t(i)))return}else for(;o<s;o++)if(i=a[o],!1===(e?t.call(e,i):t(i)))return},reverseEach:function(t,e){var i,n,o,r=this._layers,a=this._dataModel._datas._as,s=a.length;if(r)for(i=r.length-1;0<=i;i--){o=r[i];for(var h=s-1;0<=h;h--)if((n=a[h])._layer===o&&!1===(e?t.call(e,n):t(n)))return}else for(i=s-1;0<=i;i--)if(n=a[i],!1===(e?t.call(e,n):t(n)))return},getViewRect:function(){return this._29I},getContentRect:function(){var e=this,i=e._84I;return i||(e.each(function(t){e.isVisible(t)&&(i=Ds(i,e.getDataUIBounds(t)))}),e._84I=i||Dn),e._84I},getScrollRect:function(){return Ds(this.getContentRect(),this._29I)},fitData:function(t,e,i,n,o){if(this.getWidth()&&this.getHeight()){this.makeVisible(t),this.validate();var r=this.getDataUIBounds(t);r&&(r=fs(r),Ls(r,i==ot?20:i),this.fitRect(r,e,n))}else o||cs(this.fitData,this,[t,e,i,n,!0],200)},fitContent:function(t,e,i,n){if(this.getWidth()&&this.getHeight()){this.validate();var o=fs(this.getContentRect());Ls(o,e==ot?20:e),this.fitRect(o,t,i)}else n||cs(this.fitContent,this,[t,e,i,!0],200)},fitRect:function(t,e,i){var n=this,o=n.getWidth(),r=n.getHeight(),a=t.x+t.width/2,s=t.y+t.height/2,h=pt(o/t.width,r/t.height),l=n._zoom,c=-a*l+o/2,u=-s*l+r/2;0===h||isNaN(h)||(i&&(h=pt(1,h)),e?n.setTranslate(c,u,{finishFunc:function(){n.setZoom(h,e)}}):(n.setTranslate(c,u),n.setZoom(h)))},toCanvas:function(t){this.validateImpl();var e=this.getContentRect(),i=Do(),n=this._zoom,o=e.x*n,r=e.y*n,a=e.width*n,s=e.height*n;Po(i,a,s,1);var h=Ao(i);return t&&Mr(h,0,0,a,s,t),Ho(h,-o,-r),h.scale(n,n),this._42(h),h.restore(),i},toDataURL:function(t,e){return this.toCanvas(t).toDataURL(e||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(e,i){var n,o,r=this;r._93db(e,i),r.each(function(t){r._56I[t._id]&&((n=r.getDataUI(t))&&(o=n._79o(),rt.HtmlNode&&t instanceof rt.HtmlNode?n._42(e):(!i||Ps(i,o))&&n._42(e)))}),r._92db(e,i)},validateImpl:function(){var t,i,e,n=this,o=n.tx(),r=n.ty(),a=n._zoom,s=n._canvas,h=this.getWidth(),l=this.getHeight(),c=n._29I,u={x:-o/a,y:-r/a,width:h/a,height:l/a},d={},f=n._34I,g=n._24I,_=n._32I,v=n._23I;for(i in(h!==s.clientWidth||l!==s.clientHeight)&&(Po(s,h,l),_=1),_||uo(u,c)||(_=1),n._29I=u,n.each(function(t){i=t._id;var e=d[i]=n.isVisible(t);e!==n._56I[i]&&(g[i]=t,(p=n.getDataUI(g[i]))&&p._84o(e),n._84o(t,e))},n),g)(p=n.getDataUI(g[i]))&&(!_&&n._56I[i]&&((b=p._79o())&&f.add(b)),p.invalidate()),n._83I=1;if(n._56I=d,!_)for(i in g)d[i]&&((p=n.getDataUI(g[i]))&&((b=p._79o())&&f.add(b)));if(_?e=u:(f.each(function(t){Ps(u,t)&&(e=Ds(e,t))}),e&&(Ls(e,vt(1,1/a)),e.x=ft(e.x*a)/a,e.y=ft(e.y*a)/a,e.width=gt(e.width*a)/a,e.height=gt(e.height*a)/a,e=Ms(u,e))),(n._74O=e)&&(t=Ao(s),Wo(t,o,r,a),t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.clip(),t.clearRect(e.x,e.y,e.width,e.height),n._42(t,e),t.restore(),delete n._74O),n._24I={},f.clear(),delete n._32I,v&&0<h&&0<l){var p;if(p=n.getDataUI(v)){var b=p._79o(),m=n._29I,y=m.x,w=m.y,x=m.width,C=m.height;a=n._zoom;b&&!Ps(b,m)&&(b.x+b.width<y&&n.tx(-b.x*a),b.x>y+x&&n.tx(-(b.x+b.width-x)*a),b.y+b.height<w&&n.ty(-b.y*a),b.y>w+C&&n.ty(-(b.y+b.height-C)*a))}delete n._23I}n._83I&&(delete n._83I,delete n._84I),n._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(t){var e=this;t!==e.isScrollBarVisible()&&(t?(Mo(e._view,e._79O=Vo()),Mo(e._79O,e._27I=Vo()),Mo(e._79O,e._28I=Vo())):(zs(e._79O),delete e._79O,delete e._27I,delete e._28I),e.fp("scrollBarVisible",!t,t))},showScrollBar:function(){var t=this;t._79O&&(t._85I||(Lt(function(){t._86I()},qa),t.iv()),t._85I=new Date)},_86I:function(){var t=this;t._85I&&((new Date).getTime()-t._85I.getTime()>=qa?(delete t._85I,t.iv()):Lt(function(){t._86I()},qa))},_98O:function(){var t=this._27I,e=this._28I;if(this._79O){if(this._autoHideScrollBar&&!this._85I)return t.style.visibility=Ne,void(e.style.visibility=Ne);var i=this.getScrollBarColor(),n=this._zoom,o=this.getScrollBarSize(),r=this.getViewRect(),a=this.getScrollRect(),s=r.height*n,h=a.height*n,l=r.width*n-o-2,c=s*((r.y-a.y)*n/h),u=s*(s/h),d=t.style;s<h-.5?(u<Za&&((c=c+u/2-Za/2)<0&&(c=0),s<c+Za&&(c=s-Za),u=Za),Go(t,l,c,o,u),d.visibility=Qe,d.background=i,d.borderRadius=o/2+ae):d.visibility=Ne;var f=r.width*n,g=a.width*n,_=(c=r.height*n-o-2,l=f*((r.x-a.x)*n/g),f*(f/g));d=e.style;f<g-.5?(_<Za&&((l=l+_/2-Za/2)<0&&(l=0),f<l+Za&&(l=f-Za),_=Za),Go(e,l,c,_,o),d.visibility=Qe,d.background=i,d.borderRadius=o/2+ae):d.visibility=Ne}},setDataModel:function(t){var e=this,i=e._dataModel,n=e._3o;i!==t&&(i&&(i.umm(e.handleDataModelChange,e),i.umd(e.handleDataPropertyChange,e),i.removeIndexChangeListener(e._75O,e),n||i.sm().ums(e._16o,e)),(e._dataModel=t).mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),t.addIndexChangeListener(e._75O,e),n?n._21I(t):t.sm().ms(e._16o,e),e.invalidateAll(!0),e.fp(xi,i,t))},handleDataPropertyChange:function(t){this.invalidateData(t.data)},onPropertyChanged:function(t){var e=t.property;this.redraw(),Vh[e]?this.showScrollBar():e===qe&&this.onCurrentSubGraphChanged(t)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(t){var e=this,i=t.kind,n=t.data;if(e._83I=1,"add"===i)e.invalidateData(n),Kn(n)&&n.getEdgeGroup()&&n.getEdgeGroup().eachSiblingEdge(e.invalidateData,e);else if(i===ve){e._21Q(n);var o=n._id,r=e._25I[o];if(r){if(e._56I[o]){var a=r._79o();a&&e.redraw(a)}r.dispose(),delete e._25I[o],delete e._24I[o],delete e._56I[o]}n===e._currentSubGraph&&e.setCurrentSubGraph(ot)}else i===pe&&(e.invalidateAll(!0),e.setCurrentSubGraph(ot))},_75O:function(t){this.invalidateData(t.data)},_76O:function(t){if(this.isVisible(t)){for(var e=t;e._parent&&this.isVisible(e._parent);)e=e._parent;e&&e!==t&&this._dataModel._76O(e),this._dataModel._76O(t)}},isMovable:function(t){return(!Kn(t)||t.getStyle(Ae)===Oe)&&(!!t.s("2d.movable")&&(!this._movableFunc||this._movableFunc(t)))},isSelectable:function(t){return t.s("2d.selectable")&&this.sm().isSelectable(t)},isEditable:function(t){if(!this._editInteractor||!this.isSelected(t))return!1;if(to(t)){var e=this.getDataUI(t);if(!e||e._88I)return!1}return(!Kn(t)||t.getStyle(Ae)===Oe)&&(!!t.s("2d.editable")&&(!this._editableFunc||this._editableFunc(t)))},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(t){return(!$n(t)||0===t.getRotation())&&(!this._pointEditableFunc||this._pointEditableFunc(t))},isRectEditable:function(t){return(!$n(t)||0===t.getRotation())&&(!this._rectEditableFunc||this._rectEditableFunc(t))},isRotationEditable:function(t){return!(!t.setRotation||!1===t.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(t))},getRotationPoint:function(t){var e=Gr(t.getRotation(),0,-t.getHeight()/2-(Nt?32:16)),i=t.p();return e.x+=i.x,e.y+=i.y,e},getLogicalPoint:function(t){return js(t,this._canvas,this.tx(),this.ty(),this._zoom,this._zoom)},getSelectedDataAt:function(t){var e=this;return this.getDataAt(t,function(t){return e.isSelected(t)})},getDataAt:function(e,i,n){var o;return e.target&&(e=this.lp(e)),this.reverseEach(function(t){return(i?i(t):this.isSelectable(t))&&this.rectIntersects(t,Hn(e.x,e.y,n))?(o=t,!1):void 0},this),o},getIconInfoAt:function(t,e){if(t.target&&(t=this.lp(t)),e||(e=this.getDataAt(t)),e){var i=this.getDataUI(e);if(i&&i._38o){var n,o=i._38o,r=new yh;for(n in o.icons)r.add(n);for(var a=r.size()-1;0<=a;a--){n=r.get(a);for(var s=o.rects[n],h=s.rotation,l=s.length-1;0<=l;l--){var c,u=(c=s[l]).width,d=c.height,f={x:t.x-c.x-u/2,y:t.y-c.y-d/2};if(h!=ot&&(f=Gr(-h,f.x,f.y)),Es(c={x:-u/2,y:-d/2,width:u,height:d},f))return{key:n,index:l,name:o.icons[n].names[l],rect:s[l],point:t,rotation:h,relativeRect:c,relativePoint:f,data:e}}}}}return ot},getDatasInRect:function(e,i,n){n===N&&(n=1);var o=this,r=new yh;return o.reverseEach(function(t){n&&!o.isSelectable(t)||(i?o.rectIntersects(t,e):o.rectContains(t,e))&&r.add(t)}),r},moveSelection:function(t,e){var i,n=this.dm();n&&(i=n.getHistoryManager()),i&&i.beginInteraction(),$r(this.sm().toSelection(this.isMovable,this),t,e),i&&i.endInteraction()},getDataUIBounds:function(t){var e=this.getDataUI(t);return e?e._79o():ot},getBoundsForGroup:function(t){return t.s(ye)?this.getDataUIBounds(t):ot},rectIntersects:function(t,e){this.validate();var i=ot;if(this._56I[t._id]){var n=this._25I[t._id];if(n){var o=n._79o();if(ks(e,o))i=!0;else if((e=Ms(e,o))&&(n.rectIntersects&&(i=n.rectIntersects(e)),i==ot)){if(!t.s("pixelPerfect"))return!0;var r=e.x,a=e.y,s=e.width,h=e.height,l=1,c=st.hitMaxArea,u=s*h;c<u&&(l=c/u);var d=xr(s*l,h*l);Ho(d,-r*l,-a*l),d.scale(l,l),n._42(d);try{for(var f=0,g=d.getImageData(0,0,s*l,h*l).data;f<g.length;f+=4)if(0!==g[f+3]){i=!0;break}d.restore()}catch(t){i=!(yr=ot)}}}}return!!i},rectContains:function(t,e){if(this._56I[t._id]){var i=this._25I[t._id];if(i)return ks(e,i._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(t){var e=this,i=e._focusData,n=i&&e._25I[i._id],o=0,r=e._dataModel._datas;i&&i._enabled&&i._editable&&n&&n.onKeyDown&&!0===n.onKeyDown(t)||(9===t.keyCode&&(i&&(o=r.indexOf(i),Cs(t)?-1==--o&&(o=0):++o===r.size()&&(o=0)),e._focusData=i=r.get(o),e.sm().setSelection(i)),ir(t)?e.selectAll():_r(t)&&e.isResettable()&&e.reset(),e.sm().isEmpty()||(nr(t)&&e.handleDelete(t),ur(t)&&(e.moveSelection(-1,0),e.fi({kind:"moveLeft"})),dr(t)&&(e.moveSelection(0,-1),e.fi({kind:"moveUp"})),fr(t)&&(e.moveSelection(1,0),e.fi({kind:"moveRight"})),gr(t)&&(e.moveSelection(0,1),e.fi({kind:"moveDown"}))))},handleScroll:function(t,e){os(t);var i=this.lp(t);0<e?this.scrollZoomIn(i):e<0&&this.scrollZoomOut(i)},handlePinch:function(t,e,i){i<e?this.pinchZoomIn(t):this.pinchZoomOut(t)},checkDoubleClickOnNote:function(t,e){var i=this.lp(t),n=this.getDataUI(e),o=n.note2Info;return o&&e.s("note2.toggleable")&&Es(o.clickRect,i)?(e.s(Re,!e.s(Re)),this.fi({kind:"toggleNote2",event:t,data:e}),!0):!!((o=n.noteInfo)&&e.s("note.toggleable")&&Es(o.clickRect,i))&&(e.s(je,!e.s(je)),this.fi({kind:"toggleNote",event:t,data:e}),!0)},_84o:function(){},isNoteVisible:function(){return.15<this._zoom},isLabelVisible:function(){return.15<this._zoom},isSelectVisible:function(){return.15<this._zoom},isEditVisible:function(){return.15<this._zoom},autoScroll:function(t,e){var i=this,n=i.getAutoScrollZone(),o=n/i.getZoom(),r=n/4,a=i._29I,s=i.lp(t),h={x:i.tx(),y:i.ty()};return s&&0<n&&a&&(s.x-a.x<o?i.translate(r,0):a.x+a.width-s.x<o&&i.translate(-r,0),s.y-a.y<o?i.translate(0,r):a.y+a.height-s.y<o&&i.translate(0,-r)),h.x=i.tx()-h.x,h.y=i.ty()-h.y,e&&(e.x+=h.x,e.y+=h.y),h},getMoveMode:function(t,e){var i=e.s("2d.move.mode");return i||(bn[88]?"x":bn[89]?"y":"xy")}});var $l=function(t,e){this.gv=t,this.s=function(t){return e.getStyle(t)},this._data=e,this._87I=new yh};Us($l,e,{_6I:ot,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){return!this.gv.isSelected(this._data)||this.isShadowed()?0:this.s("select.width")},getBodyColor:function(t){var e=this._data,i=this.gv.getBodyColor(e);return i||(t?e.getStyle(t):ot)},_2Q:function(t){return this.s(t)},_1Q:function(t,e,i,n){var o=this.s,r=o(e+".dash.color");t.strokeStyle=r,t.lineWidth=i,t.stroke(),o(e+".dash.3d")&&kr(t,r,o(e+".dash.3d.color"),i,this.gv._zoom,o(e+".dash.3d.accuracy")),ch(t,n)},invalidate:function(){this._6I=ot},_79o:function(){var t=this;if(!t._6I){t.labelInfo=t.label2Info=t.noteInfo=t.note2Info=t._38o=ot,t._87I.clear(),t._3O();var e=t._data,i=t.gv;t._55O=i.isEditable(e)?{_42O:i.isRectEditable(e),_43O:i.isPointEditable(e),_56O:i.isRotationEditable(e)}:ot,t._6I=t._81o()}return t._6I},_3O:function(){},getPosition:function(){return Dn},_68o:function(t,e){t&&this._87I.add(Sr(t,e))},_81o:function(){var e,t=this,i=t.s;if(t._24O(Ve,"getLabel"),t._24O(De,"getLabel2"),t._26O(Ee,"getNote"),t._26O(ke,"getNote2"),t._15O(),t._55O&&t._48O(),t._87I.each(function(t){e=Ds(e,t)}),e&&t.isShadowed()){var n=fs(e);n.x+=i("shadow.offset.x"),n.y+=i("shadow.offset.y"),Ls(n,i("shadow.blur")),e=Ds(e,n)}return t._87I.clear(),e},_42:function(t){var e=this,i=e._data,n=e.gv,o=e.s,r=o("opacity"),a=this.isShadowed();if(a){var s=t.shadowOffsetX,h=t.shadowOffsetY,l=t.shadowBlur,c=t.shadowColor;t.shadowOffsetX=o("shadow.offset.x"),t.shadowOffsetY=o("shadow.offset.y"),t.shadowBlur=o("shadow.blur"),t.shadowColor=o("shadow.color")}if(r!=ot){var u=t.globalAlpha;t.globalAlpha=r}e._80o(t),n.isLabelVisible(i)&&(Qh(t,e.labelInfo),Qh(t,e.label2Info)),n.isNoteVisible(i)&&(Gh(t,e.noteInfo),Gh(t,e.note2Info)),e._99O(t),r!=ot&&(t.globalAlpha=u),a&&(t.shadowOffsetX=s,t.shadowOffsetY=h,t.shadowBlur=l,t.shadowColor=c),e._55O&&n.isEditVisible(i)&&e._47O(t)},_80o:function(){},_47O:function(){},_24O:function(t,e){var i=this._data,n=this.gv,o=this.s,r=n[e](i);if(r!=ot){var a=o(t+".scale"),s=o(t+".max"),h=o(t+".position"),l=this[t+"Info"]={label:r,scale:a,color:n[e+"Color"](i),font:o(t+".font"),opacity:o(t+".opacity"),align:o(t+".align"),rotation:this.getRotation(o(t+".rotation"),!1,h),background:n[e+"Background"](i)},c=Bo(l,r);0<s&&s<c.width&&(l.labelWidth=c.width,c.width=s),1!==a&&(c.width*=a,c.height*=a);var u=this.getPosition(h,o(t+".offset.x"),o(t+".offset.y"),c,o(t+".position.fixed"));if(c.x=u.x-c.width/2,c.y=u.y-c.height/2,this._68o(l.rect=c,l.rotation),1!==a){var d=c.width/a,f=c.height/a;l.rect={x:u.x-d/2,y:u.y-f/2,width:d,height:f}}}},_26O:function(t,e){var i=this.gv,n=this._data,o=this.s,r=i[e](n);if(r!=ot){var a,s,h=o(t+".scale"),l=this[t+"Info"]={note:r,scale:h,data:n,view:i,expanded:o(t+".expanded"),font:o(t+".font"),color:o(t+".color"),opacity:o(t+".opacity"),align:o(t+".align"),icon:o(t+".icon"),backgroundImage:o(t+".backgroundImage"),borderWidth:o(t+".border.width"),borderColor:o(t+".border.color"),background:i[e+"Background"](n)},c=this.getPosition(o(t+".position"),o(t+".offset.x"),o(t+".offset.y")),u=c.x,d=c.y;if(l.expanded){var f,g=o(t+".max"),_=o(t+".backgroundImage");(f=_?(_=as(_),{width:vh(_,n),height:ph(_,n)}):Bo(l,r)).width+=6,f.height+=2,0<g&&g<f.width&&(l.labelWidth=f.width,f.width=g),a=f.width,s=f.height+8,l.clickRect={x:u-a*h/2,y:d-s*h,width:a*h,height:s*h*f.height/s}}else{var v=o(t+".icon");s=v?(v=as(v),a=vh(v,n),ph(v,n)):(a=12,18),l.clickRect={x:u-a*h/2,y:d-s*h,width:a*h,height:s*h}}l.rect={x:u-a/2,y:d-s*h/2-s/2,width:a,height:s};var p=gt(l.borderWidth/2)*h;this._68o({x:u-a*h/2-p,y:d-s*h-p,width:a*h+2*p,height:s*h+2*p})}},_48O:function(){},_99O:function(t){var e=this._38o;if(e){var i=this.gv,n=this._data,o=e.icons;for(var r in o){var a=o[r],s=e.rects[r];if(s){var h=bh(a.opacity,n,i),l=bh(a.names,n,i),c=l?l.length:0,u=s.rotation;if(h!=ot){var d=t.globalAlpha;t.globalAlpha*=h}for(var f=0;f<c;f++){var g=l[f],_=as(g),v=s[f];if(u){var p=v.x+v.width/2,b=v.y+v.height/2;t.save(),Ho(t,p,b),Uo(t,u),Ho(t,-p,-b)}hs(t,_,bh(a.stretch,n,i),v.x,v.y,v.width,v.height,this._data,this.gv),u&&t.restore()}h!=ot&&(t.globalAlpha=d)}}}}});var Kl=function(t,e){ho(Kl,this,[t,e])};Us(Kl,$l,{_40O:function(t,e){var i=this.s,n=t.rect;(t.borderColor=this.gv.getBorderColor(this._data))&&(t.borderType=i("border.type"),t.borderWidth=i("border.width"),t.borderPadding=i("border.padding"),e=vt(e,t.borderPadding+t.borderWidth/2)),(t.selectWidth=this._2o())&&(t.selectType=i("select.type"),t._97o=i("select.color"),t.selectPadding=i("select.padding"),e=vt(e,t.selectPadding+t.selectWidth/2)),0<e&&(n=fs(n),Ls(n,e)),this._68o(n)},_39O:function(t,e){var i=e.rect;if(0<e.borderWidth){var n=e.borderPadding;t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,Br(t,e.borderType,{x:i.x-n,y:i.y-n,width:i.width+2*n,height:i.height+2*n}),t.stroke()}0<e.selectWidth&&(n=e.selectPadding,t.strokeStyle=e._97o,t.lineWidth=e.selectWidth,Br(t,e.selectType,{x:i.x-n,y:i.y-n,width:i.width+2*n,height:i.height+2*n}),t.stroke())},_3O:function(){var t=this.s,e=this._data,i=e.getStyle(fe),n=this.getBodyColor(),o=this._83o=i?{shape:i,_53o:this.getBodyColor("shape.background"),_27Q:as(t("shape.repeat.image"),n),_54o:t("shape.border.width"),_55o:t("shape.border.color"),_56o:t("shape.border.3d"),_57o:t("shape.border.3d.color"),_58o:t("shape.border.3d.accuracy"),shapeGradient:t("shape.gradient"),_59o:t("shape.gradient.color"),_60o:t("shape.border.pattern"),_61o:t("shape.border.cap"),_62o:t("shape.border.join")}:{img:as(e.getImage(),n),bodyColor:n,stretch:t("image.stretch")};!Et||(o.rect=e.getRect(),o.position=e.p(),o.rotation=e.getRotation(),i===ce&&(o._63o=t("shape.depth")),this._40O(o,i?Or(ot,o._54o/2,o._62o):0))},getPosition:function(t,e,i,n){var o=ta(t,this._83o.rect,n);return o.x+=e,o.y+=i,o},_80o:function(t){var e=this.s,i=this.gv,n=this._data,o=this._83o,r=o.rect,a=r,s=o.position,h=o.rotation,l=o.shape;if(0<r.width&&0<r.height){if(h&&(t.save(),Ho(t,s.x,s.y),Uo(t,h),Ho(t,-s.x,-s.y),(a=n.getSize()).x=s.x-a.width/2,a.y=s.y-a.height/2),this.freeDraw)this.freeDraw(t,a,o);else if(l){var c,u,d,f,g=o._60o,_=lh(t,g),v=o._53o,p=o._27Q,b=o._54o,m=o._55o,y=t.lineJoin,w=t.lineCap;if("roundRect"===l?c=e("shape.corner.radius"):"polygon"===l?c=e("shape.polygon.side"):"arc"===l&&(c=e("shape.arc.from"),u=e("shape.arc.to"),d=e("shape.arc.close"),f=e("shape.arc.oval")),t.lineJoin=o._62o,t.lineCap=o._61o,v||p?(p?jr(t,p):Lr(t,v,o.shapeGradient,o._59o,a),Br(t,l,a,c,u,d,f),t.fill(),t!==_&&Br(_,l,a,c,u,d,f)):Br(_,l,a,c,u,d,f),0<b&&(t.lineWidth=b,t.strokeStyle=m,t.stroke(),o._56o&&kr(t,m,o._57o,b,i._zoom,o._58o)),ch(t,g),e("shape.dash")){var x=e("shape.dash.width")||b;if(0<x)g=e("shape.dash.pattern"),(_=lh(t,g,this._2Q("shape.dash.offset")))!==t&&Br(_,l,a,c,u,d,f),this._1Q(t,"shape",x,g)}Fr(t,v,o._63o,a),t.lineJoin=y,t.lineCap=w}else hs(t,o.img,o.stretch,a.x,a.y,a.width,a.height,n,i,o.bodyColor);h&&t.restore()}this._39O(t,o)},_48O:function(){var t,e=this._data,i=this.gv,n=this._55O,o=i.getEditPointSize()/2+2;if(n._42O&&(t=e.getRect(),Ls(t,o)),n._56O){var r=n._98o=i.getRotationPoint(e);t=Ds(t,{x:r.x-o,y:r.y-o,width:2*o,height:2*o})}this._68o(t)},_47O:function(e){var t=this.gv,i=this._55O,n=this._data.getRect(),o=t.getEditPointSize(),r=i._98o;i._42O&&(e.fillStyle=t.getEditPointBackground(),e.strokeStyle=t.getEditPointBorderColor(),e.lineWidth=1,[{x:n.x,y:n.y},{x:n.x+n.width/2,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x,y:n.y+n.height/2},{x:n.x+n.width,y:n.y+n.height/2},{x:n.x,y:n.y+n.height},{x:n.x+n.width/2,y:n.y+n.height},{x:n.x+n.width,y:n.y+n.height}].forEach(function(t){Mr(e,t.x-o/2,t.y-o/2,o,o),e.stroke()})),i._56O&&(e.fillStyle=t.getEditPointBorderColor(),e.strokeStyle=t.getEditPointBackground(),e.lineWidth=1,e.beginPath(),e.arc(r.x,r.y,o/2,0,Ot,!0),e.fill(),e.stroke())}});var tc=function(t,e){ho(tc,this,[t,e])},ec=function(t,e,i,n){var o=Ts(t,e);return i=n?pt(i,o):Xh(i,o),o?i/=o:i=0,{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}};Us(tc,$l,{_3O:function(){var t,e=this,i=e._data,n=e.gv,o=e.s,r=o(Ae),a=i.isLooped(),s=o("edge.width"),h=o("edge.center"),l=o("edge.offset"),c=n.getBorderColor(i),u=c?o("border.width"):0,d=e._2o(),f=i._40I,g=i._41I,_=e._78o=f&&g?{looped:a,type:r,width:s,center:h,color:e.getBodyColor("edge.color"),borderColor:c,borderWidth:u,_97o:d?o("select.color"):ot,selectWidth:d,pattern:o("edge.pattern"),cap:o("edge.cap"),join:o("edge.join"),is3d:o("edge.3d"),_67o:o("edge.3d.color"),_66o:o("edge.3d.accuracy")}:ot;if(_){var v=st.getEdgeType(r);if(v){var p=v(i,Zh(e,n,i,a,r),n,e._19Q);p.points&&1<p.points.size()&&(_._4O=p,t=Vs(_._4O.points))}else{var b=Uh(n,f,o("edge.source.position"),o("edge.source.offset.x"),o("edge.source.offset.y")),m=Uh(n,g,o("edge.target.position"),o("edge.target.offset.x"),o("edge.target.offset.y"));if(r===Oe){var y=_.points=o(Fe)||wh,w=y.size();if(_.segments=o("edge.segments"),!h)if(l){var x=ec(b,w?y.get(0):m,l,w),C=ec(m,w?y.get(w-1):b,l,w);b=x,m=C}else{var I=Hh(n,f),O=Hh(n,g),S=_o(b,w?y.get(0):m,I);S&&(b={x:S[0],y:S[1]}),(S=_o(w?y.get(w-1):b,m,O))&&(m={x:S[0],y:S[1]})}t=Ds(Vs(_.points),Vs(b,m))}else{var T=Zh(e,n,i,a,r);if(e._19Q||(T=-T),a)(b=fs(b)).x-=f.getWidth()/2,_.radius=T,t={x:b.x-T,y:b.y-T,width:2*T,height:2*T};else{var V=Ts(b,m),D=Xh(l,V),E=(x={x:D,y:T},C={x:V-D,y:T},Vt(m.y-b.y,m.x-b.x)),k=_.mat=new Qr(E);if(_.orienAngle=E,_.angle=m.x<b.x?E+It:E,_.rect={x:x.x,y:x.y,width:C.x-x.x,height:0},_.origin=b,(x=k.tf(x)).x+=b.x,x.y+=b.y,(C=k.tf(C)).x+=b.x,C.y+=b.y,h){var P={x:V,y:0};(P=k.tf(P)).x+=b.x,P.y+=b.y,t=Vs([b,x,C,P]),_.c1=b,_.c2=P}else t=Vs(x,C);b=x,m=C}}_._69o=b,_._70o=m}Or(t,s/2+u+d,_.join),e._68o(t)}},getRotation:function(t,e,i){t=t||0;var n=this._78o;if(n){var o,r=n.angle,a=n.points,s=n._4O;if(r!=ot)return e?n.orienAngle+t:r+t;if(s){var h=s.points;return o=h.size(),Th[i]?o&&0==o%2?Yh(h.get(o/2-1),h.get(o/2),e,t):t:Sh[i]?Yh(h.get(0),h.get(1),e,t):Yh(h.get(o-2),h.get(o-1),e,t)}if(a)return o=a.size(),Th[i]?o&&0==o%2?Yh(a.get(o/2-1),a.get(o/2),e,t):t:Sh[i]?Yh(n._69o,o?a.get(0):n._70o,e,t):Yh(o?a.get(o-1):n._69o,n._70o,e,t)}return t},getPosition:function(t,e,i,n,o){var r=this._78o;if(r){var a=r.type,s=r.points,h=r._4O,l=r._69o,c=r._70o;if(!a)return r.looped?{x:l.x-r.radius+e,y:l.y+i}:(o&&l&&c&&(l.x>c.x||l.x===c.x&&l.y>c.y)&&(t=Kr[t],i=-i),(u=ta(t,r.rect,n)).x+=e,u.y+=i,(u=r.mat.tf(u)).x+=r.origin.x,u.y+=r.origin.y,u);if(s){var u,d=s.size();if(Th[t]){if(d){if(0===(f=d%2))return qh(s.get(d/2-1),s.get(d/2),t,e,i,n,o);u=s.get((d-f)/2)}else u={x:(l.x+c.x)/2,y:(l.y+c.y)/2};return(u=ta(t,{x:u.x,y:u.y,width:0,height:0},n)).x+=e,u.y+=i,u}return Sh[t]?qh(l,d?s.get(0):c,t,e,i,n,o):qh(d?s.get(d-1):l,c,t,e,i,n,o)}if(h){var f,g=h.points;d=g.size();return Th[t]?0===(f=d%2)?qh(g.get(d/2-1),g.get(d/2),t,e,i,n,o):(u=g.get((d-f)/2),(u=ta(t,{x:u.x,y:u.y,width:0,height:0},n)).x+=e,u.y+=i,u):Sh[t]?qh(g.get(0),g.get(1),t,e,i,n,o):qh(g.get(d-2),g.get(d-1),t,e,i,n,o)}}return Dn},_42:function(t){this._78o&&tc.superClass._42.call(this,t)},drawPath:function(e,t){e.beginPath();var i=t.type,n=t.points,o=t.segments,r=t._4O;if(!i||n){var a=t._69o,s=a.x,h=a.y,l=t._70o,c=l.x,u=l.y;if(i)if(o){var d=new yh({x:s,y:h});d.addAll(n),d.add({x:c,y:u}),Dr(e,d,o)}else e.moveTo(s,h),n.each(function(t){e.lineTo(t.x,t.y)}),e.lineTo(c,u);else t.looped?e.arc(s,h,t.radius,0,Ot,!0):t.center?(e.moveTo(t.c1.x,t.c1.y),e.lineTo(s,h),e.lineTo(c,u),e.lineTo(t.c2.x,t.c2.y)):(e.moveTo(s,h),e.lineTo(c,u))}else r&&Dr(e,r.points,r.segments)},_80o:function(t){var e=this.s,i=this._78o,n=i.width,o=i.selectWidth,r=i.borderWidth,a=i.color,s=t.lineJoin,h=t.lineCap,l=i.pattern;if(t.lineJoin=i.join,t.lineCap=i.cap,this.drawPath(lh(t,l),i),o&&(t.strokeStyle=i._97o,t.lineWidth=n+2*(r+o),t.stroke()),r&&(t.strokeStyle=i.borderColor,t.lineWidth=n+2*r,t.stroke()),t.strokeStyle=a,t.lineWidth=n,t.stroke(),i.is3d&&kr(t,a,i._67o,n,this.gv._zoom,i._66o),ch(t,l),e("edge.dash")){l=e("edge.dash.pattern");var c=lh(t,l,this._2Q("edge.dash.offset"));c!==t&&this.drawPath(c,i),this._1Q(t,"edge",e("edge.dash.width")||n,l)}t.lineJoin=s,t.lineCap=h},_48O:function(){var t=this._78o;if(this._55O._43O&&t&&t.points){var e=Vs(t.points);e&&(Ls(e,this.gv.getEditPointSize()/2+2),this._68o(e))}},_47O:function(e){var t=this.gv,i=this._78o;if(this._55O._43O&&i&&i.points){var n=t.getEditPointSize()/2;e.fillStyle=t.getEditPointBackground(),e.strokeStyle=t.getEditPointBorderColor(),e.lineWidth=1,i.points.each(function(t){e.beginPath(),e.arc(t.x,t.y,n,0,Ot,!0),e.fill(),e.stroke()})}},_71o:function(t,i){var n=this,o=n._data;if(n._19Q=!0,!o.getEdgeGroup())return t?o.s("edge.gap"):0;var r,a=0,s=0,h=0;if(o.getEdgeGroup().getSiblings().each(function(t){t.each(function(t){if(n.gv.isVisible(t)&&t.s(Ae)==i){var e=t.s("edge.gap");h=(r?s+=h/2+e/2:r=t,e),t===o&&(a=s)}})}),t)return s-a+h;var e=a-s/2;return r&&o._40I!==r._40I&&(n._19Q=!1),e}});var ic=function(t,e){ho(ic,this,[t,e])};Us(ic,Kl,{_3O:function(){var i,n,t=this.s,e=this._data,o=this.gv;if(this._88I=ot,e.isExpanded()&&e.eachChild(function(t){var e=o.getBoundsForGroup(t);e&&(n||(n=[]),n.push(e),i=Ds(i,e))}),i){var r=o.getLabel(e),a=t("group.type");i=Jh(a,n,i),zh(i,e,"group.padding",1);var s=this._88I={type:a,rect:i,_64o:i};if(!a&&r!=ot){var h,l=this.labelInfo={label:r,color:t("group.title.color"),font:t("group.title.font")},c=Bo(l,r),u=c.width,d=c.height,f=t("group.title.align");u>i.width&&(i.width=u),l.rect={y:i.y-d,width:c.width,height:d},h=f===Zt?i.x:f===Jt?i.x+i.width-u:i.x+i.width/2-u/2,l.rect.x=h,s.titleRect={x:i.x,y:i.y-d,width:i.width,height:d+1},s.rect={x:i.x,y:i.y-d,width:i.width,height:i.height+d}}this._40O(s,t("group.border.width")/2)}else ic.superClass._3O.call(this)},getPosition:function(t,e,i,n){var o=this._88I;if(o){var r=ta(t,o.rect,n);return r.x+=e,r.y+=i,r}return ic.superClass.getPosition.apply(this,arguments)},_24O:function(t,e){var i=this._88I;(!i||i.type||"label2"===t)&&ic.superClass._24O.call(this,t,e)},_80o:function(t){var e=this._88I;if(e){var i=this._data,n=this.s,o=this.gv,r=e.type,a=e.rect,s=e._64o,h=e.titleRect,l=this.getBodyColor(),c=as(n("group.image"),l),u=n("group.image.stretch"),d=this.getBodyColor("group.background"),f=as(n("group.repeat.image"),l),g=n("group.gradient"),_=n("group.gradient.color"),v=n("group.depth");if(r){var p=n("group.border.pattern"),b=n("group.border.width"),m=t.lineJoin,y=t.lineCap;if(t.lineJoin=n("group.border.join"),t.lineCap=n("group.border.cap"),c){if(t.save(),Br(t,r,a),t.clip(),hs(t,c,u,a.x,a.y,a.width,a.height,i,o,l),t.restore(),0<b){var w=lh(t,p);Br(w,r,a),t.lineWidth=b,t.strokeStyle=n("group.border.color"),t.stroke(),ch(t,p)}}else{w=lh(t,p);d||f?(f?jr(t,f):Lr(t,d,g,_,a),Br(t,r,a),t.fill(),t!==w&&Br(w,r,a)):Br(w,r,a),0<b&&(t.lineWidth=b,t.strokeStyle=n("group.border.color"),t.stroke()),ch(t,p),r===ce&&Fr(t,d,v,a)}t.lineJoin=m,t.lineCap=y}else if(c?hs(t,c,u,s.x,s.y,s.width,s.height,i,o,this.getBodyColor()):(d||f)&&(f?jr(t,f):Lr(t,d,g,_,s),Br(t,ce,s),t.fill(),Fr(t,d,v,s)),h){var x=n("group.title.background");Mr(t,h.x,h.y,h.width,h.height,x),Fr(t,x,v,h)}this._39O(t,e)}else ic.superClass._80o.call(this,t)}});var nc=function(t,e){ho(nc,this,[t,e])};Us(nc,Kl,{_3O:function(){var t=this._data,e=this.s,i=this.gv,n=t.getPoints(),o=i.getBorderColor(t),r=o?e("border.width"):0,a=this._2o(),s=e("shape.border.width"),h=t.getRect(),l=i.getBodyColor(t),c=this._99o=n.isEmpty()?ot:{rect:h,rotation:t.getRotation(),position:t.p(),points:n,segments:t.getSegments(),bodyColor:l,borderColor:o,borderWidth:r,_94o:e("shape.border.3d"),_95o:e("shape.border.3d.color"),_96o:e("shape.border.3d.accuracy"),_97o:a?e("select.color"):ot,selectWidth:a,_53o:e("shape.background"),_27Q:as(e("shape.repeat.image"),l),_54o:s,_55o:e("shape.border.color"),shapeGradient:e("shape.gradient"),_59o:e("shape.gradient.color"),_60o:e("shape.border.pattern"),_61o:e("shape.border.cap"),_62o:e("shape.border.join")};if(c){var u=s/2+r+a;u&&(h=fs(h),Or(h,u,c._62o)),this._68o(h)}},getPosition:function(t,e,i,n){var o=this._99o;if(o){var r=ta(t,o.rect,n);return r.x+=e,r.y+=i,r}return Dn},_42:function(t){this._99o&&nc.superClass._42.call(this,t)},_80o:function(t){var e,i=this.s,n=this._99o,o=n.position,r=n.rotation,a=n.bodyColor,s=n.borderWidth,h=n.selectWidth,l=n._53o,c=n._27Q,u=n._54o,d=n.points,f=n.segments,g=this._data.isClosePath();r&&(t.save(),Ho(t,o.x,o.y),Uo(t,r),Ho(t,-o.x,-o.y));var _=n._60o,v=lh(t,_),p=t.lineJoin,b=t.lineCap;if(t.lineJoin=n._62o,t.lineCap=n._61o,l||c?(c?jr(t,c):Lr(t,e=a||l,n.shapeGradient,n._59o,n.rect),Dr(t,d,f,g),t.fill(),v!==t&&Dr(v,d,f,g)):Dr(v,d,f,g),h&&(t.strokeStyle=n._97o,t.lineWidth=u+2*(s+h),t.stroke()),s&&(t.strokeStyle=n.borderColor,t.lineWidth=u+2*s,t.stroke()),u&&(e=n._55o,!l&&a&&(e=a),t.strokeStyle=e,t.lineWidth=u,t.stroke(),n._94o&&kr(t,e,n._95o,u,this.gv._zoom,n._96o)),ch(t,_),i("shape.dash")){var m=i("shape.dash.width")||u;if(0<m)_=i("shape.dash.pattern"),(v=lh(t,_,this._2Q("shape.dash.offset")))!==t&&Dr(v,d,f,g),this._1Q(t,"shape",m,_)}t.lineJoin=p,t.lineCap=b,r&&t.restore()},_48O:function(){if(nc.superClass._48O.call(this),this._55O._43O){var t=this._data.getRect();Ls(t,this.gv.getEditPointSize()/2+2),this._68o(t)}},_47O:function(e){if(nc.superClass._47O.call(this,e),this._55O._43O){var t=this.gv,i=t.getEditPointSize()/2;e.fillStyle=t.getEditPointBackground(),e.strokeStyle=t.getEditPointBorderColor(),e.lineWidth=1,this._data.getPoints().each(function(t){e.beginPath(),e.arc(t.x,t.y,i,0,Ot,!0),e.fill(),e.stroke()})}}});var oc=function(t,e){ho(oc,this,[t,e])};Us(oc,nc,{getRotation:function(t,e,i){t=t||0;var n=this._data.getPoints(),o=n.size();return 1<o?Th[i]?o&&0==o%2?Yh(n.get(o/2-1),n.get(o/2),e,t):t:Sh[i]?Yh(n.get(0),n.get(1),e,t):Yh(n.get(o-2),n.get(o-1),e,t):t},getPosition:function(t,e,i,n,o){var r=this._data.getPoints(),a=r.size();if(1<a){if(Th[t]){var s=a%2;if(0===s)return qh(r.get(a/2-1),r.get(a/2),t,e,i,n,o);var h=r.get((a-s)/2),l={x:h.x,y:h.y,width:0,height:0};return(h=ta(t,l,n)).x+=e,h.y+=i,h}return Sh[t]?qh(r.get(0),r.get(1),t,e,i,n,o):qh(r.get(a-2),r.get(a-1),t,e,i,n,o)}return Dn}});var rc=function(t,e){ho(rc,this,[t,e])};Us(rc,Kl,{_3O:function(){rc.superClass._3O.call(this);var t=this.s,e=this._83o;this._82o=e.img||e.shape?ot:{background:this.getBodyColor("grid.background"),depth:t("grid.depth"),rect:e.rect,_88o:t("grid.cell.depth"),cellBorderColor:t("grid.cell.border.color"),_89o:t("grid.row.count"),_90o:t("grid.column.count"),block:t("grid.block"),_91o:t("grid.block.color"),_92o:t("grid.block.padding"),_93o:t("grid.block.width")}},_80o:function(t){var e=this._82o;if(e){var i,n,o=this._data,r=e.background,a=e.rect,s=e.block,h=e._91o,l=e._92o,c=e._93o,u=e._88o,d=e.cellBorderColor,f=e._89o,g=e._90o;if(r)if(Mr(t,a.x,a.y,a.width,a.height,r),Fr(t,r,e.depth,a),u)for(i=0;i<f;i++)for(n=0;n<g;n++)(a=o.getCellRect(i,n))&&Fr(t,r,u,a);else if(d){for(t.beginPath(),i=0;i<f;i++)for(n=0;n<g;n++)(a=o.getCellRect(i,n))&&t.rect(a.x,a.y,a.width,a.height);t.strokeStyle=d,t.lineWidth=1,t.stroke()}if("h"===s)for(i=0;i<f;i++)a=Ds(o.getCellRect(i,0),o.getCellRect(i,g-1)),Ls(a,l),zr(t,h,a.x,a.y,a.width,a.height,c);else if("v"===s)for(n=0;n<g;n++)a=Ds(o.getCellRect(0,n),o.getCellRect(f-1,n)),Ls(a,l),zr(t,h,a.x,a.y,a.width,a.height,c);this._39O(t,this._83o)}else rc.superClass._80o.call(this,t)}});var ac=$h.Interactor=function(t){this.gv=this._graphView=t};Kh("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(t){this.gv.fi(t)},setCursor:function(t){Nt||(this.getView().style.cursor=t)},startDragging:function(t){this._lastClientPoint=Os(t),this._lastLogicalPoint=this.gv.lp(t),Rs(this,t)},clearDragging:function(){this._lastClientPoint=this._lastLogicalPoint=this._logicalPoint=ot},autoScroll:function(t){return this.gv.autoScroll(t,this._lastClientPoint)}});var sc=$h.DefaultInteractor=function(t){ho(sc,this,[t])};Kh("DefaultInteractor",ac,{handle_mousedown:function(t){os(t);var e=this.gv,i=e.getDataAt(t);e.setFocus(t)&&!e._editing&&(xs(t)?e.handleDoubleClick(t,i):e.handleClick(t,i),e.isPannable()&&!i&&ys(t)&&!Is(t)&&(this._tx=e.tx(),this._ty=e.ty(),this.startDragging(t)))},handleWindowMouseUp:function(t){var e=this.gv;e._panning&&(delete e._panning,e.onPanEnded(),this.fi({kind:"endPan",event:t})),delete this._tx,delete this._ty,this.clearDragging()},handle_mousemove:function(t){var e=this,i=e.gv;e._hoverTimer&&(jt(e._hoverTimer),delete e._hoverTimer),e._hoverTimer=Lt(function(){e.fi({kind:"hover",event:t}),jt(e._hoverTimer),delete e._hoverTimer},i.getHoverDelay()||800)},handle_touchmove:function(t){this.handle_mousemove(t)},handleWindowMouseMove:function(t){var e=this.gv,i=this._lastClientPoint;this.fi({kind:e._panning?"betweenPan":"beginPan",event:t}),e._panning=1,e.setTranslate(this._tx+t.clientX-i.x,this._ty+t.clientY-i.y)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)}});var hc=$h.SelectInteractor=function(t){ho(hc,this,[t])};Kh("SelectInteractor",ac,{_42:function(){var t=this.gv,e=t.getZoom(),i=this.mark,n=this.div;n||(n=this.div=Vo(),Mo(this.getView(),n));var o={};o.x=i.x*e+t.tx(),o.y=i.y*e+t.ty(),o.width=i.width*e,o.height=i.height*e,Go(n,o),this.intersects()?(n.style.border="",n.style.background=t.getRectSelectBackground()):(n.style.background="",n.style.border="1px solid "+t.getRectSelectBorderColor())},handle_mousedown:function(t){var e=this.gv;if(this._57I=ot,!e._editing){var i=e.getDataAt(t),n=e.sm();i?Is(t)?n.co(i)?n.rs(i):n.as(i):n.co(i)||n.ss(i):Is(t)||!e.isPannable()?ys(t)&&(Is(t)||n.cs(),e.isRectSelectable()&&(this.startDragging(t),e._77O=1)):this._57I=Os(t)}},handle_mouseup:function(t){var e=this._57I;e&&(Ts(e,Os(t))<=1&&this.gv.sm().cs(),this._57I=ot)},handleWindowMouseUp:function(t){this.clear(t)},handleWindowMouseMove:function(t){var e=this,i=e.gv;e._logicalPoint=i.lp(t),e.mark?(e.fi({kind:"betweenRectSelect",event:t}),e.autoScroll(t),e.redraw()):e.fi({kind:"beginRectSelect",event:t}),e.mark=Vs(e._lastLogicalPoint,e._logicalPoint),e.redraw()},intersects:function(){var t=this._lastLogicalPoint,e=this._logicalPoint;return t.x>e.x||t.y>e.y},clear:function(t){var e=this,i=e.gv,n=e.mark;if(e._57I=ot,e._lastLogicalPoint){if(n){if(0!==n.width&&0!==n.height){var o=i.getDatasInRect(n,e.intersects());if(!o.isEmpty()){var r=i.sm(),a=r.toSelection();o.each(function(t){r.co(t)?a.remove(t):a.add(t)}),r.ss(a)}}zs(e.div),delete e.div,delete e.mark,e.redraw(),e.fi({kind:"endRectSelect",event:t}),i.onRectSelectEnded()}e.clearDragging(),delete i._77O}},redraw:function(){var t=this;t._draw||(t._draw=1,Lt(function(){t.mark&&t._42(),delete t._draw},16))}});var lc=$h.MoveInteractor=function(t){ho(lc,this,[t])};Kh("MoveInteractor",ac,{handle_mousedown:function(t){var e=this.gv;if(ys(t)&&!e._editing){var i=e.getSelectedDataAt(t);i?(this._data=i,e.handleMouseDown&&e.handleMouseDown(t,i),this.startDragging(t),e.isMovable(i)&&(e._moving=1)):e._focusData=ot}},handleWindowMouseUp:function(t){var e=this.gv;e.handleMouseUp&&e.handleMouseUp(t,this._data),this.clear(t)},handleWindowMouseMove:function(t){var e=this.gv,i=this._data,n=e.getDataModel().getHistoryManager();if((!e._93O||!e._93O(t,i))&&e._moving){var o=this._logicalPoint?"betweenMove":"beginMove",r={kind:o,event:t},a=this._logicalPoint=e.lp(t);n&&"beginMove"===o&&n.beginInteraction();var s=a.x-this._lastLogicalPoint.x,h=a.y-this._lastLogicalPoint.y,l=e.getMoveMode(t,i);l&&("x"===l?h=0:"y"===l?s=0:"xy"!==l&&(s=h=0)),e.moveSelection(s,h),this._lastLogicalPoint=a,this.autoScroll(t),this.fi(r)}},clear:function(t){var e=this.gv,i=e.getDataModel().getHistoryManager();this._lastLogicalPoint&&(this._lastLogicalPoint=this._data=e._moving=ot,this._logicalPoint&&(this.fi({kind:"endMove",event:t}),e.onMoveEnded(),i&&i.endInteraction()),this.clearDragging())}});var cc=$h.EditInteractor=function(t){ho(cc,this,[t])};Kh("EditInteractor",ac,{ms_edit:1,setUp:function(){cc.superClass.setUp.call(this),Nt||this.gv.setEditInteractor(this)},tearDown:function(){cc.superClass.tearDown.call(this),Nt||this.gv.setEditInteractor(ot)},clear:function(){var t=this,e=t.gv;e._editing&&(e._editing=t._77I=t._node=t._edge=t._shape=t._rect=t._89I=t._index=ot,t.clearDragging(),t.setCursor(Qt))},handle_mousedown:function(t){var e=this,i=e.gv.dm().getHistoryManager(),n=e._index,o=e._node,r=e._shape,a=e._edge,s=e._77I,h=e._89I;ys(t)&&e.gv._editing&&(o&&h?(e._rect=o.getRect(),e.startDragging(t),i&&i.beginInteraction(),e.fi({kind:"beginEditRect",event:t,data:o,direction:h})):r&&0<=n?(e.startDragging(t),i&&i.beginInteraction(),e.fi({kind:"beginEditPoint",event:t,data:r,index:n})):a&&0<=n?(e.startDragging(t),i&&i.beginInteraction(),e.fi({kind:"beginEditPoint",event:t,data:a,index:n})):s&&(e.startDragging(t),i&&i.beginInteraction(),e.fi({kind:"beginEditRotation",event:t,data:s})))},handleWindowMouseUp:function(t){this._46O(t),this.clear()},handleWindowMouseMove:function(t){this._78I(t)},handle_mousemove:function(t){if(!qo){var e=this.gv;this._79I(t,e.getSelectedDataAt(t))?e._editing=1:this.clear()}}});var uc=$h.TouchInteractor=function(t,e){(e=e||{}).selectable===N&&(e.selectable=!0),e.movable===N&&(e.movable=!0),e.pannable===N&&(e.pannable=!0),e.pinchable===N&&(e.pinchable=!0),e.editable===N&&(e.editable=!0),this.params=e,ho(uc,this,[t])};Kh("TouchInteractor",ac,{ms_edit:1,setUp:function(){uc.superClass.setUp.call(this),Nt&&this.params.editable&&this.gv.setEditInteractor(this)},tearDown:function(){uc.superClass.tearDown.call(this),Nt&&this.params.editable&&this.gv.setEditInteractor(ot)},clear:function(t){var e=this,i=e.gv,n=i.dm().getHistoryManager();i._moving&&(e.fi({kind:"endMove",event:t}),delete i._moving,i.onMoveEnded(),n&&n.endInteraction()),i._panning&&(e.fi({kind:"endPan",event:t}),delete i._panning,i.onPanEnded()),i._pinching&&(e.fi({kind:"endPinch",event:t}),delete i._pinching,i.onPinchEnded()),i._editing&&(e._46O(t),e._77I=e._node=e._edge=e._shape=e._rect=e._89I=e._index=i._editing=ot),e._moving=e._panning=e._pinching=e._editing=e._57I=e._data=e._beginHistory=ot,e.clearDragging()},handle_touchstart:function(t){var e=this;if(!e.gv._editing){os(t),e._57I=ot;var i=e.params,n=e.gv,o=n.sm(),r=n.getDataAt(t),a=ws(t);if(1===a)xs(t)?n.handleDoubleClick(t,r):(n.handleClick(t,r),r&&(n.handleMouseDown&&n.handleMouseDown(t,r),e._data=r)),i.selectable||(r=ot),r?(o.co(r)||o.ss(r),i.editable&&n.isEditable(r)&&e._79I(t,r,!0)?(e._editing=1,e.startDragging(t)):i.movable&&n.isMovable(r)&&(e._moving=1,e.startDragging(t))):(e._57I=Os(t),i.pannable&&n.isPannable()&&(e._panning=1,e.startDragging(t),e._translate={x:n.tx(),y:n.ty()}));else if(i.pinchable&&2===a){e._pinching=1,e.startDragging(t);var s=n.getView(),h=n.getZoom(),l=s.getBoundingClientRect(),c=t.touches[0],u=t.touches[1],d={x:(c.clientX+u.clientX)/2-l.left,y:(c.clientY+u.clientY)/2-l.top};d.x-=n.tx(),d.y-=n.ty(),d.x/=h,d.y/=h,e._p=d,e._d=Xr(t)}}},handle_touchend:function(t){var e=this.gv,i=this._57I,n=this._data;i&&(Ts(i,Os(t))<=1&&e.sm().cs(),this._57I=ot),n&&e.handleMouseUp&&e.handleMouseUp(t,n)},handleWindowTouchEnd:function(t){this.clear(t)},handleWindowTouchMove:function(t){var e=this,i=e.gv,n=i.dm().getHistoryManager(),o=ws(t);if(1===o){if(e._editing&&(n&&!e._beginHistory&&(e._beginHistory=1,n.beginInteraction()),i._editing=1,e._78I(t)),e._moving)n&&!e._beginHistory&&(e._beginHistory=1,n.beginInteraction()),e.handleMove(t);else if(e._panning){var r=Os(t);i.setTranslate(e._translate.x+r.x-e._lastClientPoint.x,e._translate.y+r.y-e._lastClientPoint.y),e.fi({kind:i._panning?"betweenPan":"beginPan",event:t}),i._panning=1}}else if(2===o&&e._pinching){var a=Xr(t);i.handlePinch(e._p,a,e._d),e._d=a,e.fi({kind:i._pinching?"betweenPinch":"beginPinch",event:t}),i._pinching=1}},handleMove:function(t){var e=this.gv,i=e.lp(t);e._93O&&e._93O(t,this._data)||(e.moveSelection(i.x-this._lastLogicalPoint.x,i.y-this._lastLogicalPoint.y),this._lastLogicalPoint=i,this.autoScroll(t),this.fi({kind:e._moving?"betweenMove":"beginMove",event:t}),e._moving=1)}});var dc="light.color";ro(st,{graph3dViewAttributes:ot,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:It/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:na,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:It/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(t,e){vn[t]=e},getShape3dModel:function(t){return vn[t]},createMatrix:function(t,e){Zn(t)||(t=[t]);for(var i=t.length-1;0<=i;i--){var n=t[i];e=ah(n.mat,n.s3,n.r3,n.rotationMode,n.t3,e)}return e},transformVec:function(t,e){return th(t,e)},createBoxModel:function(){return{vs:Gu,ns:Zu,uv:Yu,is:Xu}},createRoundRectModel:function(t,e){return sd.roundRect(t,e)},createStarModel:function(t,e){return sd.star(t,e)},createRectModel:function(t,e){return sd.rect(t,e)},createTriangleModel:function(t,e){return sd.triangle(t,e)},createRightTriangleModel:function(t,e){return sd.rightTriangle(t,e)},createParallelogramModel:function(t,e){return sd.parallelogram(t,e)},createTrapezoidModel:function(t,e){return sd.trapezoid(t,e)},createSmoothSphereModel:function(t,e,i,n,o,r,a){return il(new Bl(t,e,i,n,o,r,a))},createSphereModel:function(t,e,i,n,o,r){return t?Ku(t,e,i,n,o,r):st.createSmoothSphereModel()},createSmoothConeModel:function(t,e,i,n,o){return od(t,e,i,n,o)},createConeModel:function(t,e,i,n,o,r){return t?rd(t,e,i,n,o,r):od(r)},createSmoothCylinderModel:function(t,e,i,n,o,r,a,s){return il(new Ml(t,e,i,n,o,r,a,s))},createCylinderModel:function(t,e,i,n,o,r,a){return t?nd(t,e,i,n,o,r,a):id(r,a)},createSmoothTorusModel:function(t,e,i,n,o,r){return il(new Ll(t,e,i,n,o,r))},createTorusModel:function(t,e,i,n,o,r,a){return t?ed(t,e,i,n,o,r,a):td(r,a)},createExtrusionModel:function(t,e,i,n,o,r,a,s){return ad(t,e,i,n,o,r,a,s)},createSmoothRingModel:function(t,e,i,n,o,r){for(var a=[],s=0;s<t.length-1;s+=2)a.push({x:t[s],y:t[s+1]});for(t=Er(a,e,i)[0],a=[],s=0;s<t.length;s++){var h=t[s];a.push(new al(h.x,0,h.y))}return il(new Fl(a,r,n,o))},createRingModel:function(t,e,i,n,o,r,a,s,h,l){for(var c=[],u=0;u<t.length-1;u+=2)c.push({x:t[u],y:t[u+1]});r=r||st.shapeSide,a=a||0,s=s||r;var d,f,g,_,v,p,b,m,y,w,x,C,I,O,S,T,V,D=[],E=[],k=h?[]:ot,P=h?[]:ot,M=l?[]:ot,B=l?[]:ot,L=n?[]:ot,j=n?[]:ot,R=o?[]:ot,z=o?[]:ot,F=(t=Er(c,e,i),xo(t)),A=0,W=2*Math.PI/r;return t.forEach(function(t){if(1<(g=t.length)){if(_=t[0],n)for(p=_.x,m=_.y,u=a;u<s;u++)I=(x=u+1)*W,O=mt(C=u*W),S=wt(C),T=mt(I),V=wt(I),L.push(O*p,m,-S*p,T*p,m,-V*p,0,m,0),j.push(.5-.5*O,.5-.5*S,.5-.5*T,.5-.5*V,.5,.5);for(w=0;w<g;w++){for(v=t[w],p=_.x,b=v.x,m=_.y,y=v.y,d=A/F,A+=Ts(_,v),f=A/F,u=a;u<s;u++)I=(x=u+1)*W,O=mt(C=u*W),S=wt(C),T=mt(I),V=wt(I),D.push(O*b,y,-S*b,T*b,y,-V*b,O*p,m,-S*p,T*b,y,-V*b,T*p,m,-V*p,O*p,m,-S*p),E.push(u/r,f,x/r,f,u/r,d,x/r,f,x/r,d,u/r,d),h&&u===a&&(k.push(0,m,0,0,y,0,O*b,y,-S*b,O*b,y,-S*b,O*p,m,-S*p,0,m,0),P.push(0,.5-m,0,.5-y,2*b,.5-y,2*b,.5-y,2*p,.5-m,0,.5-m)),l&&x===s&&(M.push(0,m,0,T*b,y,-V*b,0,y,0,T*b,y,-V*b,0,m,0,T*p,m,-V*p),B.push(1,.5-m,1-2*b,.5-y,1,.5-y,1-2*b,.5-y,1,.5-m,1-2*p,.5-m));_=v}if(o)for(p=_.x,m=_.y,u=a;u<s;u++)I=(x=u+1)*W,O=mt(C=u*W),S=wt(C),T=mt(I),V=wt(I),R.push(T*p,m,-V*p,O*p,m,-S*p,0,m,0),z.push(.5-.5*T,.5+.5*V,.5-.5*O,.5+.5*S,.5,.5)}}),{vs:D,uv:E,bottom_vs:R,bottom_uv:z,top_vs:L,top_uv:j,from_vs:k,from_uv:P,to_vs:M,to_uv:B}}},!0),ro(ht,{"3d.move.mode":N,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":N,"edge.gradient.color":N,"edge.source.t3":N,"edge.target.t3":N,"light.type":"point","light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":It/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":va,"wf.short":!1,"wf.mat":N,batch:N,"transparent.mask":!1,brightness:N,"select.brightness":.7,"repeat.uv.length":N,"label.face":Yt,"label.t3":N,"label.r3":N,"label.texture.scale":2,"label.rotationMode":Ul,"label.light":!1,"label.blend":N,"label.reverse.flip":!1,"label.reverse.color":ea,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":Yt,"label2.t3":N,"label2.r3":N,"label2.texture.scale":2,"label2.rotationMode":Ul,"label2.light":!1,"label2.blend":N,"label2.reverse.flip":!1,"label2.reverse.color":ea,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":Yt,"note.t3":N,"note.r3":N,"note.texture.scale":2,"note.rotationMode":Ul,"note.light":!1,"note.blend":N,"note.reverse.flip":!1,"note.reverse.color":ea,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":Yt,"note2.t3":N,"note2.r3":N,"note2.texture.scale":2,"note2.rotationMode":Ul,"note2.light":!1,"note2.blend":N,"note2.reverse.flip":!1,"note2.reverse.color":ea,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:N,"shape3d.color":ga,"shape3d.top.color":N,"shape3d.bottom.color":N,"shape3d.from.color":N,"shape3d.to.color":N,"shape3d.image":N,"shape3d.top.image":N,"shape3d.bottom.image":N,"shape3d.from.image":N,"shape3d.to.image":N,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":N,"shape3d.side.to":N,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":N,"shape3d.opacity":N,"shape3d.reverse.flip":!1,"shape3d.reverse.color":ea,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":N,"shape3d.uv.scale":N,"shape3d.top.uv.offset":N,"shape3d.top.uv.scale":N,"shape3d.bottom.uv.offset":N,"shape3d.bottom.uv.scale":N,"shape3d.from.uv.offset":N,"shape3d.from.uv.scale":N,"shape3d.to.uv.offset":N,"shape3d.to.uv.scale":N,"shape3d.top.cap":N,"shape3d.bottom.cap":N,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":ga,"all.image":N,"all.blend":N,"all.opacity":N,"all.reverse.flip":!1,"all.reverse.color":ea,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":N,"all.uv.offset":N,"all.uv.scale":N,"all.discard.selectable":!0,mat:N,"left.mat":N,"right.mat":N,"top.mat":N,"bottom.mat":N,"front.mat":N,"back.mat":N},!0);var fc,gc=!1,_c=[0,0,0,1/255],vc={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:Zt,2:Jt,3:$t,4:Kt,5:Yt,6:qt}},pc=function(t,e,i,n){if(e.getFaceVisible(t,i)){hu(e,rh(t,e.getFaceMat(t,i)||e.getMat(t)));var o=e._26I;e.getFaceReverseCull(t,i)?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),nu(o,e._prg.uFixPickReverseColor,vc[i]),Zc(o),tu(o,n,6),Jc(o),au(e)}},bc=function(t){return t instanceof Cd},mc=function(t){return[t.x,t.e||0,t.y]},yc=function(t,e,i){for(var n=(e=Ir(e))[0],o=e[1],r=e[2];i--;)t.push(n,o,r)},wc=function(t,e,i){for(var n=(e=Ir(e))[0],o=e[1],r=e[2],a=e[3];i--;)t.push(n,o,r,a)},xc=function(t,e,i){if(e){var n,o,r,a=e[0],s=e[1],h=e[2],l=e[4],c=e[5],u=e[6],d=e[8],f=e[9],g=e[10],_=e[12],v=e[13],p=e[14],b=i.length,m=0;for(m=0;m<b;m+=3)n=i[m],o=i[m+1],r=i[m+2],t.push(a*n+l*o+d*r+_,s*n+c*o+f*r+v,h*n+u*o+g*r+p)}else no(t,i)},Cc=function(t,e){var i=e.s("light.intensity"),n=Ir(e.s(dc)),o=n[0],r=n[1],a=n[2];1!==i&&(o*=i,r*=i,a*=i),t.push(o,r,a,e.s("light.disabled")?1:0)},Ic=function(t){return 0<t&&0==(t-1&t)},Oc=function(t){return t=vt(0,pt(It,t)),vt(Gs,pt(It-Gs,t))},Sc=function(){return.05+Dt()/2},Tc=function(t,e,i,n){var o,r=t.getEye();return t.isOrtho()?((o=qs(t.getCenter(),r))[0]+=n[0],o[1]+=n[1],o[2]+=n[2]):o=r,Vc(e,i,n,o)},Vc=function(t,e,i,n){var o=Zs(t,e),r=qs(n,i,!0),a=Zs(r,e);if(bt(a)<Gs)return ot;var s=(o-Zs(i,e))/a;return[i[0]+r[0]*s,i[1]+r[1]*s,i[2]+r[2]*s]},Dc=function(t,e){return{x:2*t.x-e.x,y:2*t.y-e.y}},Ec=function(t,e,i,n){var o,r;if(!t)return o=Vt(e.y-i.y,i.x-e.x),{x:e.x+n*wt(o),y:e.y+n*mt(o)};if(!i)return o=Vt(t.y-e.y,e.x-t.x),{x:e.x+n*wt(o),y:e.y+n*mt(o)};var a=qs([t.x,t.y,0],[e.x,e.y,0],!0),s=qs([i.x,i.y,0],[e.x,e.y,0],!0),h=-(a[0]+s[0])/2,l=-(a[1]+s[1])/2,c=_t(h*h+l*l);return c<Gs?(o=Vt(t.y-e.y,e.x-t.x),{x:e.x+n*wt(o),y:e.y+n*mt(o)}):(o=yt(Zs(a,s))/2,r=0<a[1]*s[0]-a[0]*s[1]?-1:1,h/=c,l/=c,c=n/wt(o),{x:e.x+r*c*h,y:e.y+r*c*l})},kc=function(t,e){if(e){var i=e[0],n=e[1],o=e[2];t[12]=t[0]*i+t[4]*n+t[8]*o+t[12],t[13]=t[1]*i+t[5]*n+t[9]*o+t[13],t[14]=t[2]*i+t[6]*n+t[10]*o+t[14],t[15]=t[3]*i+t[7]*n+t[11]*o+t[15]}},Pc=function(t,e){if(e){var i=e[0],n=e[1],o=e[2];t[0]=t[0]*i,t[1]=t[1]*i,t[2]=t[2]*i,t[3]=t[3]*i,t[4]=t[4]*n,t[5]=t[5]*n,t[6]=t[6]*n,t[7]=t[7]*n,t[8]=t[8]*o,t[9]=t[9]*o,t[10]=t[10]*o,t[11]=t[11]*o}},Mc=function(t,e,i){var n=e[0],o=e[1],r=e[2],a=e[3],s=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],g=e[11],_=e[12],v=e[13],p=e[14],b=e[15],m=i[0],y=i[1],w=i[2],x=i[3];return t[0]=m*n+y*s+w*u+x*_,t[1]=m*o+y*h+w*d+x*v,t[2]=m*r+y*l+w*f+x*p,t[3]=m*a+y*c+w*g+x*b,m=i[4],y=i[5],w=i[6],x=i[7],t[4]=m*n+y*s+w*u+x*_,t[5]=m*o+y*h+w*d+x*v,t[6]=m*r+y*l+w*f+x*p,t[7]=m*a+y*c+w*g+x*b,m=i[8],y=i[9],w=i[10],x=i[11],t[8]=m*n+y*s+w*u+x*_,t[9]=m*o+y*h+w*d+x*v,t[10]=m*r+y*l+w*f+x*p,t[11]=m*a+y*c+w*g+x*b,m=i[12],y=i[13],w=i[14],x=i[15],t[12]=m*n+y*s+w*u+x*_,t[13]=m*o+y*h+w*d+x*v,t[14]=m*r+y*l+w*f+x*p,t[15]=m*a+y*c+w*g+x*b,t},Bc=function(t,e,i,n){var o,r,a,s,h,l,c,u,d,f,g,_=e[0],v=e[1],p=e[2],b=n[0],m=n[1],y=n[2],w=i[0],x=i[1],C=i[2];return bt(_-w)<Gs&&bt(v-x)<Gs&&bt(p-C)<Gs?((g=t)[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g):(f=1/_t((c=_-w)*c+(u=v-x)*u+(d=p-C)*d),(f=_t((o=m*(d*=f)-y*(u*=f))*o+(r=y*(c*=f)-b*d)*r+(a=b*u-m*c)*a))?(o*=f=1/f,r*=f,a*=f):a=r=o=0,(f=_t((s=u*a-d*r)*s+(h=d*o-c*a)*h+(l=c*r-u*o)*l))?(s*=f=1/f,h*=f,l*=f):l=h=s=0,t[0]=o,t[1]=s,t[2]=c,t[3]=0,t[4]=r,t[5]=h,t[6]=u,t[7]=0,t[8]=a,t[9]=l,t[10]=d,t[11]=0,t[12]=-(o*_+r*v+a*p),t[13]=-(s*_+h*v+l*p),t[14]=-(c*_+u*v+d*p),t[15]=1,t)},Lc=function(t,e){return Bc(e||Js(),t._eye,t._center,t._up)},jc=function(t){var e,i,n,o,r,a,s,h,l,c,u,d,f,g,_,v,p,b=t.getAspect(),m=t._near,y=t._far,w=Js();if(t._ortho){var x=t._orthoWidth/2,C=x/b;_=1/((l=-x)-(c=x)),v=1/((u=-C)-(d=C)),p=1/((f=m)-(g=y)),(h=w)[0]=-2*_,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*v,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*p,h[11]=0,h[12]=(l+c)*_,h[13]=(d+u)*v,h[14]=(g+f)*p,h[15]=1}else e=w,i=t._fovy,n=b,o=m,r=y,a=1/Tt(i/2),s=1/(o-r),e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+o)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*o*s,e[15]=0;return w},Rc=function(t,e){if(!t)return ot;var i=[],n=0,o=t.length,r=o/3;if(e){for(;n<o;n++)i[n]=0;for(n=0;n<e.length;n+=3){var a=[],s=[];(l=[])[0]=t[3*e[n+1]+0]-t[3*e[n]+0],l[1]=t[3*e[n+1]+1]-t[3*e[n]+1],l[2]=t[3*e[n+1]+2]-t[3*e[n]+2],a[0]=t[3*e[n+2]+0]-t[3*e[n+1]+0],a[1]=t[3*e[n+2]+1]-t[3*e[n+1]+1],a[2]=t[3*e[n+2]+2]-t[3*e[n+1]+2],s[0]=l[1]*a[2]-l[2]*a[1],s[1]=l[2]*a[0]-l[0]*a[2],s[2]=l[0]*a[1]-l[1]*a[0];for(var h=0;h<3;h++)i[3*e[n+h]+0]+=s[0],i[3*e[n+h]+1]+=s[1],i[3*e[n+h]+2]+=s[2]}}else for(n=0;n<r;n+=3){var l;a=[],s=[];(l=[])[0]=t[3*(n+1)+0]-t[3*n+0],l[1]=t[3*(n+1)+1]-t[3*n+1],l[2]=t[3*(n+1)+2]-t[3*n+2],a[0]=t[3*(n+2)+0]-t[3*(n+1)+0],a[1]=t[3*(n+2)+1]-t[3*(n+1)+1],a[2]=t[3*(n+2)+2]-t[3*(n+1)+2],s[0]=l[1]*a[2]-l[2]*a[1],s[1]=l[2]*a[0]-l[0]*a[2],s[2]=l[0]*a[1]-l[1]*a[0];for(h=0;h<3;h++)i[3*(n+h)+0]=s[0],i[3*(n+h)+1]=s[1],i[3*(n+h)+2]=s[2]}for(n=0;n<o;n+=3){var c=[];c[0]=i[n+0],c[1]=i[n+1],c[2]=i[n+2];var u=_t(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);0===u&&(u=Gs),c[0]=c[0]/u,c[1]=c[1]/u,c[2]=c[2]/u,i[n+0]=c[0],i[n+1]=c[1],i[n+2]=c[2]}return new Ys(i)},zc=function(t,e,i){if(i||(i=t.createTexture()),e){var n=t.TEXTURE_2D,o=t.LINEAR,r=t.REPEAT,a=t.CLAMP_TO_EDGE,s=t.TEXTURE_MIN_FILTER;Hc(t,i),t.texImage2D(n,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),Nc(t,t.TEXTURE_MAG_FILTER,o),Ic(e.width)&&Ic(e.height)?(Nc(t,t.TEXTURE_WRAP_S,r),Nc(t,t.TEXTURE_WRAP_T,r),Nc(t,s,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(n)):(Nc(t,t.TEXTURE_WRAP_S,a),Nc(t,t.TEXTURE_WRAP_T,a),Nc(t,s,o)),Hc(t,ot)}return i},Fc=function(t){t._26I&&t._prg&&(t._26I.deleteProgram(t._prg),t._prg=ot)},Ac=function(t,e,i,n){var o=t.createShader(i);return t.shaderSource(o,n),t.compileShader(o),t.attachShader(e,o),o},Wc=function(t){return t.createBuffer()},Hc=function(t,e){t.bindTexture(t.TEXTURE_2D,e)},Uc=function(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e)},Nc=function(t,e,i){t.texParameteri(t.TEXTURE_2D,e,i)},Qc=function(t,e){if(e){e=Ir(e);t.clearColor(e[0],e[1],e[2],e[3])}},Gc=function(t,e){nu(t,e.uFix,!0),ru(t,e.aNormal)},Xc=function(t,e){nu(t,e.uFix,!1),ou(t,e.aNormal)},Yc=function(t,e,i,n,o,r,a,s){t._picking||(i?(nu(t,e.uBlend,!0),nu(t,e.uBlendColor,i)):nu(t,e.uBlend,!1),nu(t,e.uLight,n==ot||n),Gn(o)&&1!==o&&nu(t,e.uPartOpacity,o),nu(t,e.uReverseFlip,r!=ot&&r),nu(t,e.uFixPickReverseColor,a||ea)),s?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE)},qc=function(t,e){t._picking||nu(t,e.uPartOpacity,1)},Zc=function(t,e,i,n,o,r,a,s){if(i){nu(t,e.uTexture,!0),nu(t,e.uDiscardSelectable,!Xn(n)||n),ou(t,e.aUv),eu(t,o,r,e.aUv,2),t.activeTexture(t.TEXTURE0),Hc(t,i),t.uniform1i(e.uSampler,0);var h=[0,0,1,1];a&&(h[0]=a[0],h[1]=a[1]),s&&(h[2]=s[0],h[3]=s[1]),nu(t,e.uOffsetScale,h)}else Hc(t,t._emptyTexture)},Jc=function(t,e,i){Hc(t,ot),i&&(ru(t,e.aUv),nu(t,e.uTexture,!1))},$c=function(t,e,i,n,o,r){i&&!At&&t.lineWidth(i),n&&!t._picking&&nu(t,e.uFixPickReverseColor,n),o&&eu(t,o,r,e.aPosition)},Kc=function(t,e,i,n){fc&&(n=t[fc]),t.drawArrays(n==ot?t.TRIANGLES:n,e,i)},tu=function(t,e,i,n){fc&&(n=t[fc]),t.drawElements(n==ot?t.TRIANGLES:n,i,t.UNSIGNED_SHORT,e==ot?0:2*e)},eu=function(t,e,i,n,o){var r=t.ARRAY_BUFFER;t.bindBuffer(r,e),i&&t.bufferData(r,i,t.STATIC_DRAW),n!=ot&&t.vertexAttribPointer(n,o||3,t.FLOAT,!1,0,0)},iu=function(t,e,i){var n=t.ELEMENT_ARRAY_BUFFER;t.bindBuffer(n,e),i&&t.bufferData(n,i,t.STATIC_DRAW)},nu=function(t,e,i){if(i!=ot&&e!=ot){var n=(i=Ir(i)).length;3===n?t.uniform3fv(e,i):4===n?t.uniform4fv(e,i):16===n?t.uniformMatrix4fv(e,!1,i):Xn(i)?t.uniform1i(e,i?1:0):2===n?t.uniform2fv(e,i):t.uniform1f(e,i)}},ou=function(t,e){e!=ot&&0<=e&&t.enableVertexAttribArray(e)},ru=function(t,e){e!=ot&&0<=e&&t.disableVertexAttribArray(e)},au=function(t,e){var i=t.getGL(),n=t._prg;t._7O=t._8O.pop(),e&&(nu(i,n.uMVMatrix,t._7O),t._6O=e,nu(i,n.uNMatrix,e))},su=function(t,e){return e||(e=Js()),A=t,(F=e)[0]=A[0],F[1]=A[1],F[2]=A[2],F[3]=A[3],F[4]=A[4],F[5]=A[5],F[6]=A[6],F[7]=A[7],F[8]=A[8],F[9]=A[9],F[10]=A[10],F[11]=A[11],F[12]=A[12],F[13]=A[13],F[14]=A[14],F[15]=A[15],c=(l=e)[0],u=l[1],d=l[2],f=l[3],g=l[4],_=l[5],v=l[6],p=l[7],b=l[8],m=l[9],y=l[10],w=l[11],x=l[12],C=l[13],I=l[14],O=l[15],(z=(S=c*_-u*g)*(R=y*O-w*I)-(T=c*v-d*g)*(j=m*O-w*C)+(V=c*p-f*g)*(L=m*I-y*C)+(D=u*v-d*_)*(B=b*O-w*x)-(E=u*p-f*_)*(M=b*I-y*x)+(k=d*p-f*v)*(P=b*C-m*x))&&(z=1/z,l[0]=(_*R-v*j+p*L)*z,l[1]=(d*j-u*R-f*L)*z,l[2]=(C*k-I*E+O*D)*z,l[3]=(y*E-m*k-w*D)*z,l[4]=(v*B-g*R-p*M)*z,l[5]=(c*R-d*B+f*M)*z,l[6]=(I*V-x*k-O*T)*z,l[7]=(b*k-y*V+w*T)*z,l[8]=(g*j-_*B+p*P)*z,l[9]=(u*B-c*j-f*P)*z,l[10]=(x*E-C*V+O*S)*z,l[11]=(m*V-b*E-w*S)*z,l[12]=(_*M-g*L-v*P)*z,l[13]=(c*L-u*M+d*P)*z,l[14]=(C*T-x*D-I*S)*z,l[15]=(b*D-m*T+y*S)*z),n=(i=e)[1],o=i[2],r=i[3],a=i[6],s=i[7],h=i[11],i[1]=i[4],i[2]=i[8],i[3]=i[12],i[4]=n,i[6]=i[9],i[7]=i[13],i[8]=o,i[9]=a,i[11]=i[14],i[12]=r,i[13]=s,i[14]=h,e;var i,n,o,r,a,s,h,l,c,u,d,f,g,_,v,p,b,m,y,w,x,C,I,O,S,T,V,D,E,k,P,M,B,L,j,R,z,F,A},hu=function(t,e){var i=t.getGL(),n=t._prg,o=t._7O;e&&(t._8O.push(Ks(o)),Mc(o,o,e)),nu(i,n.uMVMatrix,o),nu(i,n.uNMatrix,su(o,t._6O))},lu=function(t,e,i,n,o,r){if(i){if(n){var a=i.value++,s=[(255&a>>24)/255,(255&a>>16)/255,(255&a>>8)/255,(255&a)/255];i[a]={data:o,part:r}}else s=_c;return nu(t,e.uFixPickReverseColor,s),s}},cu=(s={center:function(t,e,i,n,o){var r=e[1]/2,a={x:-e[0]/2,y:r,width:e[0],height:e[1]},s=ta(t,a,i);return[s.x+n,2*r-s.y-o,Sc()]},front:function(t,e,i,n,o){var r=e[1]/2,a={x:-e[0]/2,y:r,width:e[0],height:e[1]},s=ta(t,a,i);return[s.x+n,2*r-s.y-o,e[2]/2+Sc()]},back:function(t,e,i,n,o){var r=e[0]/2,a=e[1]/2,s={x:r,y:a,width:e[0],height:e[1]},h=ta(t,s,i);return[2*r-h.x-n,2*a-h.y-o,-e[2]/2-Sc()]},left:function(t,e,i,n,o){var r=e[1]/2,a={x:-e[2]/2,y:r,width:e[2],height:e[1]},s=ta(t,a,i);return[-e[0]/2-Sc(),2*r-s.y-o,s.x+n]},right:function(t,e,i,n,o){var r=e[2]/2,a=e[1]/2,s={x:r,y:a,width:e[2],height:e[1]},h=ta(t,s,i);return[e[0]/2+Sc(),2*a-h.y-o,2*r-h.x-n]},top:function(t,e,i,n,o){var r={x:-e[0]/2,y:-e[2]/2,width:e[0],height:e[2]},a=ta(t,r,i);return[a.x+n,e[1]/2+Sc(),a.y+o]},bottom:function(t,e,i,n,o){var r=e[2]/2,a={x:-e[0]/2,y:r,width:e[0],height:e[2]},s=ta(t,a,i);return[s.x+n,-e[1]/2-Sc(),2*r-s.y-o]}},function(t,e,i,n,o,r){return s[n](t,e,i,o||0,r||0)}),uu=function(t,e,i,n,o,r,a,s,h,l){if(o&&(e[0]+=o[0],e[1]+=o[1],e[2]+=o[2]),kc(t,i),s){var c=Js();if(Nl(c,h,l),th(e,c),kc(t,e),t.auto=s,t.pos=th([0,0,0],t),r){var u=t.mat2=Js();Nl(u,r,a)}}else Nl(t,h,l),kc(t,e),n===Zt?nh(t,-St):n===Jt?nh(t,St):n===$t?ih(t,-St):n===Kt?ih(t,St):n===qt&&nh(t,It),Nl(t,r,a);return t},du=function(t,e){var i,n,o,r,a,s,h,l,c,u,d,f,g,_,v,p,b,m,y,w,x,C,I,O,S,T,V,D,E,k,P,M=e.auto,B=e.mat2,L=t.gv;if(M){var j,R=Js(),z=[0,0,0,0];j="string"==typeof M?[M.indexOf("x")<0?L._eye[0]:L._center[0],M.indexOf("y")<0?L._eye[1]:L._center[1],M.indexOf("z")<0?L._eye[2]:L._center[2]]:L._eye,D=z,E=Bc(Js(),j,L._center,L._up),k=E[0]+E[5]+E[10],(P=0)<k?(P=2*Math.sqrt(k+1),D[3]=.25*P,D[0]=(E[6]-E[9])/P,D[1]=(E[8]-E[2])/P,D[2]=(E[1]-E[4])/P):E[0]>E[5]&E[0]>E[10]?(P=2*Math.sqrt(1+E[0]-E[5]-E[10]),D[3]=(E[6]-E[9])/P,D[0]=.25*P,D[1]=(E[1]+E[4])/P,D[2]=(E[8]+E[2])/P):E[5]>E[10]?(P=2*Math.sqrt(1+E[5]-E[0]-E[10]),D[3]=(E[8]-E[2])/P,D[0]=(E[1]+E[4])/P,D[1]=.25*P,D[2]=(E[6]+E[9])/P):(P=2*Math.sqrt(1+E[10]-E[0]-E[5]),D[3]=(E[1]-E[4])/P,D[0]=(E[8]+E[2])/P,D[1]=(E[6]+E[9])/P,D[2]=.25*P),i=R,C=(x=w=z)[0],I=x[1],O=x[2],S=x[3],V=(T=C*C+I*I+O*O+S*S)?1/T:0,w[0]=-C*V,w[1]=-I*V,w[2]=-O*V,w[3]=S*V,n=w,o=e.pos,r=n[0],a=n[1],s=n[2],h=n[3],d=r*(l=r+r),f=r*(c=a+a),g=r*(u=s+s),_=a*c,v=a*u,p=s*u,b=h*l,m=h*c,y=h*u,i[0]=1-(_+p),i[1]=f+y,i[2]=g-m,i[3]=0,i[4]=f-y,i[5]=1-(d+p),i[6]=v+b,i[7]=0,i[8]=g+m,i[9]=v-b,i[10]=1-(d+_),i[11]=0,i[12]=o[0],i[13]=o[1],i[14]=o[2],i[15]=1,B&&Mc(R,R,B),hu(L,R)}else hu(L,e)},fu=function(t,e,i,n,o){var r=t.s,a=t.gv,s=a.getGL(),h=a._prg,l=a._buffer,c=a._1O;zc(s,yr,c),du(t,i),Yc(s,h,r(e+".blend"),r(e+".light"),r(e+".opacity"),r(e+".reverse.flip"),r(e+".reverse.color"),r(e+".reverse.cull")),Zc(s,h,c,o,l.uv,Uu),eu(s,l.vs,n,h.aPosition),eu(s,l.ns,Nu,h.aNormal),iu(s,l.is,Qu),tu(s,0,Qu.length),Jc(s,h,c),qc(s,h),au(a)},gu=function(t,e,i){var n=t.gv,o=t.data,r=t[e]={blend:n.getBodyColor(o)||n.getFaceBlend(o,e),light:n.getFaceLight(o,e),color:n.getFaceColor(o,e),opacity:n.getFaceOpacity(o,e),transparent:n.getFaceTransparent(o,e),reverseFlip:n.getFaceReverseFlip(o,e),reverseColor:n.getFaceReverseColor(o,e),reverseCull:n.getFaceReverseCull(o,e),texture:n.getFaceImage(o,e),discardSelectable:n.getFaceDiscardSelectable(o,e)};if("csg"!==e){r.uv=n.getFaceUv(o,e)||i&&i[e+"Uv"],r.uvScale=n.getFaceUvScale(o,e)||i&&i[e+"UvScale"],r.uvOffset=n.getFaceUvOffset(o,e)||i&&i[e+"UvOffset"];var a=n.getFaceMat(o,e);a&&(r.mat=rh(o,a))}return r},_u=function(t,e,i,n,o){if(n){if(!o(n.transparent))return;var r=t.data,a=t.gv,s=a._buffer,h=a.getTexture(n.texture,r);Zc(e,i,h,n.discardSelectable,s.uv,n.tuv,n.uvOffset,n.uvScale),Yc(e,i,n.blend,n.light,n.opacity,n.reverseFlip,n.reverseColor,n.reverseCull),nu(e,i.uDiffuse,n.color),eu(e,s.vs,n.vs,i.aPosition),eu(e,s.ns,n.ns,i.aNormal),Kc(e,0,n.vs.length/3),qc(e,i),Jc(e,i,h)}},vu=function(t,e,i,n,o,r){var a,s,h,l,c,u,d,f,g,_,v=[n-e,o-i],p=t?t.length:0;for(s=0;s<p;s++){for(h=2,l=(a=t[s])[0],c=a[1];h+1<a.length;){if(u=a[h],d=a[h+1],vo(e,i,n,o,l,c,u,d,!0)){g=Ts(f=[u-l,d-c]),f[0]/=g,f[1]/=g,g=0<(g=Zs(v,f))?r:-r,_=[f[0]*g,f[1]*g];break}l=u,c=d,h+=2}if(_)break}if(_)for(n=e+_[0],o=i+_[1],s=0;s<p;s++)for(h=2,l=(a=t[s])[0],c=a[1];h+1<a.length;){if(u=a[h],d=a[h+1],vo(e,i,n,o,l,c,u,d,!0))return[0,0];l=u,c=d,h+=2}return _||[n-e,o-i]},pu=rt.graph3d={},bu=function(t,e,i){Us("ht.graph3d."+t,e,i)},mu="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh\v!gjeof$!\v~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj\v!ITBE!gfegj$!\v\v!gjeof$!\v~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~\v!gjeof$!\v~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg\v!1!?!SJE`YBN!gj$!\v<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw\v!gjeof$!\v<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov\v!ITBE!gfegj$!\v\v!gjeof$!\v<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov\v!1!?!SJE`YBN!gj$!\v\v!gjeof$!\v<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov\v!SPMPDIDUBC!gfegj$!\v<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",yu="~~<eJ!>!spmpDhbsG`mh\v!gjeof$!\v~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj\v!TTFOUIHJSCIDUBC!gfegj$!\v~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~\v!gjeof$!\v<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg\v!HPG!gfegj$!\v\v!gjeof$!\v~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg\v!1!?!SJE`YBN!gj$!\v~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~\v!gjeof$!\v~<spmpDeofmCv!>+!eJ|*eofmCv)gj\v!ftmf$!\v~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj\v!EOFMCIDUBC!gfegj$!\v~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw\v!gjeof$!\v<ftvggjEv!>!spmpd\v!ftmf$!\v~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v<spmpd!5dfw|!ftmf~\v!gjeof$!\v~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj\v!ITBE!gfegj$!\v\v!gjeof$!\v<spmpDftsfwfSldjQyjGv!>!eJ\v!ftmf$!\v~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v|*yjGv)gj<eJ!5dfw|ftmf~\v!gjeof$!\v<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh\v!ftmf$!\v~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw\v!gjeof$!\v<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov\v!ITBE!gfegj$!\v\v!gjeof$!\v<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov\v!HPG!gfegj$!\v\v!gjeof$!\v<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov\v!1!?!SJE`YBN!gj$!\v\v!gjeof$!\v<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov\v!SPMPDIDUBC!gfegj$!\v<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ\v!gjeof$!\v\v!gjeof$!\v\v!<ubpmg!qnvjefn!opjtjdfsq!\v\v!ftmf$!\v\v!<ubpmg!qihji!opjtjdfsq!\v\v!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!\v\v!TF`MH!gfegj$!\v";ro(st,{setBatchInfo:function(t,e){_n[t]=e},getBatchInfo:function(t){return _n[t]}},!0);var wu=[1,1,1],xu=[1,0,0,0,0,1,0,1,1,1,1,0],Cu=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],Iu=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Ou=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Su=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],Tu=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],Vu=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],Du=function(t,e){Eu(t,e),ku(t,e,"_wireframeModelMap","_wireframeIndexMap"),ku(t,e,"_polylineModelMap","_polylineIndexMap")},Eu=function(t,e){if(e){var i,n,o=e._id,r=t._33O,a=t._34O,s=a[o];if(s){i=r[n=s.batch];var h=s.begin,l=s.size,c=3*h,u=3*l,d=4*h,f=4*l,g=i.vs,_=i.uv,v=i.cs,p=i.bs,b=i.rs,m=i.ds,y=s.index;if(i.invalidate=!0,delete a[o],m.splice(y,1),co(m))delete r[n];else{for(;y<m.length;y++)(s=a[m[y]._id]).index--,s.begin-=l;g.splice(c,u),i.ns.splice(c,u),i.ps.splice(d,f),_&&_.splice(2*h,2*l),v&&v.splice(d,f),p&&p.splice(c,u),b&&b.splice(h,l)}}}else t._34O={},t._33O={}},ku=function(t,e,i,n){if(e){var o,r,a=e._id,s=t[i],h=t[n],l=h[a];if(l){o=s[r=l.batch];var c=l.begin,u=l.size,d=3*c,f=3*u,g=4*c,_=4*u,v=o.ds,p=l.index;if(o.invalidate=!0,delete h[a],v.splice(p,1),co(v))delete s[r];else{for(;p<v.length;p++)(l=h[v[p]._id]).index--,l.begin-=u;o.vs.splice(d,f),o.cs.splice(g,_),o.ps.splice(g,_),o.ls&&o.ls.splice(c,u)}}}else t[i]={},t[n]={}},Pu=function(t,e){return e!=ot&&1!==e?[t[0]*e,t[1]*e,t[2]*e,t[3]]:t},Mu=function(t,e,i){if(e)for(var n=4*e.begin,o=i[e.batch].ps,r=0;r<e.size;r++)o[n++]=t[0],o[n++]=t[1],o[n++]=t[2],o[n++]=t[3]},Bu=function(t,e){var i=e+["32"],n=t[e],o=t[i];n?o&&o.length===n.length?o.set(n):t[i]=new Ys(n):delete t[i]},Lu=function(e,i,t,n,o,r,a,s,h){if(Zn(t))t.forEach(function(t){Lu(e,i,t,n,o,r,a,s,h)});else if(Qn(t))Lu(e,i,vd(n,t),n,o,r,a,s,h);else if(Yn(t)){var l,c=bh(t.mat,i,e),u=bh(t.s3,i,e),d=bh(t.t3,i,e),f=bh(t.r3,i,e);if((u||f||d||c)&&(l=ah(c,u,f,bh(t.rotationMode,i,e),d),r.push(l)),t.shape3d)Lu(e,i,t.shape3d,n,o,r,a,s,t);else{h=h||Cn;var g=r[0],_=r.length,v=n("shape3d.color",t.color,h.color);if(o||(o=n("shape3d.blend",t.blend,h.blend)),1<_){g=Ks(g);for(var p=1;p<_;p++)Mc(g,g,r[p])}t.vs&&n(Oi,t.visible,h.visible)&&ju(g,a,s,t.vs,t.uv,t.is,o,v),t.top_vs&&n(Vi,t.topVisible,h.topVisible)&&ju(g,a,s,t.top_vs,t.top_uv,t.top_is,o,n("shape3d.top.color",t.topColor,h.topColor)||v),t.bottom_vs&&n(Di,t.bottomVisible,h.bottomVisible)&&ju(g,a,s,t.bottom_vs,t.bottom_uv,t.bottom_is,o,n("shape3d.bottom.color",t.bottomColor,h.bottomColor)||v),t.from_vs&&n(Si,t.fromVisible,h.fromVisible)&&ju(g,a,s,t.from_vs,t.from_uv,t.from_is,o,n("shape3d.from.color",t.fromColor,h.fromColor)||v),t.to_vs&&n(Ti,t.toVisible,h.toVisible)&&ju(g,a,s,t.to_vs,t.to_uv,t.to_is,o,n("shape3d.to.color",t.toColor,h.toColor)||v)}l&&r.pop()}},ju=function(t,e,i,n,o,r,a,s){var h,l=e.cs,c=e.uv,u=e.bs;if(r){h=r.length;for(var d=0;d<h;d++){var f=r[d];xc(i,t,[n[3*f],n[3*f+1],n[3*f+2]]),c&&no(c,[o[2*f],o[2*f+1]])}}else h=n.length/3,xc(i,t,n),c&&no(c,o);l&&wc(l,s,h),u&&(a?yc(u,a,h):no(u,wu,h))},Ru=function(t,e,i,n){var o=[];n?Lu(t.gv,t.data,n,t.s,t.getBodyColor(),[e],i,o):(zu(t,Zt,e,i,o),zu(t,Jt,e,i,o),zu(t,Yt,e,i,o),zu(t,qt,e,i,o),zu(t,$t,e,i,o),zu(t,Kt,e,i,o),zu(t,"csg",e,i,o)),o.length&&(no(i.vs,o),no(i.ns,Rc(o)))},zu=function(t,e,i,n,o){var r=t[e];if(r){var a=r.tuv;if(a){var s,h,l,c,u=r.uvScale,d=r.uvOffset;if(u)for(s=a.length,h=u[0],l=u[1],c=0;c<s;c+=2)a[c]*=h,a[c+1]*=l;if(d)for(s=a.length,h=d[0],l=d[1],c=0;c<s;c+=2)a[c]+=h,a[c+1]+=l}ju(i,n,o,r.vs,a,ot,r.blend,r.color)}},Fu=function(t,e,i,n,o,r,a,s){var h,l=i.cs,c=i.uv,u=i.bs;if(t.getFaceVisible(e,r)){var d=t.getFaceMat(e,r);if(d&&(o=rh(e,d)),xc(a,o,s),l&&wc(l,t.getFaceColor(e,r),6),c){var f=t.getFaceUv(e,r)||n[r+"Uv"],g=t.getFaceUvScale(e,r)||n[r+"UvScale"],_=t.getFaceUvOffset(e,r)||n[r+"UvOffset"],v=(f=f?[f[6],f[7],f[0],f[1],f[2],f[3],f[2],f[3],f[4],f[5],f[6],f[7]]:xu)[0],p=f[1],b=f[2],m=f[3],y=f[4],w=f[5],x=f[6],C=f[7],I=f[8],O=f[9],S=f[10],T=f[11];if(g){var V=g[0],D=g[1];v*=V,p*=D,b*=V,m*=D,y*=V,w*=D,x*=V,C*=D,I*=V,O*=D,S*=V,T*=D}if(_){var E=_[0],k=_[1];v+=E,p+=k,b+=E,m+=k,y+=E,w+=k,x+=E,C+=k,I+=E,O+=k,S+=E,T+=k}c.push(v,p,b,m,y,w,x,C,I,O,S,T)}u&&((h=t.getBodyColor(e)||t.getFaceBlend(e,r))?yc(u,h,6):no(u,wu,6))}},Au=function(t,e,i,n){var o=t.getGL(),r=t._prg,a=t._buffer;if(!lo(e)){for(var s in hu(t),Gc(o,r),e){var h=e[s];if(!(n&&!h.T||!n&&h.T)){h.invalidate?(h.invalidate=!1,Bu(h,"vs"),Bu(h,"cs"),Bu(h,"ls"),Bu(h,"ps")):i&&Bu(h,"ps");var l=h.vs32,c=i?h.ps32:h.cs32;$c(o,r,h.W,ot,a.vs,l);var u=h.D,d=!t._dashDisabled&&u;d&&(nu(o,r.uDash,!0),nu(o,r.uDashDistance,u),nu(o,r.uDashGapDistance,h.G),ou(o,r.aLineDistance),eu(o,a.lineDistance,h.ls32,r.aLineDistance,1),nu(o,r.uDiffuse,h.A||Vn));var f=!t._batchColorDisabled;f&&(nu(o,r.uBatchColor,!0),ou(o,r.aBatchColor),eu(o,a.batchColor,c,r.aBatchColor,4)),Zc(o),Kc(o,0,l.length/3,o.LINES),Jc(o),f&&(nu(o,r.uBatchColor,!1),ru(o,r.aBatchColor)),d&&(nu(o,r.uDash,!1),ru(o,r.aLineDistance))}}Xc(o,r)}},Wu=function(t,e,i){var n,o,r,a,s,h,l,c,u,d,f=t.getGL(),g=t._prg,_=t._buffer,v=t._33O;if(!lo(v))for(n in hu(t),v)if(o=_n[n]||Cn,!(i&&!o.transparent||!i&&o.transparent)&&(r=v[n],e||!o.transparentMask)){var p=i&&!1!==o.autoSort&&(t._33Q||r.invalidate);if(r.invalidate?(r.invalidate=!1,Bu(r,"vs"),Bu(r,"ns"),Bu(r,"cs"),Bu(r,"rs"),Bu(r,"ps"),Bu(r,"bs"),Bu(r,"uv")):e&&Bu(r,"ps"),a=r.vs32,s=e?r.ps32:r.cs32,c=r.uv32,h=r.bs32,l=r.rs32,d=a.length/3,p&&(r.is=Hu(a,t.getEye())),d){o.light,u=t.getTexture(o.image),Yc(f,g,ot,o.light,o.opacity,o.reverseFlip,o.reverseColor,o.reverseCull),s?t._batchColorDisabled||(nu(f,g.uBatchColor,!0),ou(f,g.aBatchColor),eu(f,_.batchColor,s,g.aBatchColor,4)):nu(f,g.uDiffuse,o.color);var b=h&&!t._batchBlendDisabled;b&&(nu(f,g.uBatchBlend,!0),ou(f,g.aBatchBlend),eu(f,_.batchBlend,h,g.aBatchBlend));var m=l&&!t._batchBrightnessDisabled;m&&(nu(f,g.uBatchBrightness,!0),ou(f,g.aBatchBrightness),eu(f,_.batchBrightness,l,g.aBatchBrightness,1)),c?Zc(f,g,u,o.discardSelectable,_.uv,c,o.uvOffset,o.uvScale):Zc(f),eu(f,_.vs,a,g.aPosition),eu(f,_.ns,r.ns32,g.aNormal),r.is?(iu(f,_.is,r.is),tu(f,0,d)):Kc(f,0,d),c?Jc(f,g,u):Jc(f),s&&!t._batchColorDisabled&&(nu(f,g.uBatchColor,!1),ru(f,g.aBatchColor)),b&&(nu(f,g.uBatchBlend,!1),ru(f,g.aBatchBlend)),m&&(nu(f,g.uBatchBrightness,!1),ru(f,g.aBatchBrightness)),qc(f,g)}}},Hu=function(a,s){for(var t=a.length/3,e=new Array(t),i=t/3,n=new Array(i),o=0;o<i;o++)n[o]=o;n.sort(function(t,e){var i=9*t,n=[(a[i]+a[i+3]+2*a[i+6])/4,(a[i+1]+a[i+4]+2*a[i+7])/4,(a[i+2]+a[i+5]+2*a[i+8])/4],o=[(a[i=9*e]+a[i+3]+2*a[i+6])/4,(a[i+1]+a[i+4]+2*a[i+7])/4,(a[i+2]+a[i+5]+2*a[i+8])/4],r=Ts(s,n)-Ts(s,o);return 0<r?-1:r<0?1:0});for(o=0;o<i;o++){var r=3*o,h=3*n[o];e[r]=h,e[r+1]=h+1,e[r+2]=h+2}return new Xs(e)},Uu=new Ys([0,0,0,1,1,1,1,0]),Nu=new Ys([0,0,1,0,0,1,0,0,1,0,0,1]),Qu=new Xs([0,1,2,2,3,0]),Gu=new Ys([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Xu=new Xs([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Yu=new Ys([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),qu=new Ys([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Zu=Rc(Gu,Xu),Ju=(new Ys([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new Xs([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),$u=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Ku=function(t,e,i,n,o,r){t=t||16,e=e||0,i=i||t;var a,s,h,l,c,u,d,f,g=[],_=[],v=Ot/t,p=It/(r=r||16);for(a=0;a<r;a++)for(l=a*p,f=(c=a+1)*p,s=e;s<i;s++)h=s*v,d=(u=s+1)*v,g.push(.5*wt(l)*mt(h),.5*mt(l),-.5*wt(l)*wt(h),.5*wt(f)*mt(d),.5*mt(f),-.5*wt(f)*wt(d),.5*wt(l)*mt(d),.5*mt(l),-.5*wt(l)*wt(d),.5*wt(l)*mt(h),.5*mt(l),-.5*wt(l)*wt(h),.5*wt(f)*mt(h),.5*mt(f),-.5*wt(f)*wt(h),.5*wt(f)*mt(d),.5*mt(f),-.5*wt(f)*wt(d)),_.push(s/t,a/r,u/t,c/r,u/t,a/r,s/t,a/r,s/t,c/r,u/t,c/r);if(n)for(h=e*v,a=0;a<r;a++)l=a*p,f=(c=a+1)*p,g.push(0,0,0,.5*wt(f)*mt(h),.5*mt(f),-.5*wt(f)*wt(h),.5*wt(l)*mt(h),.5*mt(l),-.5*wt(l)*wt(h)),_.push(0,.5,e/t,c/r,e/t,a/r);if(o)for(h=i*v,a=0;a<r;a++)l=a*p,f=(c=a+1)*p,g.push(0,0,0,.5*wt(l)*mt(h),.5*mt(l),-.5*wt(l)*wt(h),.5*wt(f)*mt(h),.5*mt(f),-.5*wt(f)*wt(h)),_.push(1,.5,i/t,a/r,i/t,c/r);return{vs:g,uv:_}},td=function(t,e,i){(t=t||.17)<0?t=0:.25<t&&(t=.25);var n,o,r,a,s,h,l,c=[],u=[],d=[],f=Ot/(i=i||18),g=Ot/(e=e||12),_=.5-t;for(o=0;o<=e;o++)for(h=mt(a=o*g-It),s=wt(a),n=0;n<=i;n++)r=n*f,l=_+t*h,c.push(mt(r)*l,s*t,-wt(r)*l),u.push(n/i,1-o/e);for(o=0;o<e;o++){var v=o*(i+1),p=(o+1)*(i+1);for(n=0;n<i;n++)d.push(v+n,p+n+1,p+n,v+n,v+n+1,p+n+1)}return{vs:c,uv:u,is:d}},ed=function(t,e,i,n,o,r,a){t=t||18,e=e||0,i=i||t,(r=r||.17)<0?r=0:.25<r&&(r=.25);var s,h,l,c,u,d,f,g,_,v,p=[],b=[],m=Ot/t,y=Ot/(a=a||12),w=.5-r;for(l=0;l<a;l++)for(f=l*y-It,g=(c=l+1)*y-It,s=e;s<i;s++)u=s*m,d=(h=s+1)*m,_=w+r*mt(f),v=w+r*mt(g),p.push(mt(u)*_,wt(f)*r,-wt(u)*_,mt(d)*_,wt(f)*r,-wt(d)*_,mt(d)*v,wt(g)*r,-wt(d)*v,mt(u)*_,wt(f)*r,-wt(u)*_,mt(d)*v,wt(g)*r,-wt(d)*v,mt(u)*v,wt(g)*r,-wt(u)*v),b.push(s/t,1-l/a,h/t,1-l/a,h/t,1-c/a,s/t,1-l/a,h/t,1-c/a,s/t,1-c/a);if(n){var x=[],C=[];for(l=0;l<a;l++)g=(c=l+1)*y-It,u=e*m,_=w+r*mt(f=l*y-It),v=w+r*mt(g),x.push(mt(u)*_,wt(f)*r,-wt(u)*_,mt(u)*v,wt(g)*r,-wt(u)*v,mt(u)*w,0,-wt(u)*w),C.push(.5+.5*mt(f),.5-.5*wt(f),.5+.5*mt(g),.5-.5*wt(g),.5,.5)}if(o){var I=[],O=[];for(l=0;l<a;l++)g=(c=l+1)*y-It,u=i*m,_=w+r*mt(f=l*y-It),v=w+r*mt(g),I.push(mt(u)*_,wt(f)*r,-wt(u)*_,mt(u)*w,0,-wt(u)*w,mt(u)*v,wt(g)*r,-wt(u)*v),O.push(.5-.5*mt(f),.5-.5*wt(f),.5,.5,.5-.5*mt(g),.5-.5*wt(g))}return{vs:p,uv:b,from_vs:x,from_uv:C,to_vs:I,to_uv:O}},id=function(t,e){for(var i,n,o,r=[],a=[],s=[],h=Ot/16,l=0;l<=16;l++)n=.5*mt(i=l*h),o=.5*wt(i),r.push(n,-.5,o,n,.5,o),a.push(1-l/16,1,1-l/16,0);for(l=0;l<16;l++)s.push(2*l,2*l+1,2*l+3,2*l,2*l+3,2*l+2);if(e){var c=[],u=[],d=[];for(c.push(0,-.5,0),u.push(.5,.5),l=0;l<=16;l++)n=mt(i=l*h),o=wt(i),c.push(.5*n,-.5,.5*-o),u.push(.5+.5*n,.5+.5*o);for(l=0;l<16;l++)d.push(0,l+2,l+1)}if(t){var f=[],g=[],_=[];for(f.push(0,.5,0),g.push(.5,.5),l=0;l<=16;l++)n=mt(i=l*h),o=wt(i),f.push(.5*n,.5,.5*-o),g.push(.5+.5*n,.5-.5*o);for(l=0;l<16;l++)_.push(0,l+1,l+2)}return{vs:r,uv:a,is:s,bottom_vs:c,bottom_uv:u,bottom_is:d,top_vs:f,top_uv:g,top_is:_}},nd=function(t,e,i,n,o,r,a){t=t||12,i=i||t;for(var s,h,l,c,u,d,f,g,_=[],v=[],p=Ot/t,b=e=e||0;b<i;b++)l=(s=b+1)*p,c=.5*mt(h=b*p),u=.5*wt(h),d=.5*mt(l),f=.5*wt(l),_.push(c,-.5,-u,d,-.5,-f,c,.5,-u,d,-.5,-f,d,.5,-f,c,.5,-u),v.push(b/t,1,s/t,1,b/t,0,s/t,1,s/t,0,b/t,0);if(a){var m=[],y=[];for(b=e;b<i;b++)l=p*(b+1),c=mt(h=p*b),u=wt(h),d=mt(l),f=wt(l),m.push(.5*c,-.5,.5*-u,0,-.5,0,.5*d,-.5,.5*-f),y.push(.5+.5*c,.5+.5*u,.5,.5,.5+.5*d,.5+.5*f)}if(r){var w=[],x=[];for(b=e;b<i;b++)l=p*(b+1),c=mt(h=p*b),u=wt(h),d=mt(l),f=wt(l),w.push(.5*c,.5,.5*-u,.5*d,.5,.5*-f,0,.5,0),x.push(.5+.5*c,.5-.5*u,.5+.5*d,.5-.5*f,.5,.5)}return n&&(c=.5*mt(h=p*e),u=.5*wt(h),g=e/t,_.push(0,.5,0,0,-.5,0,c,-.5,-u,c,-.5,-u,c,.5,-u,0,.5,0),v.push(0,0,0,1,g,1,g,1,g,0,0,0)),o&&(c=.5*mt(h=p*i),u=.5*wt(h),g=i/t,_.push(0,-.5,0,0,.5,0,c,.5,-u,c,.5,-u,c,-.5,-u,0,-.5,0),v.push(1,1,1,0,g,0,g,0,g,1,1,1)),{vs:_,uv:v,bottom_vs:m,bottom_uv:y,top_vs:w,top_uv:x}},od=function(t,e,i,n,o){i=i||0,o=o==ot?.5:o;for(var r,a,s,h,l,c,u=[0,.5,.75,.875,.9375],d=[],f=[],g=[],_=(n=n==ot?Ot:n)/(e=e||18),v=0;v<u.length;v++){var p=0==v%2?0:.5;for(r=0;r<=e;r++)a=(r+p)*_+i,s=1-u[v],d.push(mt(a)*o*s,2*u[v]*o-o,-wt(a)*o*s),f.push((r+p)/e,s)}for(v=0;v<u.length-1;v++){var b=v*(e+1),m=(v+1)*(e+1);for(r=0;r<e;r++)g.push(b+r,m+r+1,m+r,b+r,b+r+1,m+r+1)}for(c=d.length/3-(e+1),r=0;r<e;r++)d.push(0,o,0),f.push((r+.5)/e,0);for(r=0;r<e;r++)g.push(c+r,c+r+1,c+(e+1)+r);if(t){var y=[],w=[],x=[];for(y.push(0,-o,0),w.push(.5,.5),r=0;r<=e;r++)h=mt(a=r*_+i),l=wt(a),y.push(h*o,-o,-l*o),w.push(.5+.5*h,.5+.5*l);for(r=0;r<e;r++)x.push(0,r+2,r+1)}return{vs:d,uv:f,is:g,bottom_vs:y,bottom_uv:w,bottom_is:x}},rd=function(t,e,i,n,o,r){t=t||16,i=i||t;for(var a=[],s=[],h=Ot/t,l=e=e||0;l<i;l++){var c=l+1,u=h*l,d=h*c;a.push(.5*mt(u),-.5,.5*-wt(u),.5*mt(d),-.5,.5*-wt(d),0,.5,0),s.push(l/t,1,c/t,1,(l+c)/2/t,0)}if(r){var f=[],g=[];for(l=e;l<i;l++){d=h*(l+1);var _=mt(u=h*l),v=wt(u),p=mt(d),b=wt(d);f.push(.5*_,-.5,.5*-v,0,-.5,0,.5*p,-.5,.5*-b),g.push(.5+.5*_,.5+.5*v,.5,.5,.5+.5*p,.5+.5*b)}}return n&&(u=h*e,a.push(0,.5,0,0,-.5,0,.5*mt(u),-.5,.5*-wt(u)),s.push(0,0,0,1,e/t,1)),o&&(u=h*i,a.push(0,-.5,0,0,.5,0,.5*mt(u),-.5,.5*-wt(u)),s.push(1,1,1,0,i/t,1)),{vs:a,uv:s,bottom_vs:f,bottom_uv:g}},ad=function(t,e,i,n,o,r,a,s){for(var h=[],l=0;l<t.length-1;l+=2)h.push({x:t[l],y:t[l+1]});return ol(h,e,i,n,o,r,a,s,!1)},sd={roundRect:function(t,e){return ad([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],t,e,3)},star:function(t,e){return ad([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],t,e)},rect:function(t,e){return ad([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],t,e)},triangle:function(t,e){return ad([0,-.5,.5,.5,-.5,.5],[1,2,2,5],t,e)},rightTriangle:function(t,e){return ad([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],t,e)},parallelogram:function(t,e){return ad([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],t,e)},trapezoid:function(t,e){return ad([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],t,e)}},hd={sphere:1,cylinder:1,cone:1,torus:1},ld={torus:1,sphere:1},cd=ro(fs(sd),{cylinder:1}),ud=ro(fs(sd),{cylinder:1,cone:1}),dd=function(t,e,i){var n,o=bh(t.mat,i,e),r=bh(t.s3,i,e),a=bh(t.t3,i,e),s=bh(t.r3,i,e);return(r||s||a||o)&&(n=Ks(e._6O),hu(e,ah(o,r,s,bh(t.rotationMode,i,e),a))),n},fd=function(e,i,t,n,o,r,a){if(Zn(t))t.forEach(function(t){fd(e,i,t,n,o,r,a)});else if(Qn(t))fd(e,i,vd(n,t),n,o,r,a);else if(Yn(t))if(t.shape3d){var s=dd(t,e,i);fd(e,i,t.shape3d,n,o,r,t),s&&au(e,s)}else gd(e,i,t,n,o,r,a)},gd=function(t,e,i,n,o,r,a){if(a=a||Cn,!r||r(n("shape3d.transparent",i.transparent,a.transparent))){var s=dd(i,t,e);pd(i);var h=t._26I,l=t._prg,c=t._buffer,u=n("shape3d.color",i.color,a.color);o||(o=n("shape3d.blend",i.blend,a.blend)),Yc(h,l,o,n("shape3d.light",i.light,a.light),n("shape3d.opacity",i.opacity,a.opacity),n("shape3d.reverse.flip",i.reverseFlip,a.reverseFlip),n("shape3d.reverse.color",i.reverseColor,a.reverseColor),n("shape3d.reverse.cull",i.reverseCull,a.reverseCull)),i.vs&&n(Oi,i.visible,a.visible)&&_d(h,l,c,u,t.getTexture(n("shape3d.image",i.image,a.image),e),n("shape3d.discard.selectable",i.discardSelectable,a.discardSelectable),i.vs,i.uv,i.ns,i.is,n("shape3d.uv.offset",i.uvOffset,a.uvOffset),n("shape3d.uv.scale",i.uvScale,a.uvScale)),i.top_vs&&n(Vi,i.topVisible,a.topVisible)&&_d(h,l,c,n("shape3d.top.color",i.topColor,a.topColor)||u,t.getTexture(n("shape3d.top.image",i.topImage,a.topImage),e),n("shape3d.top.discard.selectable",i.topDiscardSelectable,a.topDiscardSelectable),i.top_vs,i.top_uv,i.top_ns,i.top_is,n("shape3d.top.uv.offset",i.topUvOffset,a.topUvOffset),n("shape3d.top.uv.scale",i.topUvScale,a.topUvScale)),i.bottom_vs&&n(Di,i.bottomVisible,a.bottomVisible)&&_d(h,l,c,n("shape3d.bottom.color",i.bottomColor,a.bottomColor)||u,t.getTexture(n("shape3d.bottom.image",i.bottomImage,a.bottomImage),e),n("shape3d.bottom.discard.selectable",i.bottomDiscardSelectable,a.bottomDiscardSelectable),i.bottom_vs,i.bottom_uv,i.bottom_ns,i.bottom_is,n("shape3d.bottom.uv.offset",i.bottomUvOffset,a.bottomUvOffset),n("shape3d.bottom.uv.scale",i.bottomUvScale,a.bottomUvScale)),i.from_vs&&n(Si,i.fromVisible,a.fromVisible)&&_d(h,l,c,n("shape3d.from.color",i.fromColor,a.fromColor)||u,t.getTexture(n("shape3d.from.image",i.fromImage,a.fromImage),e),n("shape3d.from.discard.selectable",i.fromDiscardSelectable,a.fromDiscardSelectable),i.from_vs,i.from_uv,i.from_ns,i.from_is,n("shape3d.from.uv.offset",i.fromUvOffset,a.fromUvOffset),n("shape3d.from.uv.scale",i.fromUvScale,a.fromUvScale)),i.to_vs&&n(Ti,i.toVisible,a.toVisible)&&_d(h,l,c,n("shape3d.to.color",i.toColor,a.toColor)||u,t.getTexture(n("shape3d.to.image",i.toImage,a.toImage),e),n("shape3d.to.discard.selectable",i.toDiscardSelectable,a.toDiscardSelectable),i.to_vs,i.to_uv,i.to_ns,i.to_is,n("shape3d.to.uv.offset",i.toUvOffset,a.toUvOffset),n("shape3d.to.uv.scale",i.toUvScale,a.toUvScale)),qc(h,l),s&&au(t,s)}},_d=function(t,e,i,n,o,r,a,s,h,l,c,u){a&&(nu(t,e.uDiffuse,n),s?Zc(t,e,o,r,i.uv,s,c,u):Zc(t),eu(t,i.vs,a,e.aPosition),eu(t,i.ns,h,e.aNormal),l?(iu(t,i.is,l),tu(t,0,l.length)):Kc(t,0,a.length/3),s?Jc(t,e,o):Jc(t))},vd=function(t,e){if(e||(e=t(Ci)),!e)return ot;if(Yn(e))return e;var i=vn[e];if(i)return i;var n=e;if(hd[e]){var o=t("shape3d.side"),r=t("shape3d.side.from"),a=t("shape3d.side.to"),s=t(Si),h=t(Ti);o<3?(a=r=o=0,h=s=!1):((r==ot||r<0)&&(r=0),(a==ot||o<a)&&(a=o),0===r&&a===o&&(h=s=!1)),n+="-"+o+"-"+r+"-"+a+"-"+s+"-"+h}if(cd[e]){var l=t(Vi);n+="-"+l}if(ud[e]){var c=t(Di);n+="-"+c}if("torus"===e){var u=t("shape3d.torus.radius");u<0?u=0:.25<u&&(u=.25),n+="-"+u}if(ld[e]){var d=t(Ii);n+="-"+d}return(i=pn[n])||("box"===e?i=st.createBoxModel():sd[e]?i=sd[e](l,c):"sphere"===e?i=st.createSphereModel(o,r,a,s,h,d):e===de?i=st.createCylinderModel(o,r,a,s,h,l,c):"cone"===e?i=st.createConeModel(o,r,a,s,h,c):"torus"===e&&(i=st.createTorusModel(o,r,a,s,h,u,d)),pn[n]=i),i},pd=(t=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],n=["is","top_is","bottom_is","from_is","to_is"],tt=so(mu.substr(mu.indexOf("^#")+2)),function(t){for(var e in t)1===e.length&&t[e];return e?1:0}(st[Un(zi+t[15]+"n"+t[16])]())&&wr()?function(i){i&&!i._complete_&&(i._complete_=!0,i.vs&&co(i.ns)&&(i.ns=Rc(i.vs,i.is)),i.top_vs&&co(i.top_ns)&&(i.top_ns=Rc(i.top_vs,i.top_is)),i.bottom_vs&&co(i.bottom_ns)&&(i.bottom_ns=Rc(i.bottom_vs,i.bottom_is)),i.from_vs&&co(i.from_ns)&&(i.from_ns=Rc(i.from_vs,i.from_is)),i.to_vs&&co(i.to_ns)&&(i.to_ns=Rc(i.to_vs,i.to_is)),t.forEach(function(t){var e=i[t];Zn(e)&&(i[t]=new Ys(e))}),n.forEach(function(t){var e=i[t];Zn(e)&&(i[t]=new Xs(e))}))}:void 0),bd=function(t,e){var i=t[e];Zn(i)&&(t[e]=new Ys(i))};ro(Va,{_25Q:function(t){t._16O=function(t,e,i,n,o,r,a,s,h){var l=this.info;if(l){var c,u,d,f,g,_,v=Js();if(d=Th[e]?(c=l.p3,u=l.c1,l.c2):Sh[e]?(u=l.s1||l.c1,l.s2||l.c2):(u=l.t1||l.c1,l.t2||l.c2),c)_=cu(e,Tn,i,n,s,h);else{var p=qs(d,u),b=Ts(u,d);f=[0,-Vt(p[2],p[0]),Ct(p[1]/b)],g="zyx",c=[(u[0]+d[0])/2,(u[1]+d[1])/2,(u[2]+d[2])/2],_=cu(e,[b,0,0],i,n,s,h)}return uu(v,_,c,n,o,r,a,t,f,g)}return $s},t._80o=function(t,e,i){var n=this.shapeModel;if(n){var o=this.gv;hu(o),fd(o,this.data,n,this.s,this.getBodyColor(),i)}},t.createLineModel=function(t,e,i,n,o){for(var r=this.s,a=wd(t,e,r(Ii)),s=[],h=0;h<a.length;h++){var l=a[h],c=l.length;if(1<c){var u=l[0];s.push(u.x,u.y,u.z);for(var d=1;d<c-1;d++)u=l[d],s.push(u.x,u.y,u.z),s.push(u.x,u.y,u.z);u=l[c-1],s.push(u.x,u.y,u.z)}}var f,g,_,v=r(n+".color"),p=0;return r(o)&&(g=r(o+".color"),f=r(o+".pattern"),p=r(o+".offset"),_=v),function(t,e,i,n,o,r,a,s,h){var l=t.getBrightness(e);l==ot&&(l=1);var c=Pu(Ir(n),l),u=c[3]<1,d=(u?"T":"O")+(r=Math.ceil(r)||1);if(a){var f=a[0],g=(a[1]||f)+f;d+="-"+f+"-"+g,h&&(d+="-"+Cr(h)+"-"+l,h=Pu(Ir(h),l))}var _=t._polylineIndexMap,v=t._polylineModelMap,p=v[d];p||(p=v[d]={vs:[],cs:[],ps:[],ds:[],ls:a?[]:ot,T:u,W:r},a&&(p.D=f,p.G=g,p.A=h)),p.invalidate=!0;var b,m=p.vs,y=p.cs,w=p.ds,x=p.ls,C=_[e._id]={index:w.length,begin:m.length/3,batch:d};w.push(e),no(m,i);var I,O=C.size=m.length/3-C.begin,S=i.length,T=0,V=[];if(a||o)for(b=0;b<S;b+=6)I=Ts([i[b],i[b+1],i[b+2]],[i[b+3],i[b+4],i[b+5]]),V.push(I),T+=I;if(T&&o){var D,E=Pu(Ir(o),l),k=[E[0]-c[0],E[1]-c[1],E[2]-c[2],E[3]-c[3]],P=0;for(b=0;b<S;b+=6)D=P/T,wc(y,[c[0]+k[0]*D,c[1]+k[1]*D,c[2]+k[2]*D,c[3]+k[3]*D],1),D=(P+=V[b/6])/T,wc(y,[c[0]+k[0]*D,c[1]+k[1]*D,c[2]+k[2]*D,c[3]+k[3]*D],1)}else wc(y,c,O);if(a)for(P=s||0,b=0;b<S;b+=6)x.push(P),P+=V[b/6],x.push(P)}(this.gv,this.data,s,g||v,_?ot:r(n+".gradient.color"),i,f||r(n+".pattern"),p,_),a},t.createTubeModel=function(t,e,i,n){for(var o=this.s,r=o("shape3d.side")||Hs,a=o("shape3d.start.angle"),s=o(Vi)?o("shape3d.top.cap"):ot,h=o(Di)?o("shape3d.bottom.cap"):ot,l="flat"===s,c="flat"===h,u=l&&(n?n.uv:o("shape3d.top.image")),d=c&&(n?n.uv:o("shape3d.bottom.image")),f={vs:[],uv:(n?n.uv:o("shape3d.image"))?[]:ot,top_vs:l?[]:ot,top_uv:u?[]:ot,bottom_vs:c?[]:ot,bottom_uv:d?[]:ot},g=wd(t,e,o(Ii),i),_=0,v=g.length;_<v;_++)xd(f,g[_],o(Ei),i,r,a,s,h);if(n){var p=[];Lu(this.gv,this.data,f,o,this.getBodyColor(),[],n,p),p.length&&(no(n.vs,p),no(n.ns,Rc(p)))}else this.shapeModel=f;return g},t.getCache=function(){var t=this.info;if(t){var e=t.list;if(e){var i=t.cache;return i||(i=t.cache=yd(e)),i}}return ot}}});var md=function(t,e){for(var i,n=0,o=t.length,r=0,a=o-1;r<=a;)if((i=t[n=ft(r+(a-r)/2)].length-e)<0)r=n+1;else{if(!(0<i)){a=n;break}a=n-1}var s=t[n=a],h=s.point;return n===o-1||s.length===e||(h=(new al).subVectors(t[n+1].point,h).normalize().multiplyScalar(e-s.length).add(h)),{point:h,tangent:s.tangent}},yd=function(t){for(var e,i,n=[],o=0,r=0;r<t.length;r++){for(var a=t[r],s=0;s<a.length;s++){e=a[s],i&&(o+=i.distanceTo(e));var h=new al,l=a[s+1];l?h.subVectors(l,e):i?h.subVectors(e,i):h.x=1,h.normalize(),n.push({point:e,length:o,tangent:h}),i=e}i=null}return n},wd=function(t,e,i,n){i=i||As;for(var o=[],r=0,a=t.size();r<a;r++){var s=t.get(r);o.push(new al(s.x,s.e||0,s.y))}Jn(e)&&(e=e._as);for(var h,l,c,u,d,f=[],g=0,_=0,v=e?e.length:a;_<v;_++)if(1===(d=e?e[_]:0===_?1:2))f.push(c=[]),c.push(o[g++]);else if(2===d||5===d)if(u=2===d?o[g++]:c[0],n){var p=e?e[_+1]:_+1<v?2:ot;if(2===p||5===p){var b=c[c.length-1],m=2===p?o[g]:c[0],y=(new al).subVectors(b,u),w=(new al).subVectors(m,u),x=y.length(),C=w.length();if(x/2<n&&C/2<n)c.push(u);else for(y.multiplyScalar(pt(n,x/2)/x).add(u),w.multiplyScalar(pt(n,C/2)/C).add(u),h=new kl(y,u,w).getPoints(i),l=0;l<=i;l++)c.push(h[l])}else c.push(u)}else c.push(u);else if(3===d)for(h=new kl(c[c.length-1],o[g++],o[g++]).getPoints(i),l=1;l<=i;l++)c.push(h[l]);else if(4===d)for(h=new Pl(c[c.length-1],o[g++],o[g++],o[g++]).getPoints(i),l=1;l<=i;l++)c.push(h[l]);return f},xd=(H=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];t.push(i.x,i.y,i.z)}},U=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e].uv;t.push(i[0],i[1])}},g=function(t,e,i,n,o){var r=-n*mt(o),a=n*wt(o);return new al(t.x+r*i.x+a*e.x,t.y+r*i.y+a*e.y,t.z+r*i.z+a*e.z)},Q=function(t,e,i,n,o,r,a){for(var s=[],h=Ot/o,l=0;l<=o;l++){var c=g(t,e,i,n,l*h+r);s.push(c),a!=ot&&(c.uv=[a,l/o])}return s},G=function(t,e,i,n,o,r,a,s){var h=e?t.top_vs:t.bottom_vs;if(h)for(var l=e?t.top_uv:t.bottom_uv,c=Ot/a,u=0;u<a;u++){var d,f;e?(d=u*c+s,f=(u+1)*c+s):(f=u*c+s,d=(u+1)*c+s),H(h,g(i,n,o,r,d),g(i,n,o,r,f),i),l&&l.push(.5-.5*mt(d),.5-.5*wt(d),.5-.5*mt(f),.5-.5*wt(f),.5,.5)}},function(t,e,i,n,o,r,a,s){var h=e.length;if(1<h){var l,c,u,d,f,g,_,v=function(t){for(var e,i,n=new al,o=[],r=[],a=[],s=0,h=t.length;s<h;s++)e=t[s],(i=t[s+1])?n.subVectors(i,e):n.subVectors(e,t[s-1]),o.push(n.normalize().clone());var l,c,u,d,f=new al,g=new al,_=new sl,v=Number.MAX_VALUE,p=o[0],b=r[0]=new al,m=a[0]=new al;for(c=bt(p.x),u=bt(p.y),d=bt(p.z),c<=v&&(v=c,f.set(1,0,0)),u<=v&&(v=u,f.set(0,1,0)),d<=v&&f.set(0,0,1),g.crossVectors(p,f).normalize(),b.crossVectors(p,g),m.crossVectors(p,b),s=1;s<h;s++)r[s]=r[s-1].clone(),a[s]=a[s-1].clone(),g.crossVectors(o[s-1],o[s]),1e-4<g.length()&&(g.normalize(),l=yt(fo(o[s-1].dot(o[s]),-1,1)),r[s].applyMatrix4(_.makeRotationAxis(g,l))),a[s].crossVectors(o[s],r[s]);return{B:a,T:o,N:r}}(e),p=v.T,b=v.N,m=v.B;"flat"===a&&G(t,!0,e[0],m[0],b[0],n,o,r),"flat"===s&&G(t,!1,e[h-1],m[h-1],b[h-1],n,o,r);var y,w,x=[],C=gt(o/2),I="round"===a,O="round"===s,S=e[0],T=p[0],V=m[0],D=b[0],E=e[h-1],k=p[h-1],P=m[h-1],M=b[h-1];if(I){for(u=1;u<=C;u++)b.splice(0,0,D),m.splice(0,0,V),p.splice(0,0,T),w=-u/C*n,e.splice(0,0,T.clone().multiplyScalar(w).add(S)),x[C-u]=_t(n*n-w*w);h+=C}if(O){for(u=1;u<=C;u++)b.push(M),m.push(P),p.push(k),w=u/C*n,e.push(k.clone().multiplyScalar(w).add(E)),x[e.length-1]=_t(n*n-w*w);h+=C}if(t.uv){var B=0,L=0,j=[];for(i&&(B=i),f=e[0],j[0]=0,u=1;u<h;u++)d=e[u],j[u]=f.distanceTo(d),f=d,i||(B+=j[u]);for(y=[],u=0;u<h;u++)L+=j[u],y[u]=B?L/B:0}for(u=0;u<h;u++){if(d=e[u],g=m[u],_=b[u],l=Q(d,g,_,x[u]===N?n:x[u],o,r,y?y[u]:ot),c)for(var R=0;R<o;R++){var z=c[R],F=c[R+1]||c[0],A=l[R],W=l[R+1]||l[0];H(t.vs,F,z,A,A,W,F),t.uv&&U(t.uv,F,z,A,A,W,F)}c=l}}});ro(st,{getLineLength:function(t){return t[t.length-1].length},getLineOffset:function(t,e){return md(t,e)},getLineCacheInfo:function(t,e,i,n){return yd(wd(t,e,i,n))}});var Cd=rt.Light=function(){ho(Cd,this),this.s(dc,ht[dc]),this.s(Ci,"sphere"),this.s3(20,20,20)};Ns("Light",Al,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(t,e,i){Cd.superClass.onStyleChanged.apply(this,arguments),t===dc&&this.s("shape3d.color",i)}});var Id=pu.Graph3dView=function(t,e){var i=this;i._attributes=e||st.graph3dViewAttributes,i._25I={},i._view=To(1,i);var n=i._canvas=Do(i._view);n.addEventListener("webglcontextlost",function(t){t.preventDefault(),Fc(i),i._26I=ot,i._1o.texture=ot,i._35O=!0},!1),n.addEventListener("webglcontextrestored",function(){i._35O=!1,i.iv()},!1),i._34O={},i._33O={},i._wireframeIndexMap={},i._wireframeModelMap={},i._polylineIndexMap={},i._polylineIndexMap={},i._8O=[],i._7O=Js(),i._6O=Js(),i._1o=new Vd(i),i._30O=new kd(i),i._31O=new Dd(i),i._32O=new Ed(i),i._33Q=!0,i._eye=fs(st.graph3dViewEye),i._center=fs(st.graph3dViewCenter),i._up=fs(st.graph3dViewUp),i._lightChanged=!1,i._59O=[],i._spots=[],i._dirs=[],i.dm(t||new Ih),i.setInteractors([new Td(i)])},Od={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};bu("Graph3dView",e,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",qe,Je,"firstPersonMode",si,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",ee,te,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:N,_boundaries:N,_moveStep:st.graph3dViewMoveStep,_rotateStep:st.graph3dViewRotateStep,_pannable:st.graph3dViewPannable,_rotatable:st.graph3dViewRotatable,_walkable:st.graph3dViewWalkable,_resettable:st.graph3dViewResettable,_zoomable:st.graph3dViewZoomable,_firstPersonMode:st.graph3dViewFirstPersonMode,_mouseRoamable:st.graph3dViewMouseRoamable,_gridVisible:st.graph3dViewGridVisible,_gridSize:st.graph3dViewGridSize,_gridGap:st.graph3dViewGridGap,_gridColor:st.graph3dViewGridColor,_originAxisVisible:st.graph3dViewOriginAxisVisible,_centerAxisVisible:st.graph3dViewCenterAxisVisible,_axisXColor:st.graph3dViewAxisXColor,_axisYColor:st.graph3dViewAxisYColor,_axisZColor:st.graph3dViewAxisZColor,_ortho:st.graph3dViewOrtho,_orthoWidth:st.graph3dViewOrthoWidth,_fovy:st.graph3dViewFovy,_near:st.graph3dViewNear,_far:st.graph3dViewFar,_headlightColor:st.graph3dViewHeadlightColor,_headlightIntensity:st.graph3dViewHeadlightIntensity,_headlightRange:st.graph3dViewHeadlightRange,_headlightDisabled:st.graph3dViewHeadlightDisabled,_rectSelectable:st.graph3dViewRectSelectable,_rectSelectBackground:st.graph3dViewRectSelectBackground,_editSizeColor:st.graph3dViewEditSizeColor,_autoMakeVisible:Pa,_fogDisabled:st.graph3dViewFogDisabled,_fogColor:st.graph3dViewFogColor,_fogNear:st.graph3dViewFogNear,_fogFar:st.graph3dViewFogFar,_dashDisabled:st.graph3dViewDashDisabled,_batchColorDisabled:st.graph3dViewBatchColorDisabled,_batchBlendDisabled:st.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:st.graph3dViewBatchBrightnessDisabled,setEye:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]);var n=this._eye;n[0]=t,n[1]=e,n[2]=i,this.fp(ee,ot,n)},setCenter:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]);var n=this._center;n[0]=t,n[1]=e,n[2]=i,this.fp(te,ot,n)},setUp:function(t,e,i){1===arguments.length&&(e=t[1],i=t[2],t=t[0]);var n=this._up;n[0]=t,n[1]=e,n[2]=i,this.fp("up",ot,n)},isTransparentMask:function(t){return t.s("transparent.mask")},getAspect:function(){var t=this._aspect;return t||this.getWidth()/this.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(t){var e=this,i=e._dataModel,n=e._3o;i!==t&&(i&&(i.umm(e.handleDataModelChange,e),i.umd(e.handleDataPropertyChange,e),n||i.sm().ums(e._16o,e)),(e._dataModel=t).mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),n?n._21I(t):t.sm().ms(e._16o,e),e.invalidateAll(!0),e.invalidateLight(),e.fp(xi,i,t))},handleDataPropertyChange:function(t){var e=t.data;this.invalidateData(e),bc(e)&&"s:light.type"===t.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(t){var e=t.property;this.iv(),this._18Q=ot,"eye"===e?this._33Q=!0:"devicePixelRatio"===e?this._42(ot,this._devicePixelRatio||ka):Od[e]&&Fc(this)},_5O:function(t){var e=t._22Q();return e?new e(this,t):ot},getData3dUI:function(t){var e=this._25I[t._id];return e===N&&(e=this._5O(t),this._25I[t._id]=e),e},invalidateAll:function(t){var e=this;if(t){for(var i in e._25I){var n=e._25I[i];n&&n.dispose()}e._25I={},e.iv(),Du(e)}else e.dm().each(function(t){e.invalidateData(t)})},invalidateSelection:function(){var e=this;e.sm().each(function(t){e.invalidateData(t)})},invalidateData:function(t){var e=this.getData3dUI(t);e&&(e.iv(),this.iv()),Du(this,t)},invalidateBatch:function(t){var i=this,e=i._33O,n=e[t],o=[],r={};if(n){n.ds.forEach(function(t){var e=i.getData3dUI(t);e&&e.iv(),delete i._34O[t._id],o.push(t._id)}),delete e[t];for(var a,s,h,l,c,u,d,f,g,_=0;_<2;_++){var v=i[["_wireframeModelMap","_polylineModelMap"][_]],p=i[["_wireframeIndexMap","_polylineIndexMap"][_]];for(r={},f=0;f<o.length;f++){var b=p[o[f]];if(b){delete p[o[f]],a=v[g=b.batch];var m=b.begin,y=b.size,w=3*m,x=3*y,C=4*m,I=4*y;for(s=a.ds,h=a.vs,l=a.cs,c=a.ps,u=a.ls,d=b.index,a.invalidate=!0,s[d]=N,d=w;d<w+x;d++)h[d]=N;for(d=C;d<C+I;d++)l[d]=N;for(d=C;d<C+I;d++)c[d]=N;if(u)for(d=w;d<w+x;d++)u[d]=N;r[g]=!0}}for(g in r){s=(a=v[g]).ds,h=a.vs,l=a.cs,c=a.ps,u=a.ls;var O=[];for(d=0;d<s.length;d++)s[d]!==N&&O.push(s[d]);if(0===O.length)delete v[g];else{for(a.ds=O,O=[],d=0;d<h.length;d++)h[d]!==N&&O.push(h[d]);for(a.vs=O,O=[],d=0;d<l.length;d++)l[d]!==N&&O.push(l[d]);for(a.cs=O,O=[],d=0;d<c.length;d++)c[d]!==N&&O.push(c[d]);if(a.ps=O,u){for(O=[],d=0;d<u.length;d++)u[d]!==N&&O.push(u[d]);a.ls=O}}}}i.iv()}},handleDataModelChange:function(t){var e=this,i=t.kind,n=t.data;if("add"===i)e.invalidateData(n),Kn(n)&&n.getEdgeGroup()&&n.getEdgeGroup().eachSiblingEdge(e.invalidateData,e),bc(n)&&e.invalidateLight();else if(i===ve){var o=n._id,r=e._25I[o];r&&(r.dispose(),delete e._25I[o],e.iv()),n===e._currentSubGraph&&e.setCurrentSubGraph(ot),Du(e,n),bc(n)&&e.invalidateLight()}else i===pe&&(e.invalidateAll(!0),e.setCurrentSubGraph(ot),Du(e),e.invalidateLight())},toCanvas:function(t){var e=this.getGL();if(this.validate(),t){var i=e.getParameter(e.COLOR_CLEAR_VALUE);Qc(e,t)}this._42(ot,1);var n=this.getWidth(),o=this.getHeight(),r=new Uint8Array(4*n*o),a=Do(),s=a.getContext("2d");e.readPixels(0,0,n,o,e.RGBA,e.UNSIGNED_BYTE,r),Po(a,n,o,1);for(var h=s.getImageData(0,0,n,o),l=h.data,c=0;c<l.length;c+=4){var u=c/4,d=ft(u/n);l[u=4*((o-1-d)*n+(u-d*n))]=r[c],l[u+1]=r[c+1],l[u+2]=r[c+2],l[u+3]=r[c+3]}return s.putImageData(h,0,0),t&&Qc(e,i),this._42(ot,this._devicePixelRatio||ka),a},toDataURL:function(t,e){var i=this.getGL();if(this.validate(),t){var n=i.getParameter(i.COLOR_CLEAR_VALUE);Qc(i,t)}this._42(ot,1);var o=this._canvas.toDataURL(e||"image/png",1);return t&&Qc(i,n),this._42(ot,this._devicePixelRatio||ka),o},getGL:function(){var t,e,i,n=this,o=n._26I,r=n._prg;if(!o)try{n._2O={},(o=n._26I=n._canvas.getContext("webgl",n._attributes)||n._canvas.getContext("experimental-webgl",n._attributes))._emptyTexture=(t=o,i=new Uint8Array(3),e=e||t.createTexture(),Hc(t,e),Nc(t,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGB,1,1,0,t.RGB,t.UNSIGNED_BYTE,i),e),n._buffer={vs:Wc(o),ns:Wc(o),is:Wc(o),uv:Wc(o),batchColor:Wc(o),batchBlend:Wc(o),batchBrightness:Wc(o),lineDistance:Wc(o)},n._1O=zc(o);var a=n._cube={vs:Wc(o),ns:Wc(o),is:Wc(o),uv:Wc(o)};eu(o,a.vs,Gu),eu(o,a.ns,Zu),eu(o,a.uv,Yu),iu(o,a.is,Xu)}catch(t){}if(o&&!r){if(!(r=n._prg=o.createProgram()))return ot;var s=n._dirs.length,h=n._spots.length,l=n._59O.length,c=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];s&&c.push("uDirColor","uDirPosition"),h&&c.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),l&&c.push("uPointColor","uPointRange","uPointPosition"),Qc(o,[0,0,0,0]),o.clearDepth(1),o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL),o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),gc||(mu=so(mu.substring(0,mu.indexOf("^#"))),yu=so(yu),gc=!0);var u=["#define MAX_DIR "+s,"#define MAX_SPOT "+h,"#define MAX_POINT "+l,n._fogDisabled?"":"#define FOG",n._dashDisabled?"":"#define DASH",n._batchColorDisabled?"":"#define BATCHCOLOR",n._batchBlendDisabled?"":"#define BATCHBLEND",n._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),d=Ac(o,r,o.VERTEX_SHADER,mu.replace("PREFIX",u)),f=Ac(o,r,o.FRAGMENT_SHADER,yu.replace("PREFIX",u));At?c.push("aPosition"):(r.aPosition=0,o.bindAttribLocation(r,0,"aPosition")),o.linkProgram(r),c.forEach(function(t){r[t]=/^u/.test(t)?o.getUniformLocation(r,t):o.getAttribLocation(r,t)}),o.useProgram(r),o.deleteShader(d),o.deleteShader(f)}return o},getBrightness:function(t){var e=t.s("brightness"),i=this.isSelected(t)?t.s("select.brightness"):ot;return e==ot?i:i==ot?e:e*i},getWireframe:function(t){var e=t.s("wf.visible"),i=t.s("wf.width");return!0===e||0<i&&"selected"===e&&this.isSelected(t)?{color:t.s("wf.color"),width:i,short:t.s("wf.short"),mat:t.s("wf.mat")}:void 0},getBodyColor:function(t){return t.s("body.color")},getMat:function(t){return t.getMat?t.getMat():t.s("mat")},getFaceMat:function(t,e){return t.getFaceMat?t.getFaceMat(e):t.s(e+".mat")},getFaceBlend:function(t,e){return t.s(e+".blend")||t.s("all.blend")},getFaceColor:function(t,e){return t.s(e+".color")||t.s("all.color")},getFaceImage:function(t,e){return t.s(e+".image")||t.s("all.image")},getFaceDiscardSelectable:function(t,e){var i=t.s(e+".discard.selectable");return i==ot?t.s("all.discard.selectable"):i},getFaceUv:function(t,e){return t.s(e+".uv")||t.s("all.uv")},getFaceUvOffset:function(t,e){return t.s(e+".uv.offset")||t.s("all.uv.offset")},getFaceUvScale:function(t,e){return t.s(e+".uv.scale")||t.s("all.uv.scale")},getFaceLight:function(t,e){var i=t.s(e+".light");return i==ot?t.s("all.light"):i},getFaceVisible:function(t,e){var i=t.s(e+".visible");return i==ot?t.s("all.visible"):i},getFaceOpacity:function(t,e){var i=t.s(e+".opacity");return i==ot?t.s("all.opacity"):i},getFaceTransparent:function(t,e){var i=t.s(e+".transparent");return i==ot?t.s("all.transparent"):i},getFaceReverseColor:function(t,e){return t.s(e+".reverse.color")||t.s("all.reverse.color")},getFaceReverseFlip:function(t,e){var i=t.s(e+".reverse.flip");return i==ot?t.s("all.reverse.flip"):i},getFaceReverseCull:function(t,e){var i=t.s(e+".reverse.cull");return i==ot?t.s("all.reverse.cull"):i},getTextureMap:function(){return this._2O},deleteTexture:function(t){var e=this._2O[t];e&&(delete this._2O[t],this.getGL().deleteTexture(e))},getTexture:function(t,e){if(!t)return ot;var i=this.getGL(),n=this._2O[t];if(!n){var o=as(t);if(o)if(o.tagName){if(o.dynamic)return zc(i,o,this._1O);n=this._2O[t]=zc(i,o)}else{var r=vh(o,e),a=ph(o,e);if(1<=r&&1<=a){var s=xr(r,a);return mh(s,o,0,0,r,a,e,this),s.restore(),zc(i,yr,this._1O)}}}return n},redraw:function(){this.iv()},validateImpl:function(){var t=this;if(t._lightChanged){t._lightChanged=!1;var i=[],n=[],o=[];t.dm().each(function(t){if(bc(t)){var e=t.s("light.type");"point"===e?i.push(t):"spot"===e?n.push(t):"directional"===e&&o.push(t)}}),(i.length!==t._59O.length||n.length!==t._spots.length||o.length!==t._dirs.length)&&Fc(t),t._59O=i,t._spots=n,t._dirs=o}t._42(),t._1o.iv()},_42:function(t,e){var i=this;if(!i._35O&&(!dn||ln(dn))){var n,o;t&&(t instanceof Al?o=t:n=t);var r=i._canvas,a=i.getWidth(),s=i.getHeight(),h=i.getGL(),l=i._prg;if(h){if(e?t||Po(r,a,s,e):(e=i._devicePixelRatio||ka,t||a===r.clientWidth&&s===r.clientHeight||Po(r,a,s,e)),h.viewport(0,0,a*e,s*e),i._81O=ot,h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),nu(h,l.uBrightness,1),nu(h,l.uOpacity,1),nu(h,l.uPartOpacity,1),h._picking=!!t,nu(h,l.uPick,!!t),nu(h,l.uTexture,!1),nu(h,l.uFix,!1),nu(h,l.uTransparent,!1),nu(h,l.uBatchColor,!1),nu(h,l.uBatchBlend,!1),nu(h,l.uBatchBrightness,!1),t||(function(t,e,i){nu(e,i.uHeadlightRange,t._headlightRange);var n=t._headlightIntensity,o=Ir(t._headlightColor);1!==n&&(o=[o[0]*n,o[1]*n,o[2]*n]),nu(e,i.uHeadlightColor,[o[0],o[1],o[2],t._headlightDisabled?1:0]);var r=t._59O,a=t._spots,s=t._dirs;if(r.length){var h=[],l=[],c=[];r.forEach(function(t){Cc(h,t),no(l,t.p3()),c.push(t.s("light.range"))}),e.uniform4fv(i.uPointColor,h),e.uniform1fv(i.uPointRange,c),e.uniform3fv(i.uPointPosition,l)}if(a.length){var u=[],d=[],f=[],g=[],_=[],v=[];a.forEach(function(t){Cc(u,t),no(d,t.p3()),no(f,t.s("light.center")),g.push(t.s("light.range")),_.push(mt(t.s("light.angle")/2)),v.push(t.s("light.exponent"))}),e.uniform4fv(i.uSpotColor,u),e.uniform1fv(i.uSpotRange,g),e.uniform1fv(i.uSpotAngle,_),e.uniform1fv(i.uSpotExponent,v),e.uniform3fv(i.uSpotPosition,d),e.uniform3fv(i.uSpotCenter,f)}if(s.length){var p=[],b=[];s.forEach(function(t){Cc(p,t),no(b,t.p3())}),e.uniform4fv(i.uDirColor,p),e.uniform3fv(i.uDirPosition,b)}}(i,h,l),i._fogDisabled||(nu(h,l.uFogColor,i._fogColor),nu(h,l.uFogNear,i._fogNear),nu(h,l.uFogFar,i._fogFar))),ou(h,l.aPosition),ou(h,l.aNormal),ru(h,l.aUv),ru(h,l.aBatchColor),ru(h,l.aBatchBlend),ru(h,l.aBatchBrightness),ru(h,l.aLineDistance),nu(h,l.uPMatrix,jc(i)),nu(h,l.uViewMatrix,Lc(i,i._7O)),o){var c=h.getParameter(h.COLOR_CLEAR_VALUE);h.clearColor(0,0,0,0),h.disable(h.BLEND),ru(h,l.aNormal),eu(h,i._cube.vs,ot,l.aPosition),iu(h,i._cube.is),pc(o,i,Zt,0),pc(o,i,Yt,6),pc(o,i,Jt,12),pc(o,i,qt,18),pc(o,i,$t,24),pc(o,i,Kt,30),ou(h,l.aNormal),Qc(h,c)}else if(n){n.value=2;c=h.getParameter(h.COLOR_CLEAR_VALUE);h.clearColor(0,0,0,0),h.disable(h.BLEND),i._95I(h,l,n),Wu(i,n),Au(i,i._polylineModelMap,n),Au(i,i._wireframeModelMap,n),nu(h,l.uTransparent,!0),i._95I(h,l,n,!0),Wu(i,n,!0),Au(i,i._polylineModelMap,n,!0),Au(i,i._wireframeModelMap,n,!0),nu(h,l.uTransparent,!1),h.disable(h.DEPTH_TEST),i._30O._42(h,l,n),h.enable(h.DEPTH_TEST),Qc(h,c)}else h.disable(h.BLEND),i._31O._42(h,l),i._95I(h,l),Wu(i),Au(i,i._polylineModelMap),Au(i,i._wireframeModelMap),h.enable(h.BLEND),h.depthMask(!1),nu(h,l.uTransparent,!0),i._95I(h,l,ot,!0),Wu(i,ot,!0),Au(i,i._polylineModelMap,ot,!0),Au(i,i._wireframeModelMap,ot,!0),nu(h,l.uTransparent,!1),h.depthMask(!0),h.disable(h.BLEND),h.disable(h.DEPTH_TEST),i._32O._42(h,l),i._30O._42(h,l),h.enable(h.DEPTH_TEST);eu(h,ot),iu(h,ot),i._33Q=!1}}},_95I:function(i,n,o,e){var r=this,a=function(t){return e?t:!t};r.dm().each(function(t){if(r.isVisible(t)&&Et){if(!o&&r.isTransparentMask(t))return;var e=r.getData3dUI(t);e&&e._42(i,n,o,a)}})},getLogicalPoint:function(t){return js(t,this._canvas)},getHitFaceInfo:function(t){t.target&&(t=this.lp(t));var e=this.getDataInfoAt(t);if(e){var i=this._1o.face(e.data,Hn(t.x,t.y));if(i)return{data:e.data,face:i}}return ot},getDataAt:function(t){var e=this.getDataInfoAt(t);return e?e.data:ot},getDataInfoAt:function(t,e){return t.target&&(t=this.lp(t)),this._1o.get(Hn(t.x,t.y,e),!0)},getDatasInRect:function(t){return this._1o.get(t)},setEditable:function(t){var e=this._editable;this._editable=t,this.fp(di,e,t)},isEditable:function(t){return!!this._editable&&(!!$n(t)&&(!!t.s("3d.editable")&&(!this._editableFunc||this._editableFunc(t))))},isSelectable:function(t){return t.s("3d.selectable")&&this.sm().isSelectable(t)},isMovable:function(t){return(!Kn(t)||t.getStyle(Ae)===Oe)&&(!!t.s("3d.movable")&&(!this._movableFunc||this._movableFunc(t)))},isSizeEditable:function(t){return!!$n(t)&&(!this._sizeEditableFunc||this._sizeEditableFunc(t))},isRotationEditable:function(t){return!(!$n(t)||!1===t.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(t))},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(t){this.setZoom($a,t)},zoomOut:function(t){this.setZoom(1/$a,t)},setZoom:function(t,e){if(1!==t){var i=this;if(i._ortho)return void i.setOrthoZoom(t,e);i._14o&&i._14o.stop(!0);var n=1/t,o=i._eye,r=i._center,a=r[0]+(o[0]-r[0])*n-o[0],s=r[1]+(o[1]-r[1])*n-o[1],h=r[2]+(o[2]-r[2])*n-o[2];if(!(Ts(o,r)<i._moveStep&&n<1)){if(e=oo(e)){var l=fs(o);return e.action=function(t){i.fi({kind:i._zooming?"betweenZoom":"beginZoom"}),i._zooming=1,o[0]=l[0]+a*t,o[1]=l[1]+s*t,o[2]=l[2]+h*t,i.fp(ee,ot,o)},e._37o=function(){delete i._14o,delete i._zooming,i.fi({kind:"endZoom"}),i.onZoomEnded()},i._14o=_s(e)}o[0]+=a,o[1]+=s,o[2]+=h,i.fp(ee,ot,o)}}},setOrthoZoom:function(t,e){if(1!==t){var i=this;i._14o&&i._14o.stop(!0);var n=i._orthoWidth,o=n/t-n;if(!(n<i._moveStep&&1<t))return(e=oo(e))?(e.action=function(t){i.fi({kind:i._zooming?"betweenZoom":"beginZoom"}),i._zooming=1,i.setOrthoWidth(n+o*t)},e._37o=function(){delete i._14o,delete i._zooming,i.fi({kind:"endZoom"}),i.onZoomEnded()},i._14o=_s(e)):void i.setOrthoWidth(n/t)}},getPositionInfo:function(t){var e=this._eye,i=this._center,n=this.getAspect(),o=t?Zs(qs(i,e,!0),qs(t,e)):Ts(e,i);if(this._ortho){var r=this._orthoWidth;return{length:o,height:r/n,width:r}}var a=2*Tt(this._fovy/2)*o;return{length:o,height:a,width:a*n}},getCenterInfo:function(){return this._81O||(this._81O=this.getPositionInfo()),fs(this._81O)},rotate:function(n,o,t,e){var r=this;if(n||o){e==ot&&(e=r._firstPersonMode),r._88O&&r._88O.stop(!0);var i=r._center,a=r._eye,s=r.getCenterInfo().length,h=e?i:a,l=e?a:i,c=qs(h,l),u=Vt(c[0],c[2]),d=Vt(_t(c[0]*c[0]+c[2]*c[2]),c[1]),f=e?te:ee;return e&&(o=-o),(t=oo(t))?(t.action=function(t){r.fi({kind:r._rotating?"betweenRotate":"beginRotate"}),r._rotating=1;var e=u+n*t,i=d+o*t;i=Oc(i),c[0]=s*wt(i)*wt(e),c[1]=s*mt(i),c[2]=s*wt(i)*mt(e),h[0]=l[0]+c[0],h[1]=l[1]+c[1],h[2]=l[2]+c[2],r.fp(f,ot,h)},t._37o=function(){delete r._88O,delete r._rotating,r.fi({kind:"endRotate"}),r.onRotateEnded()},r._88O=_s(t)):(u+=n,d=Oc(d+=o),c[0]=s*wt(d)*wt(u),c[1]=s*mt(d),c[2]=s*wt(d)*mt(u),h[0]=l[0]+c[0],h[1]=l[1]+c[1],h[2]=l[2]+c[2],void r.fp(f,ot,h))}},pan:function(t,e,i,n){if(t||e){var o=this;n==ot&&(n=o._firstPersonMode),o._89O&&o._89O.stop(!0);var r=Lc(o),a=[r[0]*t,r[4]*t,r[8]*t],s=[r[1]*e,r[5]*e,r[9]*e],h=a[0]+s[0],l=a[1]+s[1],c=a[2]+s[2],u=o._center,d=o._eye;if(n){var f=vu(o.getBoundaries(),d[0],d[2],d[0]+h,d[2]+c,_t(h*h+c*c));h=f[0],c=f[1]}if(i=oo(i)){var g=fs(d),_=fs(u);return i.action=function(t){o.fi({kind:o._panning?"betweenPan":"beginPan"}),o._panning=1,u[0]=_[0]+h*t,u[1]=_[1]+l*t,u[2]=_[2]+c*t,d[0]=g[0]+h*t,d[1]=g[1]+l*t,d[2]=g[2]+c*t,o.fp(ee,ot,d),o.fp(te,ot,u)},i._37o=function(){delete o._89O,delete o._panning,o.fi({kind:"endPan"}),o.onPanEnded()},o._89O=_s(i)}u[0]+=h,u[1]+=l,u[2]+=c,d[0]+=h,d[1]+=l,d[2]+=c,o.fp(ee,ot,d),o.fp(te,ot,u)}},walk:function(i,t,e){if(i){var n=this;e==ot&&(e=n._firstPersonMode),n._90O&&n._90O.stop(!0);var o=n._center,r=n._eye,a=qs(o,r,!0);if(e){var s=vu(n.getBoundaries(),r[0],r[2],r[0]+a[0]*i,r[2]+a[2]*i,bt(i));if(!(i=Ts(s)))return;a=[s[0]/i,0,s[1]/i]}if(t=oo(t)){var h=fs(r),l=fs(o);return t.action=function(t){n.fi({kind:n._walking?"betweenWalk":"beginWalk"}),n._walking=1;var e=i*t;r[0]=h[0]+a[0]*e,r[1]=h[1]+a[1]*e,r[2]=h[2]+a[2]*e,o[0]=l[0]+a[0]*e,o[1]=l[1]+a[1]*e,o[2]=l[2]+a[2]*e,n.fp(ee,ot,r),n.fp(te,ot,o)},t._37o=function(){delete n._90O,delete n._walking,n.fi({kind:"endWalk"}),n.onWalkEnded()},n._90O=_s(t)}r[0]+=a[0]*i,r[1]+=a[1]*i,r[2]+=a[2]*i,o[0]+=a[0]*i,o[1]+=a[1]*i,o[2]+=a[2]*i,n.fp(ee,ot,r),n.fp(te,ot,o)}},handleScroll:function(t,e){t.preventDefault();var i=this._moveStep;this.isFirstPersonMode()?this.isPannable()&&this.pan(0,0<e?i:-i):this.isZoomable()&&this.setZoom(e<0?1/Ka:Ka)},handlePinch:function(t,e){this.isZoomable()&&this.setZoom(t<e?1/ts:ts)},reset:function(){this.setCenter(st.graph3dViewCenter),this.setEye(st.graph3dViewEye),this.setUp(st.graph3dViewUp)},moveSelection:function(t,e,i){var n,o=this.dm();o&&(n=o.getHistoryManager()),n&&n.beginInteraction(),$r(this.sm().toSelection(this.isMovable,this),t,e,i),n&&n.endInteraction()},getMoveMode:function(t,e){var i=e.s("3d.move.mode");if(i)return i;return Cs(t)||bn[88]&&bn[89]&&bn[90]?"xyz":bn[88]&&bn[89]?"xy":bn[88]&&bn[90]?"xz":bn[89]&&bn[90]?"yz":bn[88]?"x":bn[89]?"y":bn[90]?"z":"xz"},handleTick:function(){var t=this,e=!1,i=t._moveStep,n=i,o=-1*t._rotateStep;if(t.isWalkable()||(n=0),t.isPannable()||(i=0),t.isRotatable()||(o=0),t._32Q){var r=(Ln()-t._32Q)/50;n*=r,i*=r,o*=r}t._31Q&&(jn(t._31Q),delete t._31Q,delete t._32Q),sr()&&(e=!0,t.pan(-i,0,!1,!0)),lr()&&(e=!0,t.pan(i,0,!1,!0)),cr()&&(e=!0,Cs()?t.pan(0,i,!1,!0):t.walk(n,!1,!0)),hr()&&(e=!0,Cs()?t.pan(0,-i,!1,!0):t.walk(-n,!1,!0)),ur()&&(e=!0,t.rotate(-o,0,!1,!0)),fr()&&(e=!0,t.rotate(o,0,!1,!0)),dr()&&(e=!0,t.rotate(0,-o/2,!1,!0)),gr()&&(e=!0,t.rotate(0,o/2,!1,!0)),e&&(t._32Q=Ln(),t._31Q=cs(t.handleTick,t))},handleKeyDown:function(t){!Is(t)&&br[t.keyCode]?this.handleTick():ir(t)?this.selectAll():nr(t)?this.handleDelete(t):_r(t)&&this.isResettable()&&this.reset()},checkDoubleClickOnNote:function(t,e,i){if(i===Ee){if(e.s("note.toggleable"))return e.s(je,!e.s(je)),this.fi({kind:"toggleNote",event:t,data:e,part:i}),!0}else if(i===ke&&e.s("note2.toggleable"))return e.s(Re,!e.s(Re)),this.fi({kind:"toggleNote2",event:t,data:e,part:i}),!0;return!1},checkDoubleClickOnRotation:function(t,e,i){return i===Ld?(e.setRotationX(0),!0):i===jd?(e.setRotationY(0),!0):i===Rd&&(e.setRotationZ(0),!0)},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(t){var e,i,n,o,r,a,s=this.getWidth()/2,h=this.getHeight()/2,l=this._18Q;return l||(l=jc(this),this._18Q=Mc(l,l,Lc(this))),e=[t[0],t[1],t[2],1],i=l,n=e[0],o=e[1],r=e[2],a=e[3],e[0]=i[0]*n+i[4]*o+i[8]*r+i[12]*a,e[1]=i[1]*n+i[5]*o+i[9]*r+i[13]*a,e[2]=i[2]*n+i[6]*o+i[10]*r+i[14]*a,e[3]=i[3]*n+i[7]*o+i[11]*r+i[15]*a,{x:s+s*(t=e)[0]/t[3],y:h-h*t[1]/t[3]}},getHitPosition:function(t,e,i){var n=this.getWidth(),o=this.getHeight(),r=t.target?this.lp(t):t,a=r.x-n/2,s=r.y-o/2,h=this.getCenterInfo(),l=Lc(this);e=e||[0,0,0],i=i||[0,1,0],a=a/n*h.width,s=-1*s/o*h.height;var c=[l[0]*a,l[4]*a,l[8]*a],u=[l[1]*s,l[5]*s,l[9]*s],d=[c[0]+u[0],c[1]+u[1],c[2]+u[2]],f=this.getCenter(),g=Tc(this,e,i,[d[0]+f[0],d[1]+f[1],d[2]+f[2]]);return g||[0,0,0]},getLineLength:function(t){this.validate();var e=this.getData3dUI(t);if(e&&e.getCache){var i=e.getCache();if(i)return i[i.length-1].length}return 0},getLineOffset:function(t,e){this.validate();var i=this.getData3dUI(t);if(i&&i.getCache){var n=i.getCache();if(n)return md(n,e)}return ot},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var Sd=pu.Interactor=function(t){this.gv=t};bu("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var Td=pu.DefaultInteractor=function(t){ho(Td,this,[t])};bu("DefaultInteractor",Sd,{handle_contextmenu:function(t){os(t)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){os(t);var e=this,i=e.gv,n=ys(t),o=i.getDataInfoAt(t),r=o?o.data:ot,a=o?o.part:ot,s=i.sm(),h=tr(t),l=ws(t);i.setFocus(t)&&(e._62O=ot,e._57I=ot,r?Is(t)?s.co(r)?s.rs(r):s.as(r):s.co(r)||s.ss(r):n&&(Is(t)?i.isRectSelectable()&&(e._62O=Ye):e._57I=Os(t)),e._31Q&&(jn(e._31Q),delete e._31Q,delete e._32Q),e._62O||(i.isFirstPersonMode()&&(Cs(t)||2<l?e._62O="pan":i.isMouseRoamable()||Nt?(e._62O="roaming",e.foward=h&&ys(t),e._32Q=Ln(),e._31Q=cs(e.tick,e)):n||(e._62O="roaming")),e._62O||(n&&h&&Wd[a]?(e._62O=a,e.p3=r.p3()):n&&h&&$n(r)&&i.isSelected(r)&&i.isMovable(r)?(e._62O="move",e.p3=r.p3(),e.movedata=r):Nt&&(2<l?e._62O="pan":2===l&&(e.dist=Xr(t),e._62O="pinch")))),e.point=i.lp(t),Rs(e,t),xs(t)?i.handleDoubleClick(t,r,a):i.handleClick(t,r,a))},tick:function(){var t=this.gv,e=t._moveStep;this.point&&t.isWalkable()&&(this._32Q&&(e*=(Ln()-this._32Q)/50),t.walk(this.foward?e:-e),this._32Q=Ln(),this._31Q=cs(this.tick,this))},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this._57I;e&&(Ts(e,Os(t))<=1&&this.gv.sm().cs(),this._57I=ot)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(e){var i,n,t=this,o=t.gv,r=t._62O,a=t.point,s=o.dm().getHistoryManager(),h=o.lp(e),l=h.x-a.x,c=h.y-a.y,u=-Ot*l/o.getWidth(),d=-Ot*c/o.getHeight();if("roaming"===r)t.rotate(e,u/2,d/2);else if(r===Ld||r===jd||r===Rd)s&&!o._86O&&s.beginInteraction(),o.fi({kind:o._86O?"betweenEditRotation":"beginEditRotation",event:e}),o._86O=1,o.sm().each(function(t){if($n(t)&&o.isRotationEditable(t)){var e=bt(u)>bt(d)?u:d;r===Ld?t.setRotationX(t.getRotationX()+e):r===jd?t.setRotationY(t.getRotationY()+e):r===Rd&&t.setRotationZ(t.getRotationZ()+e)}});else if("move"===r||Wd[r]){r===zd||r===Fd||r===Ad?(s&&!o._87O&&s.beginInteraction(),o.fi({kind:o._87O?"betweenEditSize":"beginEditSize",event:e}),o._87O=1):(s&&!o._moving&&s.beginInteraction(),o.fi({kind:o._moving?"betweenMove":"beginMove",event:e}),o._moving=1);var f,g=t.p3,_=o.getPositionInfo(g),v=Lc(o);f=r===Pd?"x":r===Md?"y":r===Bd?"z":r===zd?"sx":r===Fd?"sy":r===Ad?"sz":o.getMoveMode(e,t.movedata),l=l/o.getWidth()*_.width,c=-1*c/o.getHeight()*_.height;var p,b=[v[0]*l,v[4]*l,v[8]*l],m=[v[1]*c,v[5]*c,v[9]*c],y=b[0]+m[0],w=b[1]+m[1],x=b[2]+m[2],C=[g[0]+y,g[1]+w,g[2]+x],I=qs(o.getEye(),C,!0);if("xyz"===f?(p=C,o.moveSelection(y,w,x)):"xz"===f?(p=Tc(o,g,[0,1,0],C))&&o.moveSelection(p[0]-g[0],0,p[2]-g[2]):"xy"===f?(p=Tc(o,g,[0,0,1],C))&&o.moveSelection(p[0]-g[0],p[1]-g[1],0):"yz"===f?(p=Tc(o,g,[1,0,0],C))&&o.moveSelection(0,p[1]-g[1],p[2]-g[2]):"x"===f||"sx"===f?(I[0]=0,(p=Tc(o,g,I,C))&&(S=p[0]-g[0],"x"===f?o.moveSelection(S,0,0):o.sm().each(function(t){$n(t)&&o.isSizeEditable(t)&&(i=vt(Gs,t.getWidth()+S),n=i/t.getWidth(),t.setWidth(i),Cs(e)&&(t.setHeight(t.getHeight()*n),t.setTall(t.getTall()*n)))}))):"y"===f||"sy"===f?(I[1]=0,(p=Tc(o,g,I,C))&&(S=p[1]-g[1],"y"===f?o.moveSelection(0,S,0):o.sm().each(function(t){$n(t)&&o.isSizeEditable(t)&&(i=vt(Gs,t.getTall()+S),n=i/t.getTall(),t.setTall(i),Cs(e)&&(t.setHeight(t.getHeight()*n),t.setWidth(t.getWidth()*n)))}))):("z"===f||"sz"===f)&&(I[2]=0,(p=Tc(o,g,I,C))&&(S=p[2]-g[2],"z"===f?o.moveSelection(0,0,S):o.sm().each(function(t){$n(t)&&o.isSizeEditable(t)&&(i=vt(Gs,t.getHeight()+S),n=i/t.getHeight(),t.setHeight(i),Cs(e)&&(t.setTall(t.getTall()*n),t.setWidth(t.getWidth()*n)))}))),!p)return;t.p3=p}else if(r===Ye){var O=t.div;O||(O=t.div=Vo(),Mo(t.getView(),O),O.op=a,O.style.background=o.getRectSelectBackground()),o.fi({kind:o._rectSelecting?"betweenRectSelect":"beginRectSelect",event:e}),o._rectSelecting=1,O.rect=Vs(O.op,h),Go(O,O.rect)}else if("pinch"===r&&2===ws(e)){o.fi({kind:o._pinching?"betweenPinch":"beginPinch",event:e}),o._pinching=1;var S=Xr(e);o.handlePinch(S,t.dist),t.dist=S}else"pan"===r||Cs(e)?t.pan(e,l,c):o.isFirstPersonMode()||(ys(e)?t.rotate(e,u,d):(t.pan(e,l,0),o.isWalkable()&&(o.fi({kind:o._walking?"betweenWalk":"beginWalk",event:e}),o._walking=1,o.walk(c/o.getHeight()*o.getCenterInfo().height))));t.point=h},pan:function(t,e,i){var n=this.gv;if(n.isPannable()){var o=n.getCenterInfo(),r=e/n.getWidth()*o.width,a=-1*i/n.getHeight()*o.height;n.fi({kind:n._panning?"betweenPan":"beginPan",event:t}),n._panning=1,n.pan(-r,-a)}},rotate:function(t,e,i){var n=this.gv;n.isRotatable()&&(n.fi({kind:n._rotating?"betweenRotate":"beginRotate",event:t}),n._rotating=1,n.rotate(e,i))},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,i=e.gv,n=i.dm().getHistoryManager(),o=e.div;if(o){var r=i.getDatasInRect(o.rect);if(!r.isEmpty()){var a=i.sm(),s=a.toSelection();r.each(function(t){a.co(t)?s.remove(t):s.add(t)}),a.ss(s)}zs(o)}i._moving&&(delete i._moving,i.fi({kind:"endMove",event:t}),i.onMoveEnded(),n&&n.endInteraction()),i._panning&&(delete i._panning,i.fi({kind:"endPan",event:t}),i.onPanEnded()),i._rotating&&(delete i._rotating,i.fi({kind:"endRotate",event:t}),i.onRotateEnded()),i._86O&&(delete i._86O,i.fi({kind:"endEditRotation",event:t}),n&&n.endInteraction()),i._87O&&(delete i._87O,i.fi({kind:"endEditSize",event:t}),n&&n.endInteraction()),i._pinching&&(delete i._pinching,i.fi({kind:"endPinch",event:t}),i.onPinchEnded()),i._rectSelecting&&(delete i._rectSelecting,i.fi({kind:"endRectSelect",event:t}),i.onRectSelectEnded()),i._walking&&(delete i._walking,i.fi({kind:"endWalk",event:t}),i.onWalkEnded()),e.dist=e.point=e._62O=e.p3=e.movedata=e.div=e._57I=e._32Q=e._31Q=e.foward=ot}});var Vd=function(t){this.gv=t};Us(Vd,e,{_iv:!0,iv:function(){this._iv=!0},face:function(t,e){var i=this.gv.getGL();if(!i||!$n(t))return ot;var n=e.x,o=e.width,r=e.height,a=this.height-e.y-r,s=ft(o/2),h=new Uint8Array(4*o*r),l=0;for(this.iv(),this.validate(t),Uc(i,this.frame),i.readPixels(n,a,o,r,i.RGBA,i.UNSIGNED_BYTE,h),Uc(i,ot),this.iv();l<=s;l++)for(var c=s-l,u=s+l,d=c;d<=u;d++)for(var f=c;f<=u;f++)if(d===c||d===u||f===c||f===u){var g=vc.m[h[4*(d*o+f)]];if(g)return g}},get:function(t,e){this.validate();var i=this.gv.getGL();if(!i)return ot;var n,o,r=t.x,a=t.width,s=t.height,h=this.height-t.y-s,l=ft(a/2),c=new Uint8Array(4*a*s),u=0,d=c.length,f=e?ot:new yh,g=e?ot:{};if(Uc(i,this.frame),i.readPixels(r,h,a,s,i.RGBA,i.UNSIGNED_BYTE,c),Uc(i,ot),e){for(;u<=l;u++)for(var _=l-u,v=l+u,p=_;p<=v;p++)for(var b=_;b<=v;b++)if((p===_||p===v||b===_||b===v)&&(n=this.info(c,4*(p*a+b))))return n}else for(;u<d;u+=4)(n=this.info(c,u))&&(g[(o=n.data)._id]||(f.add(o),g[o._id]=o));return f},info:function(t,e){return this.colorMap[(t[e]<<24)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3]]},validate:function(t){var e=this,i=e.gv,n=i.getGL();if(n){var o=i.getWidth(),r=i.getHeight(),a=n.RGBA,s=n.TEXTURE_2D,h=n.RENDERBUFFER,l=n.FRAMEBUFFER;e.texture||(e.texture=zc(n),e.render=n.createRenderbuffer(),e.frame=n.createFramebuffer()),(e.width!==o||e.height!==r)&&(Hc(n,e.texture),n.texImage2D(s,0,a,o,r,0,a,n.UNSIGNED_BYTE,ot),Nc(n,n.TEXTURE_MIN_FILTER,n.LINEAR),n.bindRenderbuffer(h,e.render),n.renderbufferStorage(h,n.DEPTH_COMPONENT16,o,r),Uc(n,e.frame),n.framebufferTexture2D(l,n.COLOR_ATTACHMENT0,s,e.texture,0),n.framebufferRenderbuffer(l,n.DEPTH_ATTACHMENT,h,e.render),Hc(n,ot),n.bindRenderbuffer(h,ot),Uc(n,ot),e.width=o,e.height=r),e._iv&&(e._iv=!1,Uc(n,e.frame),i._42(t||(e.colorMap={}),1),Uc(n,ot))}}});var Dd=function(t){this.gv=t};Us(Dd,e,{gap:0,size:0,_42:function(t,e){var i=this,n=i.gv,o=n._gridGap,r=n._gridSize;if(n._gridVisible){if(i.gap!==o||i.size!==r){for(var a=[],s=n._gridSize/2,h=o*s,l=0;l<2*s+1;l++){var c=6*l,u=6*(2*s+1)+c;a[c]=-h,a[c+1]=0,a[c+2]=l*o-h,a[c+3]=h,a[c+4]=0,a[c+5]=l*o-h,a[u]=l*o-h,a[u+1]=0,a[u+2]=-h,a[u+3]=l*o-h,a[u+4]=0,a[u+5]=h}i.vs=new Ys(a),i.gap=o,i.size=r}hu(n),Gc(t,e),Zc(t),$c(t,e,1,n._gridColor,n._buffer.vs,i.vs),Kc(t,0,i.vs.length/3,t.LINES),Jc(t),Xc(t,e)}else i.vs=i.gap=i.size=ot}});var Ed=function(t){this.gv=t};Us(Ed,e,{_42:function(t,e){var i=this.gv,n=i._buffer.vs,o=i._axisXColor,r=i._axisYColor,a=i._axisZColor,s=i._originAxisVisible,h=i._centerAxisVisible;if(s||h){var l=At?t.TRIANGLES:t.TRIANGLE_FAN,c=t.LINES;if(hu(i),Gc(t,e),Zc(t),s){var u=i.getCenterInfo(),d=pt(u.width,u.height)/5,f=.8*d,g=.05*d;$c(t,e,1.5,o,n,new Ys([0,0,0,d,0,0,f,g,0,f,0,g,f,-g,0,f,0,-g,f,g,0,0,0,0,0,d,0,g,f,0,0,f,g,-g,f,0,0,f,-g,g,f,0,0,0,0,0,0,d,g,0,f,0,g,f,-g,0,f,0,-g,f,g,0,f])),Kc(t,0,2,c),Kc(t,1,6,l),$c(t,e,ot,r),Kc(t,7,2,c),Kc(t,8,6,l),$c(t,e,ot,a),Kc(t,14,2,c),Kc(t,15,6,l)}if(h){var _=i._center,v=_[0],p=_[1],b=_[2];u=i.getPositionInfo(_);d=pt(u.width,u.height)/20,$c(t,e,1.5,o,n,new Ys([v,p,b,v+d,p,b,v,p,b,v,p+d,b,v,p,b,v,p,b+d])),Kc(t,0,2,c),$c(t,e,ot,r),Kc(t,2,2,c),$c(t,e,ot,a),Kc(t,4,2,c)}Jc(t),Xc(t,e)}}});var kd=function(t){this.gv=t},Pd="edit_tx",Md="edit_ty",Bd="edit_tz",Ld="edit_rx",jd="edit_ry",Rd="edit_rz",zd="edit_sx",Fd="edit_sy",Ad="edit_sz",Wd={};Wd[Pd]=1,Wd[Md]=1,Wd[Bd]=1,Wd[Ld]=1,Wd[jd]=1,Wd[Rd]=1,Wd[zd]=1,Wd[Fd]=1,Wd[Ad]=1,Us(kd,e,{_42:function(t,e,i){var n=this,o=n.gv,r=o.sm().ld();if(o.isEditable(r)&&$n(r)&&(!o.isFirstPersonMode()||!o.isMouseRoamable()&&!Nt)){hu(o);var a,s,h=o.isMovable(r),l=o.isRotationEditable(r),c=o.isSizeEditable(r),u=o._axisXColor,d=o._axisYColor,f=o._axisZColor,g=o._editSizeColor,_=o.getCenterInfo(),v=pt(_.width,_.height)/10,p=v/(i?5:10),b=.7*v,m=.4*b,y=r.p3(),w=y[0],x=y[1],C=y[2];a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],h&&n._17O(t,e,r,i,Pd,u,a,[w,x-p,C,w+b,x-p,C,w+b,x,C,w+b,x,C,w,x,C,w,x-p,C,w,x-p,C+p,w+b,x-p,C+p,w+b,x-p,C,w+b,x-p,C,w,x-p,C,w,x-p,C+p]),s=w+b,c&&n._17O(t,e,r,i,zd,g,a,[s,x-p,C,s+m,x-p,C,s+m,x,C,s+m,x,C,s,x,C,s,x-p,C,s,x-p,C+p,s+m,x-p,C+p,s+m,x-p,C,s+m,x-p,C,s,x-p,C,s,x-p,C+p]),s+=m,l&&n._17O(t,e,r,i,Ld,u,a,[s,x-p,C,s+m,x-p,C,s+m,x,C,s+m,x,C,s,x,C,s,x-p,C,s,x-p,C+p,s+m,x-p,C+p,s+m,x-p,C,s+m,x-p,C,s,x-p,C,s,x-p,C+p]),a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],h&&n._17O(t,e,r,i,Md,d,a,[w,x,C,w,x+b,C,w-p,x+b,C,w-p,x+b,C,w-p,x,C,w,x,C,w,x,C,w,x,C-p,w,x+b,C-p,w,x+b,C-p,w,x+b,C,w,x,C]),s=x+b,c&&n._17O(t,e,r,i,Fd,g,a,[w,s,C,w,s+m,C,w-p,s+m,C,w-p,s+m,C,w-p,s,C,w,s,C,w,s,C,w,s,C-p,w,s+m,C-p,w,s+m,C-p,w,s+m,C,w,s,C]),s+=m,l&&n._17O(t,e,r,i,jd,d,a,[w,s,C,w,s+m,C,w-p,s+m,C,w-p,s+m,C,w-p,s,C,w,s,C,w,s,C,w,s,C-p,w,s+m,C-p,w,s+m,C-p,w,s+m,C,w,s,C]),a=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],h&&n._17O(t,e,r,i,Bd,f,a,[w,x,C,w,x,C+b,w,x-p,C+b,w,x-p,C+b,w,x-p,C,w,x,C,w,x-p,C,w-p,x-p,C,w-p,x-p,C+b,w-p,x-p,C+b,w,x-p,C+b,w,x-p,C]),s=C+b,c&&n._17O(t,e,r,i,Ad,g,a,[w,x,s,w,x,s+m,w,x-p,s+m,w,x-p,s+m,w,x-p,s,w,x,s,w,x-p,s,w-p,x-p,s,w-p,x-p,s+m,w-p,x-p,s+m,w,x-p,s+m,w,x-p,s]),s+=m,l&&n._17O(t,e,r,i,Rd,f,a,[w,x,s,w,x,s+m,w,x-p,s+m,w,x-p,s+m,w,x-p,s,w,x,s,w,x-p,s,w-p,x-p,s,w-p,x-p,s+m,w-p,x-p,s+m,w,x-p,s+m,w,x-p,s])}},_17O:function(t,e,i,n,o,r,a,s){var h=this.gv._buffer;lu(t,e,n,!0,i,o),Yc(t,e,ot,!0,ot,!0,ot,!1),nu(t,e.uDiffuse,r),eu(t,h.vs,new Ys(s),e.aPosition),eu(t,h.ns,new Ys(a),e.aNormal),Zc(t),Kc(t,0,12),Jc(t),qc(t,e)}});var Hd=function(n,o){this.gv=n,this.s=function(t,e,i){return e==ot&&(e=i),e==ot?o.getStyle(t):bh(e,o,n)},this.data=o};Us(Hd,e,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(t,e,i,n){var o,r,a,s,h,l,c,u=this,d=u.gv,f=u.data,g=f._id,_=u.s("batch"),v=d._34O,p=d._33O,b=d.isSelectable(f),m=d.getBrightness(f),y=m!=ot&&1!==m;if(u._iv){if(a=function(t,e,i,n){if(!n)return ot;var o=e[n];if(!o){var r=_n[n]||Cn,a=r.image?[]:ot;o=e[n]={vs:[],ns:[],uv:a,cs:a?ot:r.color?ot:[],bs:r.blend?[]:ot,ps:[],rs:r.brightness?[]:ot,ds:[]}}return o.invalidate=!0,t[i._id]={index:o.ds.length,begin:o.vs.length/3,batch:n},o.ds.push(i),o}(v,p,f,_),u.validate(a,_?_n[_]||Cn:ot),a&&(h=(s=v[g]).size=a.vs.length/3-s.begin,c=a.rs))for(m=y?m:1,l=0;l<h;l++)c.push(m);if($n(f)){var w=d.getWireframe(f);w&&function(t,e,i){var n=t.getBrightness(e),o=Ir(i.color||"white"),r=o[3]<1,a=Math.ceil(i.width)||1,s=(r?"T":"O")+a,h=t._wireframeIndexMap,l=t._wireframeModelMap,c=l[s];c||(c=l[s]={vs:[],cs:[],ps:[],ds:[],T:r,W:a}),c.invalidate=!0;var u=c.vs,d=c.cs,f=c.ds,g=h[e._id]={index:f.length,begin:u.length/3,batch:s};f.push(e),xc(u,rh(e,i.mat),i.short?$u:Ju);var _=g.size=u.length/3-g.begin;wc(d,Pu(o,n),_)}(d,f,w)}u.labelInfo=u.label2Info=u.noteInfo=u.note2Info=u._38o=ot,u._24O(Ve,"getLabel"),u._24O(De,"getLabel2"),u._26O(Ee,"getNote"),u._26O(ke,"getNote2"),u._15O(),u._iv=!1}y&&nu(t,e.uBrightness,m),(r=lu(t,e,i,b,f,"body"))&&(Mu(r,v[g],p),Mu(r,d._polylineIndexMap[g],d._polylineModelMap),Mu(r,d._wireframeIndexMap[g],d._wireframeModelMap)),v[g]||u._80o(t,e,n),d.isLabelVisible(f)&&((o=u.labelInfo)&&(lu(t,e,i,b,f,Ve),u._28O(o,Ve,n)),(o=u.label2Info)&&(lu(t,e,i,b,f,De),u._28O(o,De,n))),d.isNoteVisible(f)&&((o=u.noteInfo)&&(lu(t,e,i,b,f,Ee),u._29O(o,Ee,n)),(o=u.note2Info)&&(lu(t,e,i,b,f,ke),u._29O(o,ke,n))),(o=u._38o)&&u._99O(t,e,o,i,b,n),y&&nu(t,e.uBrightness,1)},validate:function(){},_16O:function(){return $s},_80o:function(){},dispose:function(){},getBodyColor:function(t){var e=this.data,i=this.gv.getBodyColor(e);return i||(t?e.getStyle(t):ot)},_24O:function(t,e){var i=this.data,n=this.gv,o=this.s,r=n[e](i);if(r!=ot){var a=o(t+".scale"),s=o(t+".max"),h=this[t+"Info"]={label:r,textureScale:o(t+".texture.scale"),color:n[e+"Color"](i),font:o(t+".font"),align:o(t+".align"),background:n[e+"Background"](i)},l=h.rect=Bo(h,r);0<s&&s<l.width&&(h.labelWidth=l.width,l.width=s),l.x=l.y=0,l.width*=a,l.height*=a,h.mat=this._16O(o(t+".autorotate"),o(t+".position"),l,o(t+".face"),o(t+".t3"),o(t+".r3"),o(t+".rotationMode"));var c=l.width/2,u=l.height/2;h.vs=new Ys([-c,u,0,-c,-u,0,c,-u,0,c,u,0]),l.width/=a,l.height/=a}},_26O:function(t,e){var i=this.data,n=this.gv,o=this.s,r=n[e](i);if(r!=ot){var a=o(t+".scale"),s=this[t+"Info"]={note:r,textureScale:o(t+".texture.scale"),expanded:o(t+".expanded"),font:o(t+".font"),color:o(t+".color"),align:o(t+".align"),borderWidth:o(t+".border.width"),borderColor:o(t+".border.color"),background:n[e+"Background"](i)};if(s.expanded){var h=o(t+".max"),l=Bo(s,r);l.width+=6,l.height+=2,0<h&&h<l.width&&(s.labelWidth=l.width,l.width=h);var c={x:-l.width/2,y:-8-l.height,width:l.width,height:l.height+8}}else c={x:-6,y:-18,width:12,height:18};s.mat=this._16O(o(t+".autorotate"),o(t+".position"),ot,o(t+".face"),o(t+".t3"),o(t+".r3"),o(t+".rotationMode")),s.rect=c,1!==a&&((c=fs(c)).x*=a,c.height*=a,c.y=-c.height,c.width*=a);var u=c.x,d=c.y,f=c.width,g=c.height;s.vs=new Ys([u,-d,0,u,-d-g,0,u+f,-d-g,0,u+f,-d,0])}},_28O:function(t,e,i){if(i(this.s(e+".transparent"))){var n=t.rect,o=t.textureScale,r=n.width*o,a=n.height*o;if(1<=r&&1<=a){var s=xr(r,a);1!==o&&(s.translate(s,n.x,n.y),s.scale(o,o),s.translate(s,-n.x,-n.y)),Qh(s,t),s.restore(),fu(this,e,t.mat,t.vs,!0)}}},_29O:function(t,e,i){if(i(this.s(e+".transparent"))){var n=t.rect,o=t.textureScale,r=n.x,a=n.y,s=n.width*o,h=n.height*o;if(1<=s&&1<=h){n.x=n.y=0;var l=xr(s,h);1!==o&&l.scale(o,o),Gh(l,t),l.restore(),n.x=r,n.y=a,fu(this,e,t.mat,t.vs,!1)}}},_99O:function(t,e,i,n,o,r){if(i){var a=this.gv,s=this.data,h=a._buffer,l=a._1O,c=i.icons;for(var u in c){var d=c[u],f=i.rects[u];if(f&&r(bh(d.transparent,s,a))){lu(t,e,n,o,s,u);var g=bh(d.shape3d,s,a),_=g?[g]:bh(d.names,s,a),v=_?_.length:0,p=bh(d.textureScale,s,a)||1,b=bh(d.light,s,a);b==ot&&(b=!!g),Yc(t,e,bh(d.blend,s,a),b,bh(d.opacity,s,a),bh(d.reverseFlip,s,a),bh(d.reverseColor,s,a),bh(d.reverseCull,s,a));for(var m=0;m<v;m++){var y=_[m],w=f[m];if(du(this,w.mat),g)fd(a,s,vd(this.s,g),this.s);else{var x=as(y);if(x){var C=w.width*p,I=w.height*p;if(1<=C&&1<=I){var O=xr(C,I);hs(O,x,bh(d.stretch,s,a),0,0,C,I,s,a),O.restore(),zc(t,yr,l),Zc(t,e,l,bh(d.discardSelectable,s,a),h.uv,Uu),eu(t,h.vs,w.vs,e.aPosition),eu(t,h.ns,Nu,e.aNormal),iu(t,h.is,Qu),tu(t,0,Qu.length),Jc(t,e,l)}}}au(a)}qc(t,e)}}}}});var Ud=function(t,e){ho(Ud,this,[t,e])};Us(Ud,Hd,{_16O:function(t,e,i,n,o,r,a,s,h){var l=this.data,c=cu(e,l.s3(),i,n,s,h);return uu(Js(),c,l.p3(),n,o,r,a,t,l.r3(),l.getRotationMode())},clear:function(){var t=this;t.faceMat=t.mat=t.shapeModel=t.left=t.right=t.front=t.back=t.top=t.bottom=t.csg=ot},validate:function(t,e){var i=this,n=i.gv,o=i.data,r=vd(i.s),a=rh(o,n.getMat(o),!r||i.s("shape3d.scaleable"));if(i.clear(),t){var s=[];r?Lu(n,o,r,i.s,i.getBodyColor(),[a],t,s):(Fu(n,o,t,e,a,Zt,s,Cu),Fu(n,o,t,e,a,Jt,s,Iu),Fu(n,o,t,e,a,$t,s,Ou),Fu(n,o,t,e,a,Kt,s,Su),Fu(n,o,t,e,a,Yt,s,Tu),Fu(n,o,t,e,a,qt,s,Vu)),s.length&&(no(t.vs,s),no(t.ns,Rc(s)))}else i.mat=a,(i.shapeModel=r)||(i.vf(Zt),i.vf(Jt),i.vf(Yt),i.vf(qt),i.vf($t),i.vf(Kt))},vf:function(t){if(this.gv.getFaceVisible(this.data,t)){var e=gu(this,t);return e.mat&&(this.faceMat=!0),e}},_80o:function(t,e,i){var n=this,o=n.gv,r=n.data,a=o._cube,s=n.shapeModel;hu(o,n.mat),s?fd(o,r,s,n.s,n.getBodyColor(),i):(eu(t,a.vs,ot,e.aPosition),eu(t,a.ns,ot,e.aNormal),iu(t,a.is),n._18O(t,e,n.left,0,i),n._18O(t,e,n.front,6,i),n._18O(t,e,n.right,12,i),n._18O(t,e,n.back,18,i),n._18O(t,e,n.top,24,i),n._18O(t,e,n.bottom,30,i)),au(o),n.faceMat&&(n._18O(t,e,n.left,0,i,!0),n._18O(t,e,n.front,6,i,!0),n._18O(t,e,n.right,12,i,!0),n._18O(t,e,n.back,18,i,!0),n._18O(t,e,n.top,24,i,!0),n._18O(t,e,n.bottom,30,i,!0))},_18O:function(t,e,i,n,o,r){if(i){if(!o(i.transparent))return;if(r&&!i.mat||!r&&i.mat)return;r&&hu(this.gv,i.mat);var a=this.data,s=this.gv,h=s.getTexture(i.texture,a),l=i.uv,c=i.uvScale,u=i.uvOffset,d=i.discardSelectable;if(h)if(l){for(var f=n/6*8,g=0;g<8;g++)qu[f+g]=l[g];Zc(t,e,h,d,s._buffer.uv,qu,u,c)}else Zc(t,e,h,d,s._cube.uv,ot,u,c);else Zc(t);Yc(t,e,i.blend,i.light,i.opacity,i.reverseFlip,i.reverseColor,i.reverseCull),nu(t,e.uDiffuse,i.color),tu(t,n,6),qc(t,e),Jc(t,e,h),r&&au(s)}}});var Nd=function(t,e){ho(Nd,this,[t,e])};Us(Nd,Hd,{_25Q:1,validate:function(t){var e=this,i=e.gv,n=e.data,o=e.s,r=o("edge.width"),a=n._40I,s=n._41I;if(e.shapeModel=e.info=ot,a&&s){var h,l,c,u,d,f,g,_,v,p,b=n.isLooped(),m=o(Ae),y=st.getEdgeType(m);if(y){var w=y(n,Zh(e,i,n,b,m),i,e._19Q);if(!w.points||w.points.isEmpty())return;f=e.info={},g=w.segments,_=(d=w.points).size();for(var x=a.getElevation(),C=s.getElevation(),I=0;I<_;I++){var O=d.get(I);O.e==ot&&(O.e=x+(C-x)*I/(_-1))}v=mc(d.get(0)),p=mc(d.get(_-1)),0===(P=_%2)?(f.c1=mc(d.get(_/2-1)),f.c2=mc(d.get(_/2))):f.p3=mc(d.get((_-P)/2)),f.s1=v,f.s2=mc(d.get(1)),f.t1=mc(d.get(_-2)),f.t2=p}else{d=new yh,f=e.info={};var S=o("edge.offset"),T=o("edge.center"),V=o("edge.source.t3"),D=o("edge.target.t3"),E=a.p3(),k=s.p3();if(V&&(E[0]+=V[0],E[1]+=V[1],E[2]+=V[2]),D&&(k[0]+=D[0],k[1]+=D[1],k[2]+=D[2]),m===Oe){g=o("edge.segments");var P,M=f.points=o(Fe)||wh;if(_=M.size())v=mc(M.get(0)),p=mc(M.get(_-1)),!T&&S&&(c=qs(v,E,!0),S=pt(S,Ts(E,v)),E=[E[0]+c[0]*S,E[1]+c[1]*S,E[2]+c[2]*S],c=qs(k,p,!0),S=pt(S,Ts(p,k)),k=[k[0]-c[0]*S,k[1]-c[1]*S,k[2]-c[2]*S]),0===(P=_%2)?(h=mc(M.get(_/2-1)),l=mc(M.get(_/2))):f.p3=mc(M.get((_-P)/2)),f.s1=E,f.s2=v,f.t1=p,f.t2=k;else!T&&S&&(c=qs(k,E,!0),u=Ts(E,k),S=Xh(S,u),E=[E[0]+c[0]*S,E[1]+c[1]*S,E[2]+c[2]*S],k=[k[0]-c[0]*S,k[1]-c[1]*S,k[2]-c[2]*S]),h=E,l=k;d.add({x:E[0],y:E[2],e:E[1]}),d.addAll(M),d.add({x:k[0],y:k[2],e:k[1]})}else{var B=Zh(e,i,n,b,m);if(e._19Q||(B=-B),b){var L=E[0],j=E[1],R=E[2],z=a.getTall()/2+B;h=[L-B,j+z,R],l=[L+B,j+z,R],d.add({x:L-B,y:R,e:j}),d.add({x:L-B,y:R,e:j+z}),d.add({x:L+B,y:R,e:j+z}),d.add({x:L+B,y:R,e:j})}else{c=qs(k,E,!0),u=Ts(E,k);var F={x:E[0],y:E[2]},A={x:k[0],y:k[2]},W=Ec(ot,F,A,B),H=W.x-F.x,U=W.y-F.y;S=Xh(S,u),c[0]*=S,c[1]*=S,c[2]*=S,h=[E[0]+c[0]+H,E[1]+c[1],E[2]+c[2]+U],l=[k[0]-c[0]+H,k[1]-c[1],k[2]-c[2]+U],T?(d.add({x:E[0],y:E[2],e:E[1]}),d.add({x:h[0],y:h[2],e:h[1]}),d.add({x:l[0],y:l[2],e:l[1]}),d.add({x:k[0],y:k[2],e:k[1]})):(d.add({x:h[0],y:h[2],e:h[1]}),d.add({x:l[0],y:l[2],e:l[1]}))}}f.c1=h,f.c2=l}f.list=o(Ci)===de?e.createTubeModel(d,g,r/2,t):e.createLineModel(d,g,r,"edge","edge.dash")}}});var Qd=function(t,e){ho(Qd,this,[t,e])};Us(Qd,Ud,{_80o:function(t,e,i){var n=this,o=n.gv,r=n.shapeModel;hu(o,n.mat),r?fd(o,n.data,r,n.s,n.getBodyColor(),i):(_u(n,t,e,n.left,i),_u(n,t,e,n.front,i),_u(n,t,e,n.right,i),_u(n,t,e,n.back,i),_u(n,t,e,n.top,i),_u(n,t,e,n.bottom,i)),au(o)},validate:function(t,e){var i,n,o=this,r=o.s,a=o.data,s=a.p3(),h=a._thickness/2,l=a.isClosePath(),c=a.getPoints(),u=a.getSegments(),d=r(Ii),f=t&&t.uv;if(o.clear(),h<0)n=o.shapeModel=ol(c,u,r(Vi),r(Di),d,r(Ei),a.getTall(),a.getElevation(),l),r(Oi)?r("shape3d.image")||delete n.uv:(delete n.vs,delete n.ns,delete n.uv),r("shape3d.top.image")||delete n.top_uv,r("shape3d.bottom.image")||delete n.bottom_uv;else if(r(Ci)===de)i=Er(c,u,d,l),n=o.shapeModel={vs:[]},r("shape3d.image")&&(n.uv=[],n.sum=r(Ei)||xo(i)||1,n.len=0),r(Vi)&&!l&&(n.top_vs=[],r("shape3d.top.image")&&(n.top_uv=[])),r(Di)&&!l&&(n.bottom_vs=[],r("shape3d.bottom.image")&&(n.bottom_uv=[])),o._12O(i,h);else{var g,_,v,p,b,m,y,w,x,C;i=Er(c,u,d,l),b=o.vf(Yt,f,!1,e),h&&(m=o.vf(qt,f,!1,e),y=l?ot:o.vf(Zt,f,!1,e),w=l?ot:o.vf(Jt,f,!1,e),x=o.vf($t,f,!1,e),C=o.vf(Kt,f,!1,e)),h?o._12O(i,h):b&&i.forEach(function(t){if(0<(p=t.length))for(g=t[0],v=1;v<p;v++)_=t[v],o.addV(b.vs,g,_),g=_}),o._20Q(i),t||(b&&(b.ns=Rc(b.vs),bd(b,"vs"),bd(b,Ge)),h&&(m&&(m.ns=Rc(m.vs),bd(m,"vs"),bd(m,Ge)),y&&(y.ns=Rc(y.vs),bd(y,"vs"),bd(y,Ge)),w&&(w.ns=Rc(w.vs),bd(w,"vs"),bd(w,Ge)),x&&(x.ns=Rc(x.vs),bd(x,"vs"),bd(x,Ge)),C&&(C.ns=Rc(C.vs),bd(C,"vs"),bd(C,Ge))))}var I,O=o.mat=Js();kc(O,s),Nl(O,a.r3(),a.getRotationMode()),kc(O,[-(I=s)[0],-I[1],-I[2]]),t&&(Ru(o,O,t,n),o.clear())},_20Q:function(t){var e,i,n,o,r,a,s,h=this,l=h.front,c=h.back,u=h.top,d=h.bottom,f=l?l.tuv:ot,g=c?c.tuv:ot,_=u?u.tuv:ot,v=d?d.tuv:ot,p=0;(f||g||_||v)&&(e=h.s(Ei)||xo(t)||1,t.forEach(function(t){if(0<(i=t.length))for(a=t[0],n=1;n<i;n++)s=t[n],o=p/e,p+=Ts(a,s),r=p/e,h._14O(l,o,r),h._14O(c,1-r,1-o),h._14O(u,o,r),h._14O(d,o,r),a=s}))},_14O:function(t,e,i){if(t){var n=t.uv,o=t.tuv;if(o){if(n)var r=n[0]+(n[6]-n[0])*e,a=n[1]+(n[7]-n[1])*e,s=n[2]+(n[4]-n[2])*e,h=n[3]+(n[5]-n[3])*e,l=n[2]+(n[4]-n[2])*i,c=n[3]+(n[5]-n[3])*i,u=n[0]+(n[6]-n[0])*i,d=n[1]+(n[7]-n[1])*i;else s=r=e,c=h=1,u=l=i,d=a=0;o.push(s,h,l,c,u,d,u,d,r,a,s,h)}}},_13O:function(t){var e=t.uv,i=t.tuv;i&&(e?i.push(e[2],e[3],e[4],e[5],e[6],e[7],e[6],e[7],e[0],e[1],e[2],e[3]):i.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(t,e){var i,n,o,r,a,s=this;t.forEach(function(t){if(0<(a=t.length))for(i={p:t[0],n:!0},r=1;r<a;r++)n=t[r],o=r<a-1?t[r+1]:ot,s.addPoint(i,n,o,e,t)})},addPoint:function(t,e,i,n,o){var r,a,s,h,l,c,u,d,f,g=this,_=t.p,v=t.f,p=t.b,b=g.s("shape3d.side")||Hs,m=g.s("shape3d.start.angle"),y=g.shapeModel,w=g.data.isClosePath();if(t.n&&(t.n=!1,v=w&&2<o.length?Ec(o[o.length-2],_,e,n):Ec(ot,_,e,n),p=Dc(_,v),y?y.top_vs&&g._10O(p,v,b,m,y.top_vs,y.top_uv):(r=g.left)&&(g.addV(r.vs,p,v),g._13O(r))),a=i?Ec(_,e,i,n):w&&2<o.length?Ec(_,e,o[1],n):Ec(_,e,ot,n),s=Dc(e,a),y){var x,C,I=y.vs,O=y.uv,S=y.sum;for(O&&(x=y.len/S,y.len+=Ts(_,e),C=y.len/S),c=g._9O(p,v,b,m),u=g._9O(s,a,b,m),d=0;d<b;d++)no(I,c[f=d+1]),no(I,u[d]),no(I,c[d]),no(I,u[d]),no(I,c[f]),no(I,u[f]),O&&(h=d/b,l=f/b,O.push(x,l,C,h,x,h,C,h,x,l,C,l));!i&&y.bottom_vs&&g._10O(s,a,b,m,y.bottom_vs,y.bottom_uv,!0)}else!i&&(r=g.right)&&(g.addV(r.vs,a,s),g._13O(r)),(r=g.front)&&g.addV(r.vs,v,a),(r=g.back)&&g.addV(r.vs,s,p),(r=g.top)&&g.addH(r.vs,v,a,s,p,!0),(r=g.bottom)&&g.addH(r.vs,p,s,a,v);t.p=e,t.f=a,t.b=s},_10O:function(t,e,i,n,o,r,a){var s,h,l=this.data,c=this._9O(t,e,i,n),u=(t.x+e.x)/2,d=(t.y+e.y)/2,f=l.getElevation(),g=0;for(g=0;g<i;g++)a?(no(o,c[g]),no(o,c[g+1])):(no(o,c[g+1]),no(o,c[g])),no(o,[u,f,d]),r&&(h=a?(s=Ot*(g+1)/i+n,Ot*g/i+n):(s=Ot*g/i+n,Ot*(g+1)/i+n),r.push(.5-.5*mt(h),.5-.5*wt(h),.5-.5*mt(s),.5-.5*wt(s),.5,.5))},_9O:function(t,e,i,n){for(var o,r,a=this.data,s=[],h=(t.x+e.x)/2,l=(t.y+e.y)/2,c=a.getTall()/2,u=a.getElevation(),d=0;d<=i;d++)r=mt(o=Ot*d/i+n),s.push([h+(t.x-h)*r,u+c*wt(o),l+(t.y-l)*r]);return s},addV:function(t,e,i){var n=e.x,o=e.y,r=i.x,a=i.y,s=this.data,h=s.getElevation(),l=s.getTall()/2;t.push(n,h-l,o,r,h-l,a,r,h+l,a,r,h+l,a,n,h+l,o,n,h-l,o)},addH:function(t,e,i,n,o,r){var a=this.data,s=a.getTall()/2,h=a.getElevation()+(r?s:-s);t.push(e.x,h,e.y,i.x,h,i.y,n.x,h,n.y,n.x,h,n.y,o.x,h,o.y,e.x,h,e.y)},vf:function(t,e,i,n){var o,r=this.gv.getFaceVisible(this.data,t);return(i||r)&&((o=gu(this,t,n)).vs=[],o.tuv=r&&(o.texture||e)?[]:ot,o.visible=r),o}});var Gd=function(t,e){ho(Gd,this,[t,e])};Us(Gd,Hd,{_25Q:1,validate:function(t){var e=this.data,i=this.s,n=e.getPoints(),o=n.size();if(this.shapeModel=this.info=ot,1<o){var r=this.info={},a=e.getSegments(),s=e.getThickness(),h=mc(n.get(0)),l=mc(n.get(o-1)),c=o%2;0===c?(r.c1=mc(n.get(o/2-1)),r.c2=mc(n.get(o/2))):r.p3=mc(n.get((o-c)/2)),r.s1=h,r.s2=mc(n.get(1)),r.t1=mc(n.get(o-2)),r.t2=l,r.list=i(Ci)===de?this.createTubeModel(n,a,s/2,t):this.createLineModel(n,a,s,"shape.border","shape.dash")}}}),ro(st,{accordionViewExpandIcon:Fn(aa),accordionViewCollapseIcon:Fn(aa,!0),accordionViewLabelColor:Wa,accordionViewLabelFont:Ha,accordionViewTitleBackground:ra,accordionViewSelectBackground:va,accordionViewSelectWidth:3,accordionViewSeparatorColor:N,splitViewDividerSize:1,splitViewDividerBackground:ra,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:le,rect:[2,2,12,12],background:aa}]},propertyViewLabelColor:Aa,propertyViewLabelSelectColor:Wa,propertyViewLabelFont:Ha,propertyViewExpandIcon:Fn(ha),propertyViewCollapseIcon:Fn(ha,!0),propertyViewBackground:sa,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:da,propertyViewColumnLineColor:da,propertyViewSelectBackground:va,listViewLabelColor:Aa,listViewLabelSelectColor:Wa,listViewLabelFont:Ha,listViewRowLineVisible:!1,listViewRowLineColor:da,listViewSelectBackground:va,treeViewLabelColor:Aa,treeViewLabelSelectColor:Wa,treeViewLabelFont:Ha,treeViewExpandIcon:Fn(ua),treeViewCollapseIcon:Fn(ua,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:da,treeViewSelectBackground:va,tableViewLabelColor:Aa,tableViewLabelSelectColor:Wa,tableViewLabelFont:Ha,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:da,tableViewColumnLineColor:da,tableViewSelectBackground:va,treeTableViewLabelColor:Aa,treeTableViewLabelSelectColor:Wa,treeTableViewLabelFont:Ha,treeTableViewExpandIcon:Fn(ua),treeTableViewCollapseIcon:Fn(ua,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:da,treeTableViewColumnLineColor:da,treeTableViewSelectBackground:va,tableHeaderLabelColor:Aa,tableHeaderLabelFont:Ha,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:ca,tableHeaderBackground:sa,tableHeaderMoveBackground:ia,tableHeaderInsertColor:va,tableHeaderSortDescIcon:An(ha,!0),tableHeaderSortAscIcon:An(ha),tabViewTabGap:1,tabViewLabelColor:Wa,tabViewLabelFont:Ha,tabViewTabBackground:ra,tabViewSelectWidth:3,tabViewSelectBackground:va,tabViewMoveBackground:ia,tabViewInsertColor:va,toolbarLabelColor:Aa,toolbarLabelSelectColor:Wa,toolbarLabelFont:Ha,toolbarBackground:sa,toolbarSelectBackground:va,toolbarItemGap:8,toolbarSeparatorColor:la},!0);var Xd={translateX:1,sortColumn:1},Yd={sortable:1,sortOrder:1,sortFunc:1},qd={focusData:1},Zd={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Jd={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},$d=function(t,e){e.add(t),t.hasChildren()&&t.eachChild(function(t){$d(t,e)})},Kd=function(t,e,i,n,o,r,a,s,h,l,c){var u,d=i.getValueType(),f=i.getAlign();if(i.getEnumValues()){var g=i.toEnumLabel(e),_=Ua||0,v=0,p=r,b=st.getTextSize(n,g).width;return(u=as(i.toEnumIcon(e)))&&(v=r+Ua/2,"center"===f?v+=(s-(_+b))/2:"right"===f&&(v=v+s-(_+b)),ss(t,u,v,a+h/2),p=v+Ua/2),void(g!=ot&&(u?bs(t,g,n,o,p,a,s-(p-r),h):bs(t,g,n,o,r,a,s,h,f)))}return(e=i.formatValue(e))!=ot?d===Ri?void Mr(t,r,a,s,h,e):d===ji||!d&&Xn(e)?(u=as(e?we:xe),void ss(t,u,r+s/2,a+h/2,l,c)):void bs(t,e,n,o,r,a,s,h,f):void 0},tf=function(t,e){var i=e.view,n=i.getDataModel().getHistoryManager(),o=Qo(t),r=e.column||e.property;n&&n.beginInteraction(),(e.editor=t).info=e,i.setCurrentEditor(t),i.getView().insertBefore(o,i._79O),Go(t,e.editorRect),t.setFocus?t.setFocus():No(t),t.commitValue=function(){t._17Q&&(t=t._17Q),i.setValue(e.data,r,t.getValue?t.getValue():t.value),t.close&&t.close(),zs(o)},r.onEditorCreated&&r.onEditorCreated(e)},ef=function(t,e,i,n,o){var r=Fs(t,i),a=e.value,s=e.view,h=o.getValueType();return r.onblur=r.onchange=function(){s.endEditing()},"input"===t?((a=o.formatValue(a))!=ot&&(r.value=a),r.onkeydown=function(t){vr(t)&&s.endEditing()},(h===zi||h===Fi)&&r.addEventListener(Ji,st.numberListener,!1)):t===Ye&&n.forEach(function(t){var e=nt.createElement("option");e.innerHTML=o.toEnumLabel(t),e.value=t,o.isEnumEqual(a,t)&&(e.selected=!0),Mo(r,e)}),tf(r,e),r},nf=rt.widget={},of=function(t,e,i){Us("ht.widget."+t,e,i)};ro(Va,{ms_value:function(t){t.getValue=function(t){var e=this.getItemById(t),i=e.element;return i?i.getValue?i.getValue():i.value:e.selected},t.setValue=function(t,e){var i=this.getItemById(t),n=i.element;n?n.setValue?n.setValue(e):n.value=e:(i.selected=e,this.iv())},t.v=function(t,e){if(2===arguments.length)this.setValue(t,e);else{if(!Yn(t))return this.getValue(t);for(var i in t)this.setValue(i,t[i])}return this}},_46o:function(t){t._icon=ot,t._accessType=ot,t._valueType=ot,t._editable=!1,t._batchEditable=!0,t._align=Zt,t._nullable=!0,t._emptiable=!1,t.setParent=Sn,t.formatValue=function(t){var e=this._valueType;if(this.getEnumValues())return this.toEnumLabel(t);if(e===ji)return!!t;if(t!=ot){if(e===zi)return dt(t);if(Gn(t))return io(t)}return t},t.setEnum=function(t,e,i,n,o,r){t&&!Zn(t)&&t.values&&(n=t.editable,i=t.icons,e=t.labels,o=t.strict,r=t.maxHeight,t=t.values),Jn(t)&&(t=t._as),Jn(e)&&(e=e._as),Jn(i)&&(i=i._as),this._enumValues=t,this._enumLabels=e,this._enumIcons=i,this._enumEditable=n,this._enumStrict=o==ot||o,this._enumMaxHeight=r,t&&t.length&&Gn(t[0])&&(this._valueType=Fi),this.fp("enum",!1,!0)},t.getEnumMaxHeight=function(){return this._enumMaxHeight},t.isEnumEditable=function(){return this._enumEditable},t.getEnumValues=function(){return this._enumValues},t.getEnumLabels=function(){return this._enumLabels},t.getEnumIcons=function(){return this._enumIcons},t.isEnumStrict=function(){return this._enumStrict},t.isEnumEqual=function(t,e){return this._enumStrict?t===e:t==e},t.toEnumLabel=function(t){var e=this._enumValues,i=this._enumLabels;if(e&&i)for(var n=0;n<e.length;n++)if(this.isEnumEqual(t,e[n]))return i[n];return t},t.toEnumIcon=function(t){var e=this._enumValues,i=this._enumIcons;if(e&&i)for(var n=0;n<e.length;n++)if(this.isEnumEqual(t,e[n]))return i[n];return N}},_45o:function(t){t._87o=function(t,e,i,n,o,r){if(t){var a=this._90I,s=Vo(1);this._columnLineVisible&&(o-=1),this._rowLineVisible&&(r-=1),o<=0||r<=0||(this._90I||(a=this._90I={}),a[e]||(a[e]=new yh),Go(s,this.tx()+i,this.ty()+n,o,r),Mo(s,t),this._view.insertBefore(s,this._79O),t.onParentAdded&&t.onParentAdded(s),a[e].add(s))}},t._76o=function(){var t=this._90I;if(t){for(var e in t)t[e].each(function(t){zs(t)});delete this._90I}},t._77o=function(t){if(this._90I){var e=this._90I[t];e&&(e.each(function(t){zs(t)}),delete this._90I[t])}}},_47o:function(t){t.getValue=function(t,e){return e.getValue?e.getValue(t,e,this):po(t,e.getAccessType(),e.getName())},t.setValue=function(t,e,i){if(e.isEmptiable()||""!==i||(i=N),e.isNullable()||i!=ot){var n=this,o=e.getName(),r=e.getAccessType(),a=e.getValueType();a===zi&&Qn(i)?i=kt(i):a===Fi&&Qn(i)?i=parseFloat(i):a===ji&&Qn(i)&&(i="true"===i),n._batchEditable&&e._batchEditable&&n.isSelected(t)?n.sm().each(function(t){e.setValue?e.setValue(t,e,i,n):bo(t,r,o,i)}):e.setValue?e.setValue(t,e,i,n):bo(t,r,o,i)}},t.setCurrentEditor=function(t){this.endEditing(),this._currentEditor=t,this.redraw()},t.isEditing=function(t,e){var i=this._currentEditor;if(!i)return!1;if(e){var n=i.info;return!!n&&((n.column||n.property)===e&&n.data===t)}return!0},t.endEditing=function(){var t=this._currentEditor,e=this.getDataModel().getHistoryManager();t&&(delete this._currentEditor,t.commitValue&&t.commitValue(t.info),this.redraw(),e&&e.endInteraction())},t.beginEditing=function(t){this.endEditing();var i=this,n=t.column||t.property;if(n.beginEditing)n.beginEditing(t);else{var o=t.data,e=t.value,r=i.getSelectBackground(o),a=n.getEnumValues(),s=n.getSlider(),h=n.getColorPicker();if(s){var l=ns(nf.Slider,s);return l.setValue(e),l.getView().onblur=function(){i.endEditing()},l.isInstant()&&(l.onValueChanged=function(){i.setValue(o,n,l.getValue())}),void tf(l,t)}if(h||n.getValueType()===Ri){var c=ns(nf.ColorPicker,h);return c.setValue(e),c.onClosed=function(){i.endEditing()},c.isInstant()&&(c.onValueChanged=function(t,e){i.setValue(o,n,e)}),tf(c,t),void c.open()}if(a){if(nf.ComboBox){var u=new nf.ComboBox;u.setValue(e),u.setValues(a),u.setLabels(n.getEnumLabels()),u.setIcons(n.getEnumIcons()),u.setEditable(n.isEnumEditable()),u.setStrict(n.isEnumStrict()),u.setMaxHeight(n.getEnumMaxHeight()),u.onClosed=function(){i.endEditing()},tf(u,t),u.open()}else ef(Ye,t,r,a,n);return}if(n.getValueType()===ji||Xn(e))return void i.setValue(o,n,!e);if(n.getItemEditor()){var d=new(gs(n.getItemEditor()))(o,n,i,t),f=d.getView();return(f._17Q=d).setValue(e),ko(f),tf(f,t),void(d.editBeginning&&d.editBeginning())}ef("input",t,r,ot,n)}}},_44o:function(t){t.init=function(t){var e=this,i=e.th=new mf(t),n=e._view=To(1,e);e.tv=e._tableView=t,Mo(n,i.getView()),Mo(n,t.getView()),i.mp(function(t){t.property===me&&e.iv()}),e.iv()},t.getTableView=function(){return this.tv},t.getTableHeader=function(){return this.th},t.getDataModel=function(){return this.tv.dm()},t.getColumnModel=function(){return this.tv.getColumnModel()},t.setColumns=function(t){this.tv.setColumns(t)},t.addColumns=function(t){this.tv.addColumns(t)},t.endEditing=function(){this.tv.endEditing()},t.validateImpl=function(){var t=this.th,e=zo(t),i={x:0,y:0,width:this.getWidth(),height:e};Go(t,i),i.y=e,i.height=vt(0,this.getHeight()-e),Go(this.tv,i)}},ms_vs:function(t){t._41o=function(){return this._29I.height<this._59I},t._43o=function(){var t=this;t._41o()&&(t._58I||(Lt(function(){t._94O()},qa),t.iv()),t._58I=new Date)},t._94O=function(){var t=this;t._58I&&((new Date).getTime()-t._58I.getTime()>=qa?(delete t._58I,t.iv()):Lt(function(){t._94O()},qa))},t._93I=function(){var t=this,e=t._27I;if(t._58I||!t._autoHideScrollBar){e||Mo(t._79O,e=t._27I=Vo());var i=t._29I,n=i.height,o=t._59I,r=t.getScrollBarSize(),a=i.width-r-2,s=n*(-t.ty()/o),h=n*(n/o),l=e.style;n<o?(h<Za&&((s=s+h/2-Za/2)<0&&(s=0),n<s+Za&&(s=n-Za),h=Za),l.visibility=Qe,l.background=t.getScrollBarColor(),l.borderRadius=r/2+ae,Go(e,a,s,r,h)):l.visibility=Ne}else e&&(e.style.visibility=Ne)}},ms_hs:function(t){t._40o=function(){return this._29I.width<this._91I},t._42o=function(){var t=this;t._40o()&&(t._95O||(Lt(function(){t._94I()},qa),t.iv()),t._95O=new Date)},t._94I=function(){var t=this;t._95O&&((new Date).getTime()-t._95O.getTime()>=qa?(delete t._95O,t.iv()):Lt(function(){t._94I()},qa))},t._92I=function(){var t=this,e=t._28I;if(t._95O||!t._autoHideScrollBar){e||Mo(t._79O,e=t._28I=Vo());var i=t._29I,n=i.width,o=t._91I,r=t.getScrollBarSize(),a=i.height-r-2,s=n*(-t.tx()/o),h=n*(n/o),l=e.style;n<o?(h<Za&&((s=s+h/2-Za/2)<0&&(s=0),n<s+Za&&(s=n-Za),h=Za),l.visibility=Qe,l.background=t.getScrollBarColor(),l.borderRadius=r/2+ae,Go(e,s,a,h,r)):l.visibility=Ne}else e&&(e.style.visibility=Ne)}}}),rs(we,Rn(16,16,[{type:ce,rect:[1,1,14,14],background:va},{type:he,rect:[1,1,14,14],width:1,color:fa},{type:fe,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),rs(xe,Rn(16,16,{type:he,rect:[1,1,14,14],width:1,color:fa})),rs(Ce,Rn(16,16,[{type:ue,rect:[2,2,12,12],borderWidth:1,borderColor:fa,background:"#FFF"},{type:ue,rect:[4,4,8,8],background:va}])),rs(Ie,Rn(16,16,{type:ue,rect:[2,2,12,12],borderWidth:1,borderColor:fa})),Va._15Q=function(t){t._29I=Dn,t._59I=0,t._91I=0,t._5o=function(t){var e=this;e._30I=new yh,e._rows=new yh,e._rowMap={},e._31I=0,e._14I=0,e._view=To(1,e),e._canvas=Do(e._view),Mo(e._view,e._79O=Vo()),e.dm(t||new Ih)},t.getCheckIcon=function(t){var e=this.sm(),i=e.co(t);return e.sg()?as(i?Ce:Ie):as(i?we:xe)},t.checkData=function(t){var e=this.sm(),i=e.co(t);e.sg()&&i||(this._32o=1,i?e.rs(t):e.as(t),delete this._32o)},t.getDataAt=function(t){t.target&&(t=this.lp(t));var e=ft(t.y/this._rowHeight),i=this._rows;return e<0||e>=i.size()?ot:i.get(e)},t.onDataDoubleClicked=function(){},t.onDataClicked=function(){},t.adjustTranslateX=function(){return 0},t.adjustTranslateY=function(t){var e=this.getHeight()-this._59I;return t<e&&(t=e),0<t?0:dt(t)},t.onPropertyChanged=function(t){var e=t.property;Zd[e]?this.ivm():qd[e]||this.redraw(),e===yi?this._42o():e===wi&&this._43o()},t.getLabel=function(t){return t.toLabel()},t.getLabelFont=function(){return this._labelFont},t.getLabelColor=function(t){if(this.isCheckMode()){if(this._focusData===t)return this._labelSelectColor}else if(this.isSelected(t))return this._labelSelectColor;return this._labelColor},t.getStartRowIndex=function(){return this._31I},t.getEndRowIndex=function(){return this._14I},t.getRowDatas=function(){return this._rows},t.getRowIndex=function(t){return this._rowMap[t._id]},t.getRowSize=function(){return this._rows.size()},t.getViewRect=function(){return fs(this._29I)},t.isVisible=function(t){return!this._visibleFunc||this._visibleFunc(t)},t.getCurrentSortFunc=function(){return this._sortFunc},t.setDataModel=function(t){var e=this,i=e._dataModel,n=e._3o;i!==t&&(i&&(i.umm(e.handleDataModelChange,e),i.umd(e.handleDataPropertyChange,e),i.umh(e._15o,e),n||i.sm().ums(e._16o,e)),(e._dataModel=t).mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),t.mh(e._15o,e),n?n._21I(t):t.sm().ms(e._16o,e),e.fp("dataModel",i,t))},t.validateModel=function(){var t=this;t._rows.clear(),t._rowMap={},t.buildChildren(t._dataModel._roots);var e=t._rows=t._rows.toList(t.isVisible,t),i=0,n=t.getCurrentSortFunc(),o=e.size();for(n&&e.sort(n);i<o;i++)t._rowMap[e.get(i)._id]=i},t.buildChildren=function(t){var e=this;t.each(function(t){e._rows.add(t),e.buildChildren(t._children)})},t.handleDataModelChange=function(){this.ivm()},t.handleDataPropertyChange=function(t){"parent"===t.property?this.ivm():this.invalidateData(t.data)},t._15o=function(){this.ivm()},t._16o=function(t){t.datas.each(this.invalidateData,this),this.onSelectionChanged(t)},t.onSelectionChanged=function(t){var e=this.sm();!this.isAutoMakeVisible()||1!==e.size()||"set"!==t.kind&&"append"!==t.kind||this._32o||this.makeVisible(e.ld())},t.makeVisible=function(t){t&&(this._23I=t,this.iv())},t.scrollToIndex=function(t){var e=this._29I,i=e.height,n=this._rowHeight,o=n*t;0<=t&&t<this._rows.size()&&0<i&&(o+n>e.y+i?this.ty(-o+i-n):o<e.y&&this.ty(-o))},t.ivm=function(){this.invalidateModel()},t.invalidateModel=function(){this._96I||(this._96I=1,this._32I=1,delete this._24I,this.iv())},t.redraw=function(){this._32I||(this._32I=1,delete this._24I,this.iv())},t.invalidateData=function(t){Wt?this.redraw():this._32I||(this._24I||(this._24I={}),this._24I[t._id]=t,this.iv())},t.getFocusData=function(){return this._focusData},t.setFocusDataById=function(t){this.setFocusData(this.dm().getDataById(t))},t.setFocusData=function(t){var e=this._focusData;e!==t&&(this._focusData=t,this.fp("focusData",e,t),e&&this.invalidateData(e),t&&(this.invalidateData(t),this.isAutoMakeVisible()&&this.makeVisible(t)))},t.drawRowBackground=function(t,e,i,n,o,r,a){var s=this.isCheckMode();(e===this._focusData&&s||i&&!s)&&Mr(t,n,o,r,a,this.getSelectBackground(e))},t.drawData=function(t,e,i){var n=this._rowHeight,o=n*i,r=this._29I,a=r.x,s=r.width;t.save(),t.beginPath(),t.rect(a,o,s,n),t.clip(),this._87o(this.drawRow(t,e,this.isSelected(e),a,o,s,n),i,a,o,s,n),t.restore(),this._rowLineVisible&&Mr(t,a,o+n-1,s,1,this._rowLineColor)},t._12I=function(t){var e=this._31I,i=this._29I,n=i.x,o=i.y,r=i.width,a=i.height;for(t.beginPath(),t.rect(n,o,r,a),t.clip(),t.clearRect(n,o,r,a),this._76o(),this._93db(t);e<this._14I;e++)this.drawData(t,this._rows.get(e),e);this._92db(t)},t._13I=function(e){for(var t,i=this,n=i._rowHeight,o=i._29I,r=o.x,a=o.width,s=i._31I,h=i._30I;s<i._14I;s++)t=i._rows.get(s),i._24I[t._id]&&h.add({data:t,index:s});h.isEmpty()||(e.beginPath(),h.each(function(t){e.rect(r,t.index*n,a,n)}),e.clip(),h.each(function(t){e.clearRect(r,t.index*n,a,n)}),h.each(function(t){i._77o(t.index)}),i._93db(e),h.each(function(t){i.drawData(e,t.data,t.index)}),i._92db(e),h.clear())},t.validateImpl=function(){var t=this,e=t._canvas,i=t.getWidth(),n=t.getHeight(),o=t._rowHeight,r=t._32I;(i!==e.clientWidth||n!==e.clientHeight)&&(Po(e,i,n),r=1);var a=!Et;t._96I&&!a&&t.validateModel();var s=t._29I,h={x:-t.tx(),y:-t.ty(),width:i,height:n},l=t._rows.size(),c=Ao(e),u=t._23I;r||uo(h,s)||(r=1),t._29I=h,t._59I=l*o,t._31I=ft(h.y/o),t._14I=gt((h.y+h.height)/o),t._31I<0&&(t._31I=0),t._14I>l&&(t._14I=l),t._99I&&r&&t._99I(),Wo(c,t.tx(),t.ty(),1),r?t._12I(c):t._24I&&t._13I(c),t._93I(),t._92I(),c.restore(),t._32I=t._24I=t._96I=ot,u&&(t.scrollToIndex(t.getRowIndex(u)),delete t._23I),t.tx(t.tx()),t.ty(t.ty())}},Va._48o=function(t){t._rootVisible=!0,t._rootData=ot,t._35o=function(){this._expandMap={},this._levelMap={}},t.validateModel=function(){var t=this,e=t._rootData;t._rows.clear(),t._levelMap={},t._rowMap={},t._currentLevel=0,e?t._rootVisible?t.isVisible(e)&&t.buildData(e):t.buildChildren(e):t.buildChildren(),delete t._currentLevel},t.buildData=function(t){var e=t._id,i=this._rows;this._rowMap[e]=i.size(),i.add(t),this._levelMap[e]=this._currentLevel,this.isExpanded(t)&&(this._currentLevel++,this.buildChildren(t),this._currentLevel--)},t.buildChildren=function(t){var e=this,i=t?t._children:e._dataModel._roots,n=e.getCurrentSortFunc();n&&e.isChildrenSortable(t)?i.toList(e.isVisible,e).sort(n).each(e.buildData,e):i.each(function(t){e.isVisible(t)&&e.buildData(t)})},t.getLevel=function(t){return this._levelMap[t._id]},t.getToggleIcon=function(t){var e=this._loader,i=this._collapseIcon;return e&&!e.isLoaded(t)?i:t.hasChildren()?this.isExpanded(t)?this._expandIcon:i:ot},t.isCheckMode=function(){return this._checkMode!=ot},t.isChildrenSortable=function(){return!0},t.handleDataModelChange=function(t){t.kind===ve?delete this._expandMap[t.data._id]:t.kind===pe&&(this._expandMap={}),this.ivm()},t.toggle=function(t){this.isExpanded(t)?this.collapse(t):this.expand(t)},t.isExpanded=function(t){return 1===this._expandMap[t._id]},t.expand=function(t){var e=this._loader;this.isExpanded(t)||(e&&!e.isLoaded(t)&&e.load(t),this._expandMap[t._id]=1,this.ivm(),this.onExpanded(t))},t.onExpanded=function(){},t.collapse=function(t){this.isExpanded(t)&&(delete this._expandMap[t._id],this.ivm(),this.onCollapsed(t))},t.onCollapsed=function(){},t.expandAll=function(){var e=this;e._dataModel.each(function(t){t.hasChildren()&&(e._expandMap[t._id]=1)}),e.ivm()},t.collapseAll=function(){this._expandMap={},this.ivm()},t.makeVisible=function(t){if(t){if(!this._rootData||t.isDescendantOf(this._rootData)){for(var e=t._parent;e;)this.expand(e),e=e._parent;this._23I=t,this.iv()}}},t.checkData=function(t){var e,i=this._checkMode,n=this.sm(),o=n.co(t);if(!n.sg()||!o){if(this._32o=1,i===Qt)o?n.rs(t):n.as(t);else if(i===mi)(e=new yh(t)).addAll(t._children);else if("descendant"===i)e=new yh,$d(t,e);else if("all"===i&&(e=new yh,$d(t,e),!o))for(var r=t._parent;r;)e.add(r),r=r._parent;e&&(o?n.rs(e):n.as(e)),delete this._32o}},t._97I=function(t,e,i,n,o,r,a){var s=this,h=s._indent,l=s._levelMap[e._id],c=s.getIconWidth(e),u=as(s.getToggleIcon(e));u?(ss(t,u,(n+=h*l)+h/2,o+a/2,e,s),n+=h):n+=h*(l+1),s._checkMode&&(ss(t,s.getCheckIcon(e),n+h/2,o+a/2,e,s),n+=h),s.drawIcon(t,e,n,o,c,a),s.drawLabel(t,e,n+c,o,a)}},Va._14Q=function(t){t.getIcon=function(t){return t.getIcon()},t.getIconWidth=function(t){return this.getIcon(t)?this._indent:0},t.drawIcon=function(t,e,i,n,o,r){if(o){var a=this.getBodyColor(e),s=as(this.getIcon(e),a);s&&(r-=this.isRowLineVisible()?1:0,hs(t,s,Mi,i,n,o,r,e,this,a),zr(t,this.getBorderColor(e),i,n,o,r))}},t.drawLabel=function(t,e,i,n,o){bs(t,this.getLabel(e),this.getLabelFont(e),this.getLabelColor(e),i,n,0,o)}},Va._50o=function(t){t._98I=function(){var t=this._39o=new Ih;this._60I=new yh,t.mm(this._17o,this),t.md(this._18o,this),t.mh(this._19o,this)},t.setColumns=function(t){this._39o.clear(),this.addColumns(t)},t.addColumns=function(t){var i=this._39o;t.forEach(function(t){if(!(t instanceof af)){var e=gs(t.className);t=ns(e||af,t)}i.add(t)})},t.onColumnClicked=function(){},t.onCheckColumnClicked=function(){},t._3Q=function(t){for(var e,i=0,n=this._60I,o=n.size();i<o;i++)if((e=n.get(i)).column===t)return e;return ot},t.getColumnAt=function(t){var e=this._4Q(t);return e?e.column:ot},t._4Q=function(t){for(var e=t.target?this.lp(t).x:t.x,i=this._60I,n=0;n<i.size();n++){var o=i.get(n),r=o.startX;if(r<=e&&e<r+o.column.getWidth())return o}return ot},t.getToolTip=function(t){var e=this.getDataAt(t),i=this.getColumnAt(t);return e&&i?i.getToolTip(e,this):ot},t.adjustTranslateX=function(t){var e=this.getWidth()-this._91I;return t<e&&(t=e),0<t?0:dt(t)},t._99I=function(){var i=this,n=i._29I,o=i._60I;o.clear(),i._91I=0,i._39o._roots.each(function(t){if(t.isVisible()){var e=i._91I+t.getWidth();i._91I<=n.x+n.width&&e>=n.x&&o.add({column:t,startX:i._91I}),i._91I=e}})},t.drawData=function(o,r,a){var s=this,h=s._rowHeight,l=h*a,c=s.isSelected(r),t=s._29I,e=t.x,i=t.width;s.drawRowBackground(o,r,c,e,l,i,h),s._60I.each(function(t){var e=t.column,i=t.startX,n=e.getWidth();0<n&&!s.isEditing(r,e)&&(o.save(),o.beginPath(),o.rect(i,l,n,h),o.clip(),s._87o(s.drawCell(o,r,c,e,i,l,n,h),a,i,l,n,h),s._columnLineVisible&&Mr(o,i+n-1,l,1,h,s._columnLineColor),o.restore())}),s._rowLineVisible&&Mr(o,e,l+h-1,i,1,s._rowLineColor)},t.drawCell=function(t,e,i,n,o,r,a,s){if(n.drawCell)return n.drawCell(t,e,i,n,o,r,a,s,this);var h=this.getValue(e,n);Kd(t,h,n,this.getLabelFont(e,n,h),this.getLabelColor(e,n,h),o,r,a,s,e,this)},t.getColumnModel=function(){return this._39o},t._17o=function(){this.redraw()},t._18o=function(t){t.data===this._sortColumn&&Yd[t.property]?this.ivm():(this._42o(),this.redraw())},t._19o=function(){this.redraw()},t.getCurrentSortFunc=function(){var i=this,n=i._sortColumn;if(n&&n.isSortable()){var o=n.getSortFunc(),r=_i===n.getSortOrder()?1:-1;return o||(o=ds),function(t,e){return o.call(i,i.getValue(t,n),i.getValue(e,n),t,e)*r}}return i._sortFunc},t.isCellEditable=function(t,e){return e.isEditable()&&this.isEditable()},t._37O=function(t,e){if(ys(e))for(var i=this,n=i.lp(e),o=i._60I,r=i._rowHeight,a=i._29I,s=a.x,h=a.y,l=a.width,c=a.height,u=0;u<o.size();u++){var d=o.get(u),f=d.startX,g=d.column,_=g.getWidth();if(g!==i._31o&&g!==i._4o&&i.isCellEditable(t,g)&&n.x>=f&&n.x<f+_){var v={x:f,y:i.getRowIndex(t)*r,width:_,height:r},p={x:v.x+i.tx(),y:v.y+i.ty(),width:v.width,height:v.height},b=0,m=0;return v.x<s?b=v.x-s:s+l<v.x+v.width&&(b=v.x+v.width-s-l),b&&(i.tx(i.tx()-b),p.x-=b),v.y<h?m=v.y-h:h+c<v.y+r&&(m=v.y+r-h-c),m&&(i.ty(i.ty()-m),p.y-=m),void i.beginEditing({data:t,column:g,value:i.getValue(t,g),event:e,rect:v,editorRect:p,view:i})}}}},nf.BaseItemEditor=function(t,e,i,n){this._data=t,this._column=e,this._master=i,this._editInfo=n},of("BaseItemEditor",e,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var rf=rt.Tab=function(){ho(rf,this)};Ns("Tab",Ch,{ms_ac:["view","closable","disabled"],_icon:ot,_closable:!1,_disabled:!1,setParent:Sn});var af=rt.Column=function(){ho(af,this)};Ns("Column",Ch,{_46o:1,ms_ac:["accessType","valueType",Qe,di,fi,be,"align",Ri,"sortOrder",ui,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:_i,_sortFunc:ot,_sortable:!0,setWidth:function(t){t<16&&(t=16);var e=this._width;this._width=t,this.fp(be,e,t)},getToolTip:function(t,e){return this.formatValue(e.getValue(t,this))}});var sf=rt.Property=function(){ho(sf,this)};Ns("Property",Ch,{_46o:1,ms_ac:["accessType","valueType",di,fi,"categoryName",Ri,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:ot,getToolTip:function(t,e,i){return e?this.formatValue(i.getValue(t,this)):i.getPropertyName(this)}}),nf.AccordionView=function(){this._20o={},this._21o=new yh,this._10o=ot,this._9o=ot,this._11o=ot,this._view=To(0,this),this.iv()},of("AccordionView",e,{ms_v:1,ms_fire:1,ms_ac:[hi,li,"titleHeight",Be,Me,"titleBackground","selectWidth",Ze,"orientation","separatorColor"],_expandIcon:st.accordionViewExpandIcon,_collapseIcon:st.accordionViewCollapseIcon,_titleHeight:Ga,_labelColor:st.accordionViewLabelColor,_labelFont:st.accordionViewLabelFont,_titleBackground:st.accordionViewTitleBackground,_selectBackground:st.accordionViewSelectBackground,_selectWidth:st.accordionViewSelectWidth,_orientation:"v",_separatorColor:st.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(e,t,i,n){var o=this,r=Vo();if(o._20o[e])throw e+" already exists";r.onmousedown=os,r.style.cursor=Hi,r.addEventListener(Nt?Yi:Ni,function(t){os(t)},!1),r.addEventListener(Nt?Zi:Gi,function(t){os(t),ys(t)&&(o._10o===e?o.collapse():o.expand(e))},!1),Mo(o._view,r),o._20o[e]={content:t,div:r,canvas:Do(r),icon:n},o._21o.add(e),i&&o.expand(e),o.iv()},remove:function(t){var e=this._20o[t];e&&(zs(e.div),delete this._20o[t],this._21o.remove(t),this.iv())},clear:function(){this._20o={},this._21o.clear(),this.iv()},isExpanded:function(t){return this._10o===t},expand:function(t){this._20o[t]&&this._10o!==t&&(this._10o=t,this.onExpanded(t),this.iv())},onExpanded:function(){},collapse:function(){this._10o&&(this.onCollapsed(this._10o),delete this._10o,this.iv())},onCollapsed:function(){},initCanvas:function(t,e,i){Po(t,e,i);var n=Ao(t);return Wo(n,0,0,1),n.clearRect(0,0,e,i),n},drawTitle:function(t,e,i,n,o){var r=this,a=as(o.icon),s=r.isExpanded(e),h=r._titleHeight,l=r._titleBackground,c=r._selectWidth,u=r._separatorColor,d=as(s?r._expandIcon:r._collapseIcon),f=c+4;Mr(t,0,0,i,n,l),s&&c&&Mr(t,0,0,c,n,r._selectBackground),(s||r._21o.get(r._21o.size()-1)!==e)&&Mr(t,0,n-1,i,1,u||vs(l)),a&&(ss(t,a,f+vh(a)/2,h/2),f+=vh(a)+2),bs(t,e,r.getLabelFont(e),r.getLabelColor(e),f,0,0,h),d&&ss(t,d,i-vh(d)/2-4,h/2)},validateImpl:function(){var a=this,t=a._view,s=0,h=0,l=a.getWidth(),c=a.getHeight(),u=a._titleHeight,d=a._21o.size()*u,e=a._11o,i=a._9o;delete a._11o,delete a._9o,a._21o.each(function(t){var e,i,n=a._20o[t],o=n.content,r=a._10o===t;Wn(a)?(Go(n.div,s,0,u,c),e=a.initCanvas(n.canvas,u,c),Ho(e,0,c),Uo(e,-St),a.drawTitle(e,t,c,u,n),e.restore(),r?(i=vt(0,l-d),o&&(a._11o=o,a._9o=Qo(o),Go(o,s+u,0,i,c)),s+=u+i):s+=u):(Go(n.div,0,h,l,u),e=a.initCanvas(n.canvas,l,u),a.drawTitle(e,t,l,u,n),e.restore(),r?(i=vt(0,c-d),o&&(a._11o=o,a._9o=Qo(o),Go(o,0,h+u,l,i)),h+=u+i):h+=u)});var n=a._9o;e&&e!==a._11o&&e.endEditing&&e.endEditing(),n&&n!==i&&Mo(t,n),i&&i!==n&&zs(i)}}),nf.SplitView=function(t,e,i,n){var o=this,r=o._dividerDiv=Vo(),a=o._60O=Do(),s=o._61O=Do(),h=a.style,l=s.style;o._view=To(1,o),Mo(o._view,r),h.msTouchAction=Ui,h.pointerEvents=Ui,h.cursor=Hi,l.msTouchAction=Ui,l.pointerEvents=Ui,l.cursor=Hi,t&&o.setLeftView(t),e&&o.setRightView(e),i&&o.setOrientation(i),n!=ot&&o.setPosition(n),o.setStatus(_e),new hf(o)},of("SplitView",e,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:st.splitViewDividerSize,_dividerBackground:st.splitViewDividerBackground,_dragOpacity:st.splitViewDragOpacity,_toggleIcon:st.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(t,e){var i=this._position;isNaN(t)||(e||(this._82O=t<0?-1:1<t?1:0),this._position=t,this.fp(pi,i,t))},getLeftView:function(){return this._leftView},setLeftView:function(t){var e=this._leftView,i=this._view;if(this._leftView!==t){if(e&&e!==this._rightView){var n=Qo(e);n.parentNode===i&&zs(n)}if(this._leftView=t){var o=Qo(t);o.parentNode!==i&&i.insertBefore(o,this._dividerDiv)}this.fp("leftView",e,t)}},getRightView:function(){return this._rightView},setRightView:function(t){var e=this._rightView,i=this._view;if(this._rightView!==t){if(e&&e!==this._leftView){var n=Qo(e);n.parentNode===i&&zs(n)}if(this._rightView=t){var o=Qo(t);o.parentNode!==i&&i.insertBefore(o,this._dividerDiv)}this.fp("rightView",e,t)}},validateImpl:function(){var t=this,e=t._draggable,i=t._position,n=t.getWidth(),o=t.getHeight(),r=t._dividerSize,a=t._dividerBackground,s=Nt?18:8,h=t._dividerDiv,l=t._82O,c=t._60O,u=t._61O,d=t._toggleIcon,f=t._status,g=h.style,_=null,v=Nt?20:4,p=d.comps[0];s<=r||0===r?t._coverDiv&&(zs(t._coverDiv),delete t._coverDiv):t._coverDiv||(t._coverDiv=Vo(),At&&(t._coverDiv.style.background=Bi),Mo(h,t._coverDiv)),t._togglable?c.parentNode||(Mo(h,c),Mo(h,u)):(zs(c),zs(u));var b=t._coverDiv,m=t._leftView,y=t._rightView;if(Wn(t)){if(n<r&&(r=n),f===_e)if(1===l)var w=i,x=vt(0,n-r-w);else-1===l?w=vt(0,n-r-(x=-i)):(w=dt((n-r)*i),x=vt(0,n-r-w));else"cl"===f?x=vt(w=0,n-r):"cr"===f&&(w=vt(x=0,n-r));m&&Go(m,0,0,w,o),y&&Go(y,w+r,0,x,o),Go(h,w,0,r,o),t._22o=w,b&&(Go(b,r/2-s/2,0,s,o),b.style.cursor=e?Ai:""),h.style.cursor=e?Ai:"";var C=h.clientHeight/2,I=h.clientWidth;Po(c,I,I),Go(c,0,C-I-v,I,I),_=Ao(c),Wo(_,0,0,1),p.rotation=-St,mh(_,d,0,0,I,I),_.restore(),Po(u,I,I),Go(u,0,C+v,I,I),_=Ao(u),Wo(_,0,0,1),p.rotation=St,mh(_,d,0,0,I,I),_.restore()}else{if(o<r&&(r=o),f===_e)if(1===l)var O=i,S=vt(0,o-r-O);else-1===l?O=vt(0,o-r-(S=-i)):(O=dt((o-r)*i),S=vt(0,o-r-O));else"cl"===f?S=vt(O=0,o-r):"cr"===f&&(O=vt(S=0,o-r));m&&Go(m,0,0,n,O),y&&Go(y,0,O+r,n,S),Go(h,0,O,n,r),t._22o=O,b&&(Go(b,0,r/2-s/2,n,s),b.style.cursor=e?Wi:""),g.cursor=e?Wi:"";var T=h.clientWidth/2;I=h.clientHeight;Po(c,I,I),Go(c,T-I-v,0,I,I),_=Ao(c),Wo(_,0,0,1),p.rotation=0,mh(_,d,0,0,I,I),_.restore(),Po(u,I,I),Go(u,T+v,0,I,I),_=Ao(u),Wo(_,0,0,1),p.rotation=It,mh(_,d,0,0,I,I),_.restore()}g.background=a}});var hf=function(t){this.sv=t,this.addListeners()};Us(hf,e,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(t){var n=this,o=n.sv,e=o._dividerDiv,i=o._60O,r=o._61O,a=o._status,s=t.target;if(s===i)a===_e?o.setStatus("cl"):"cr"===a&&o.setStatus(_e);else if(s===r)a===_e?o.setStatus("cr"):"cl"===a&&o.setStatus(_e);else if(tr(t)&&(s===e||s===o._coverDiv)&&(os(t),o.isDraggable())){n.resizeDiv=Vo();var h=n.resizeDiv.style,l=e.style,c=o.getLeftView(),u=o.getRightView();n._maskViews=[],[c,u].forEach(function(t){t=t.getView?t.getView():t;var e=Vo(),i=e.style;i.left=t.style.left,i.top=t.style.top,i.width=t.offsetWidth+"px",i.height=t.offsetHeight+"px",o.getView().appendChild(e),n._maskViews.push(e)}),h.left=l.left,h.top=l.top,h.width=l.width,h.height=l.height,h.opacity=o.getDragOpacity(),h.background=o.getDividerBackground(),n._85o=n._86o=Wn(o)?Os(t).x:Os(t).y,Mo(n.getView(),n.resizeDiv),n._clientPoint=Os(t),Rs(n,t)}},handleWindowTouchMove:function(t){if(tr(t)){var e=this.sv,i=e._dividerSize,n=this.resizeDiv.style,o=e.getWidth(),r=e.getHeight(),a=e._22o-this._86o;Wn(e)?(this._85o=Os(t).x,o-i<(a+=this._85o)&&(a=o-i),a<0&&(a=0),n.left=a+ae):(this._85o=Os(t).y,r-i<(a+=this._85o)&&(a=r-i),a<0&&(a=0),n.top=a+ae)}},handleWindowTouchEnd:function(t){var e=this,i=e.sv,n=i._22o-e._86o+e._85o,o=i._dividerSize,r=Wn(i)?i.getWidth():i.getHeight(),a=i._82O;1<Ts(e._clientPoint,Os(t))&&(i.setStatus(_e),n<0&&(n=0),r-o<n&&(n=r-o),r!==o&&(1===a?i.setPosition(n,1):-1===a?i.setPosition(n-r+o,1):i.setPosition(n/(r-o),1))),e._maskViews&&e._maskViews.forEach(function(t){zs(t)}),zs(e.resizeDiv),e.resizeDiv=e._85o=e._clientPoint=ot},handle_mousedown:function(t){ys(t)&&this.handle_touchstart(t)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)}}),nf.TabView=function(){var t=this,e=t._view=To(1,t),i=t._91O=Vo(1),n=t._tabModel=new Ih,o=n.sm(),r=t.invalidate;t._7o=new yh,t._canvas=Do(i),Mo(e,i),Mo(e,t._92O=Vo(1)),o.setSelectionMode(Gt),o.ms(r,t),n.mm(r,t),n.md(r,t),n.mh(r,t),new lf(t),t.iv()},of("TabView",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Be,Me,"tabBackground","selectWidth",Ze,"moveBackground","insertColor"],_tabPosition:$t,_tabHeight:Ga,_tabGap:st.tabViewTabGap,_labelColor:st.tabViewLabelColor,_labelFont:st.tabViewLabelFont,_tabBackground:st.tabViewTabBackground,_selectWidth:st.tabViewSelectWidth,_selectBackground:st.tabViewSelectBackground,_moveBackground:st.tabViewMoveBackground,_insertColor:st.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(t,e,i){var n=new rf,o=this._tabModel;return n.setName(t),n.setView(e),o.add(n),i&&o.sm().ss(n),n},getLabel:function(t){return t.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(t){this._23o=t,this.iv()},get:function(e){var i,n=this,t=n._tabModel;return Gn(e)?t._roots.get(e):Qn(e)?(t.each(function(t){e===n.getLabel(t)&&(i=t)}),i):e instanceof rf?e:ot},select:function(t){this._tabModel.sm().ss(this.get(t))},remove:function(t){if(t=this.get(t)){var e=this._tabModel._roots.indexOf(t);this._tabModel.remove(t),this._12Q(--e)}},getCurrentTab:function(){return this._8o},hideTabView:function(t,e){e.parentNode===this._92O&&(eo(e)?(e.style.display=re,e._tab_=t):zs(e),ja())},showTabView:function(t,e){eo(e)&&(e.style.display="block",e._tab_=t),e.parentNode!==this._92O&&(Mo(this._92O,e),ja())},_24o:function(){var t,e=this._8o,i=this._9o,n=this._tabModel.sm().ld();n&&(t=Qo(n.getView())),t!==i&&(i&&(e.getView().endEditing&&e.getView().endEditing(),this.hideTabView(e,i)),t&&this.showTabView(n,t)),this._8o=n,this._9o=t,e!==n&&this.onTabChanged(e,n)},onTabChanged:function(){},onTabClosed:function(t,e){this._12Q(--e)},_12Q:function(t){var e=this._tabModel,i=e.size();if(i&&!e.sm().ld()){t==ot&&(t=0),i<=t&&(t=i-1),t<0&&(t=0);for(var n=t;0<=n;n--){var o=this.get(n);if(!o.isDisabled())return this.select(o),o}for(n=t+1;n<i;n++)if(!(o=this.get(n)).isDisabled())return this.select(o),o}},_9Q:function(t){var e=4,i=as(t.getIcon());i&&(e+=vh(i,t)+4);var n=this.getLabel(t);return n&&(e+=ms(this.getLabelFont(t),n).width+4),t.isClosable()&&(e+=10),e},_10Q:function(t,e,i,n,o,r,a){var s,h=this._tabPosition,l=i+4,c=this._selectWidth,u=as(e.getIcon()),d=e.isDisabled(),f=this.getLabelColor(e),g=this.getLabelFont(e),_=this.getLabel(e),v=this._selectBackground,p=h===Zt+"-vertical",b=h===Jt+"-vertical";(p||b)&&(l=n+4),d&&(t.globalAlpha=Da),Mr(t,i,n,o,r,a),e===this._8o&&c&&(h===$t?Mr(t,i,n+r-c,o,c,v):h===Zt?Mr(t,i+o-c,n,c,r,v):h===Jt?Mr(t,i,n,c,r,v):p?Mr(t,i+o-c,n,c,r,v):b?Mr(t,i,n,c,r,v):Mr(t,i,n,o,c,v));var m=o/2;if(p&&(Ho(t,m,n+r/2),Uo(t,It),Ho(t,-m,-n-r/2)),u){var y=ph(u,e),w=vh(u,e);if(p||b){var x=i+o/2,C=l+y/2;Ho(t,x,C),Uo(t,St),Ho(t,-x,-C),ss(t,u,i+o/2,l+y/2,e,this),Ho(t,x,C),Uo(t,-St),Ho(t,-x,-C),l+=y+4}else ss(t,u,l+w/2,n+r/2,e,this),l+=w+4}return p||b?(Ho(t,o/2,l+o/2),Uo(t,St),Ho(t,-o/2,-l-o/2),bs(t,_,g,f,i,l,r,o),Ho(t,o/2,l+o/2),Uo(t,-St),Ho(t,-o/2,-l-o/2)):bs(t,_,g,f,l,n,o,r),p&&(Ho(t,m,n+r/2),Uo(t,-It),Ho(t,-m,-n-r/2)),e.isClosable()&&(t.strokeStyle=f,t.lineWidth=1,t.beginPath(),s=b?(t.moveTo(i+o-10,n+r-4),t.lineTo(i+o-4,n+r-10),t.moveTo(i+o-4,n+r-4),t.lineTo(i+o-10,n+r-10),t.stroke(),{x:i+o-12,y:n+r-12,width:12,height:12}):(t.moveTo(i+o-10,n+4),t.lineTo(i+o-4,n+10),t.moveTo(i+o-4,n+4),t.lineTo(i+o-10,n+10),t.stroke(),{x:i+o-12,y:n,width:12,height:12})),d&&(t.globalAlpha=1),s},validateImpl:function(){var n=this;n._24o();var t,e=n._canvas,i=n._tabPosition,o=n._91O,r=n._92O,a=n._tabModel,s=n.getWidth(),h=n.getHeight(),l=n._tabHeight,c=n._7o,u=n._tabGap,d=i===$t,f=i===Zt,g=i===Kt,_=i===Jt,v=i===Zt+"-vertical",p=i===Jt+"-vertical",b=n._23o,m=0;if((f||_)&&a._roots.each(function(t){m=vt(n._9Q(t),m)}),t=d?(Go(o,0,0,s,l),{x:0,y:l,width:s,height:vt(0,h-l)}):f?(Go(o,0,0,m,h),{x:m,y:0,width:vt(0,s-m),height:h}):_?(Go(o,s-m,0,m,h),{x:0,y:0,width:vt(0,s-m),height:h}):v?(Go(o,0,0,l,h),{x:l,y:0,width:vt(0,s-l),height:h}):p?(Go(o,s-l,0,l,h),{x:0,y:0,width:vt(0,s-l),height:h}):(Go(o,0,h-l,s,l),{x:0,y:0,width:s,height:vt(0,h-l)}),Go(r,t),v||p){n._9o&&(t.x=0,Go(n._8o.getView(),t)),Po(e,l,h);var y=Ao(e),w=0;if(Wo(y,0,n.ty(),1),y.clearRect(0,0,l,h),c.clear(),a._roots.each(function(t){var e,i=n._9Q(t);b&&b.tab===t||(e=n._10Q(y,t,0,w,l,i,n._tabBackground))&&p&&(e.x=s-12),c.add({_75o:e,tab:t,startY:w,endY:w+i,height:i}),w+=i+u}),n._23Q=vt(0,w-u),b){var x=b.position;n._10Q(y,b.tab,0,b.startY,l,b.height,n._moveBackground),Mr(y,0,x,l,1,n._insertColor)}y.restore(),n.ty(n.ty())}else if(f||_){n._9o&&(t.x=0,Go(n._8o.getView(),t)),Po(e,m,h);y=Ao(e),w=0;if(Wo(y,0,n.ty(),1),y.clearRect(0,0,m,h),c.clear(),a._roots.each(function(t){var e;b&&b.tab===t||(e=n._10Q(y,t,0,w,m,l,n._tabBackground))&&_&&(e.x=s-12),c.add({_75o:e,tab:t,startY:w,endY:w+l,height:l}),w+=l+u}),n._23Q=vt(0,w-u),b){x=b.position;n._10Q(y,b.tab,0,b.startY,m,b.height,n._moveBackground),Mr(y,0,x,m,1,n._insertColor)}y.restore(),n.ty(n.ty())}else{n._9o&&(t.y=0,Go(n._8o.getView(),t)),Po(e,s,l);y=Ao(e);var C=0;if(Wo(y,n.tx(),0,1),y.clearRect(0,0,s,l),c.clear(),a._roots.each(function(t){var e,i=n._9Q(t);b&&b.tab===t||(e=n._10Q(y,t,C,0,i,l,n._tabBackground))&&g&&(e.y=h-l),c.add({_75o:e,tab:t,startX:C,endX:C+i,width:i}),C+=i+u}),n._64I=vt(0,C-u),b){x=b.position;n._10Q(y,b.tab,b.startX,0,b.width,l,n._moveBackground),mo(y,n._insertColor,x,0,l)}y.restore(),n.tx(n.tx())}for(var I=[],O=r.children,S=0;S<O.length;S++){var T=O[S],V=T._tab_;V&&!a.contains(V)&&I.push(T)}I.forEach(function(t){r.removeChild(t)})}});var lf=function(t){this.tv=t,this.addListeners()};Us(lf,e,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40*10)},handle_DOMMouseScroll:function(t){this.handleScroll(t,10*-t.detail)},handleScroll:function(t,e){os(t);var i=this.tv,n=i._tabPosition;!i._40o()||n!==$t&&n!==Kt||i.tx(this.tv.tx()+e),!i._41o()||n!==Zt&&n!==Jt&&n!==Zt+"-vertical"&&n!==Jt+"-vertical"||i.ty(this.tv.ty()+e)},_8Q:function(t){var e,i,n=this.tv,o=n._tabPosition,r=n._7o;if(o===$t||o===Kt){var a=n.lp(t).x;for(e=0;e<r.size();e++)if((i=r.get(e)).startX<=a&&a<=i.endX)return i}else if(o===Zt||o===Jt||o===Zt+"-vertical"||o===Jt+"-vertical"){var s=n.lp(t).y;for(e=0;e<r.size();e++)if((i=r.get(e)).startY<=s&&s<=i.endY)return i}return ot},isClickable:function(t){var e=this.tv,i=e._tabPosition,n=this._73o=this._8Q(t);return!(!e._40o()||i!==$t&&i!==Kt)||(!(!e._41o()||i!==Zt&&i!==Jt&&i!==Zt+"-vertical"&&i!==Jt+"-vertical")||n&&(!n.tab.isDisabled()||e.isMovable()))},handle_mousemove:function(t){qo?this._74o=this._8Q(t):this.getView().style.cursor=this.isClickable(t)?Hi:""},handle_mousedown:function(t){this.handle_mousemove(t),this.handle_touchstart(t)},handle_touchstart:function(t){var e=this.tv,i=e._tabPosition;os(t),this.isClickable(t)&&(i===$t||i===Kt?(this.x=Os(t).x,this.lp=e.lp(t),this.tx=e.tx()):(this.y=Os(t).y,this.lp=e.lp(t),this.ty=e.ty()),Rs(this,t))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var n,e=this,o=e.tv,i=o._tabPosition,r=e._73o;if(i===$t||i===Kt){if(n=Os(t).x-e.x,!e._25o&&!e.moving&&2<bt(n)&&(o._40o()&&!Is(t)?e._25o=1:r&&o.isMovable()&&(e.moving=1)),e._25o)o.tx(e.tx+n);else if(e.moving){var a=e.lp.x+n,s=o._tabGap/2;o._7o.each(function(t){var e=t.endX,i=a-t.startX<e-a;a>=t.startX&&a<=e&&o._7Q({tab:r.tab,startX:r.startX+n,width:r.width,front:i,insertTab:t.tab,position:i?vt(0,t.startX-s):pt(o._64I,e+s)})})}}else if(n=Os(t).y-e.y,!e._25o&&!e.moving&&2<bt(n)&&(o._41o()&&!Is(t)?e._25o=1:r&&o.isMovable()&&(e.moving=1)),e._25o)o.ty(e.ty+n);else if(e.moving){var h=e.lp.y+n;s=o._tabGap/2;o._7o.each(function(t){var e=t.endY,i=h-t.startY<e-h;h>=t.startY&&h<=e&&o._7Q({tab:r.tab,startY:r.startY+n,height:r.height,front:i,insertTab:t.tab,position:i?vt(0,t.startY-s):pt(o._23Q,e+s)})})}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(){var t=this,e=t.tv,i=e._tabPosition,n=e.getTabModel(),o=n._roots,r=t._73o;if(t.moving){var a=e._23o;if(a&&a.insertTab!==a.tab){var s=a.tab,h=o.remove(s),l=o.indexOf(a.insertTab);0<=l&&(a.front||l++,l<=o.size()&&(o.add(s,l),n._38I(s,h,l)))}e._7Q(ot),delete t.moving}else if(!t._25o&&r){s=r.tab;var c=t._74o;if(!c||c.tab===s)if(!s.isDisabled()&&Es(r._75o,t.lp)){var u=o.indexOf(s);n.remove(s),e.onTabClosed(s,u)}else s.isDisabled()||e._8o===s||n.sm().ss(s)}t._25o=t._73o=t._74o=i===$t||i===Kt?t.x=t.lp=t.tx=ot:t.y=t.lp=t.ty=ot}}),nf.PropertyView=function(t){var e=this;e._view=To(1,e),e._canvas=Do(e._view),Mo(e._view,e._79O=Vo()),e._rows=new yh,e._28o=new yh,e._26o={},e._26Q={};var i=e._propertyModel=new Ih,n=e.ivm;i.mm(n,e),i.md(n,e),i.mh(n,e),e.dm(t||new Ih),new cf(e)},of("PropertyView",e,{ms_ac:[Be,Le,Me,di,fi,"categorizable",ei,ui,si,hi,li,Ke,ti,$e,"selectRowIndex",Ze,"background",ii,ai,oi,ri,ni],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Dn,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:Ua,_background:st.propertyViewBackground,_expandIcon:st.propertyViewExpandIcon,_collapseIcon:st.propertyViewCollapseIcon,_scrollBarColor:Xa,_scrollBarSize:Ya,_autoHideScrollBar:Ma,_selectBackground:st.propertyViewSelectBackground,_rowHeight:Na,_rowLineVisible:st.propertyViewRowLineVisible,_rowLineColor:st.propertyViewRowLineColor,_10I:.5,_columnLineVisible:st.propertyViewColumnLineVisible,_columnLineColor:st.propertyViewColumnLineColor,_labelColor:st.propertyViewLabelColor,_labelSelectColor:st.propertyViewLabelSelectColor,_labelFont:st.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(t){t<0&&(t=0),1<t&&(t=1);var e=this._10I;this._10I=t,this.fp("columnPosition",e,t)},getPropertyName:function(t){return t.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(t,e,i){return i===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(t,e){return e===this._selectRowIndex?this._labelSelectColor:t.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(t){var e=this.getHeight()-this._59I;return t<e&&(t=e),0<t?0:dt(t)},isExpanded:function(t){if(!t)return!0;var e=this._26o[t];return e?e.isExpanded:!(!1===this._26Q[t])},toggle:function(t){this.isExpanded(t)?this.collapse(t):this.expand(t)},expandAll:function(){for(var t in this.validate(),this._26o)this.expand(t)},expand:function(t){if(t&&t!==re){var e=this._26o[t];e&&!e.isExpanded&&(e.isExpanded=!0,this.onExpanded(t),this.ivm())}},onExpanded:function(){},collapseAll:function(){for(var t in this.validate(),this._26o)this.collapse(t)},collapse:function(t){if(t&&t!==re){var e=this._26o[t];e&&e.isExpanded&&(e.isExpanded=!1,this.onCollapsed(t),this.ivm())}},onCollapsed:function(){},getCategoryName:function(t){if(!this.isCategorizable())return re;var e=t.getCategoryName();return e||re},getPropertyModel:function(){return this._propertyModel},setDataModel:function(t){var e=this,i=e._dataModel;i!==t&&(i&&(i.umd(e.handlePropertyChange,e),e._3o||i.sm().ums(e.ivm,e)),(e._dataModel=t).md(e.handlePropertyChange,e),e._3o?e._3o._21I(t):t.sm().ms(e.ivm,e),e.fp(xi,i,t))},isVisible:function(t){return!this._visibleFunc||this._visibleFunc(t)},onPropertyChanged:function(t){var e=t.property;Jd[e]?this.ivm():this.iv(),e===wi&&this._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:wh},handlePropertyChange:function(t){this._27o===t.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){this._96I||(this.setSelectRowIndex(-1),this._96I=1,this.iv())},redraw:function(){this.iv()},validateModel:function(){var n=this,o=n._rows,i=n._28o,r={},a=new yh,t=n._27o;for(var e in n.updateCurrentData(),t!==n._27o&&n.endEditing(),o.clear(),i.clear(),n.getRawProperties().each(function(t){if(n.isVisible(t)){a.add(t);var e=n.getCategoryName(t);r[e]||(i.add(e,e===re?0:N),r[e]={isExpanded:n.isExpanded(e),properties:new yh})}}),n._sortFunc&&a.sort(n._sortFunc),n._26o)n._26Q[e]=n.isExpanded(e);n._26o=r,i.each(function(e){e!==re&&o.add(e);var i=r[e];i.isExpanded&&a.each(function(t){n.getCategoryName(t)===e&&(i.properties.add(t),o.add({property:t,data:n._27o}))},n)})},validateImpl:function(){var t=this;t._76o(),t._96I&&(t.validateModel(),delete t._96I);var e=t._canvas,i=t.getWidth(),n=t.getHeight(),o=-t.ty(),r=t._rowHeight,a=t._indent,s=i-a,h=t._rows,l=h.size(),c=t._9I=a+s*t._10I,u=t._59I=l*r;Po(e,i,n),t._29I={x:0,y:o,width:i,height:n},t._31I=ft(o/r),t._14I=gt((o+n)/r),t._31I<0&&(t._31I=0),t._14I>l&&(t._14I=l);var d=Ao(e),f=t._background;Wo(d,0,-o,1),d.beginPath(),d.rect(0,o,i,n),d.clip(),d.clearRect(0,o,i,n),t._93db(d),f&&Mr(d,0,0,a,u,f);for(var g=t._31I;g<t._14I;g++){var _=h.get(g);o=r*g;if(Qn(_))f&&Mr(d,a,o,s,r,f),(b=as(t.isExpanded(_)?t._expandIcon:t._collapseIcon))&&hs(d,b,Mi,0,o,a,r),d.save(),d.beginPath(),d.rect(a,o,s,r),d.clip(),t.drawCategoryName(d,_,g,a,o,s,r),d.restore();else{var v=_.property,p=_.data,b=as(v.getIcon()),m=t._selectRowIndex===g?t.getSelectBackground():ot;if(b&&hs(d,b,Mi,0,o,a,r),m&&Mr(d,a,o,s,r,m),d.save(),d.beginPath(),d.rect(a,o,c-a,r),d.clip(),t.drawPropertyName(d,v,g,a,o,c-a,r),d.restore(),!t.isEditing(p,v)){var y=c+1,w=i-c-1;d.save(),d.beginPath(),d.rect(y,o,w,r),d.clip(),t._87o(t.drawPropertyValue(d,v,t.getValue(p,v),g,y,o,w,r,p),g,y,o,w,r),d.restore()}}t._rowLineVisible&&Mr(d,a,o+r-1,s,1,t._rowLineColor)}t._columnLineVisible&&(Mr(d,c,0,1,u,t._columnLineColor),Mr(d,i-1,0,1,u)),t._92db(d),t._93I(),d.restore(),t.ty(t.ty())},drawCategoryName:function(t,e,i,n,o,r,a){bs(t,e,this.getCategoryFont(e),this.getCategoryColor(e),n,o,r,a)},drawPropertyName:function(t,e,i,n,o,r,a){return e.drawPropertyName?void e.drawPropertyName(t,e,i,n,o,r,a,this):void bs(t,this.getPropertyName(e),this.getPropertyFont(e,i),this.getPropertyColor(e,i),n,o,r,a)},drawPropertyValue:function(t,e,i,n,o,r,a,s,h){return e.drawPropertyValue?e.drawPropertyValue(t,e,i,n,o,r,a,s,h,this):void Kd(t,i,e,this.getLabelFont(e,i,n),this.getLabelColor(e,i,n),o,r,a,s,h,this)},isPropertyEditable:function(t){return t.isEditable()&&this.isEditable()},setProperties:function(t){this._propertyModel.clear(),this.addProperties(t)},addProperties:function(t){if(t){var i=this._propertyModel;t.forEach(function(t){if(!(t instanceof sf)){var e=gs(t.className);t=ns(e||sf,t)}i.add(t)})}},getRowIndexAt:function(t){var e=ft(this.lp(t).y/this._rowHeight);return 0<=e&&e<this._rows.size()?e:-1},getPropertyAt:function(t){var e=this.getRowIndexAt(t);return 0<=e?this._rows.get(e).property:ot},getToolTip:function(t){var e=this.getPropertyAt(t),i=this._27o;return e&&i?e.getToolTip(i,this._9I<this.lp(t).x,this):ot}});var cf=function(t){this.pv=t,this.addListeners()};Us(cf,e,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(t){this.getView().style.cursor=t},clear:function(){this._62O=this.cp=this.ty=this.p=ot,this.setCursor(Qt)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this.pv;os(t),e.setFocus(t)&&(ys(t)?(this.cp=Os(t),this.ty=e.ty(),this.p=e.getColumnPosition(),this.handle_touchmove(t)):e.setSelectRowIndex(e.getRowIndexAt(t)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){if(this.cp&&!this._62O){var e=this.pv,i=e.lp(t),n=i.x,o=i.y,r=e._indent,a=e.getRowIndexAt(t),s=e._9I;if(0<=a){var h=e._rowHeight,l=h*a,c=e._rows.get(a),u=c.property;if(Qn(c))as(e.isExpanded(c)?e._expandIcon:e._collapseIcon)&&0<=n&&n<=r&&l<=o&&o<=l+h?e.toggle(c):xs(t)&&e.toggle(c);else if(s<n&&e.isPropertyEditable(u)){var d={x:s+1,y:l,width:e.getWidth()-s-1,height:h},f={x:d.x+e.tx(),y:d.y+e.ty(),width:d.width,height:d.height},g=0,_=e._29I;d.y<_.y?g=d.y-_.y:d.y+h>_.y+_.height&&(g=d.y+h-_.y-_.height),g&&(e.ty(e.ty()-g),f.y-=g),e.beginEditing({data:c.data,property:u,value:e.getValue(c.data,u),event:t,rect:d,editorRect:f,view:e})}}e.setSelectRowIndex(a)}this.clear()},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this.pv,i=this.ty,n=this.cp,o=Os(t),r=this._62O;if("p"===r)e.setTranslateY(i+o.y-n.y);else if("c"===r){var a=e.getWidth()-e._indent;if(16<a){var s=this.p-(n.x-o.x)/a,h=16/a;s<h&&(s=h),1-h<s&&(s=1-h),e.setColumnPosition(s)}}else"s"===r&&e.setTranslateY(i+(n.y-o.y)*e._59I/e._29I.height)},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!qo&&ys(t)){var e=this,i=e.pv,n=bt(i.lp(t).x-i._9I)<=(Nt?8:3);e.cp?e._62O||(n?(e._62O="c",Rs(e)):2<=bt(Os(t).y-e.cp.y)&&(e._62O=e.isV(t)?"s":"p",Rs(e))):(n?e.setCursor(Ai):e.setCursor(Qt),e.isV(t)&&i._43o())}},isV:function(t){var e=this.pv,i=e._29I;return e._41o()&&i.x+i.width-e.lp(t).x<Ja},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.handleScroll(t,-t.detail)},handleScroll:function(t,e){var i=this.pv;os(t),i.endEditing(),i.translate(0,e*i.getRowHeight())},handle_keydown:function(t){var e=this.pv,i=e._rows.size(),n=e._selectRowIndex+(dr(t)?-1:1);(dr(t)||gr(t))&&(n<0&&(n=0),i<=n&&(n=i-1),e.setSelectRowIndex(n))}}),nf.ListView=function(t){this._5o(t),new uf(this)},of("ListView",e,{ms_ac:[Be,Le,Me,ii,ei,ai,oi,ui,si,Ke,ti,$e,Je,Ze],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:Ua,_rowHeight:Na,_rowLineVisible:st.listViewRowLineVisible,_rowLineColor:st.listViewRowLineColor,_scrollBarColor:Xa,_scrollBarSize:Ya,_autoMakeVisible:Pa,_autoHideScrollBar:Ma,_selectBackground:st.listViewSelectBackground,_labelColor:st.listViewLabelColor,_labelSelectColor:st.listViewLabelSelectColor,_labelFont:st.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(t){var e=this._checkMode;this._checkMode=t,this.fp(ci,e,t)},drawRow:function(t,e,i,n,o,r,a){var s=0,h=this._indent,l=this.getIconWidth(e);this.drawRowBackground(t,e,i,n,o,r,a),this._checkMode&&(ss(t,this.getCheckIcon(e),s+h/2,o+a/2,e,this),s+=h),this.drawIcon(t,e,s,o,l,a),this.drawLabel(t,e,s+l,o,a)}});var uf=function(t){this.list=t,this.addListeners()};Us(uf,e,{ms_listener:1,getView:function(){return this.list._view},clear:function(t){t&&"d"===this._62O&&this.list.handleDragAndDrop(t,"end"),this._62O=this.cp=this.tx=this.ty=ot},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this.list;if(os(t),e.setFocus(t))if(this.cp=Os(t),this.tx=e.tx(),this.ty=e.ty(),ys(t))this.isV(t)||this.isH(t)||!e.handleDragAndDrop||e.handleDragAndDrop(t,"prepare");else{var i=e.getDataAt(t);i&&this._33o(t,i),this.clear(t)}},handleWindowMouseUp:function(t){this.clear(t)},handleWindowTouchEnd:function(t){this.clear(t)},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this.list;if(this.cp&&!this._62O){var i=e.getDataAt(t);i&&(e.isCheckMode()?this._34o(t,i):this._33o(t,i),xs(t)?e.onDataDoubleClicked(i,t):e.onDataClicked(i,t))}this.clear(t)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this.list,i=this._62O,n=this.tx,o=this.ty,r=this.cp,a=Os(t),s=e._29I;"p"===i?e.setTranslate(n+a.x-r.x,o+a.y-r.y):"v"===i?e.ty(o+(r.y-a.y)*e._59I/s.height):"h"===i?e.tx(n+(r.x-a.x)*e._91I/s.width):"d"===i&&e.handleDragAndDrop(t,"between")},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!qo&&ys(t)){var e=this,i=e.list,n=e.isV(t),o=e.isH(t);if(e.cp){if(!e._62O){if(Ts(Os(t),e.cp)<2)return;n?e._62O="v":o?e._62O="h":i.handleDragAndDrop?(e._62O="d",i.handleDragAndDrop(t,"begin")):e._62O="p",Rs(e)}}else n&&i._43o(),o&&i._42o()}},isV:function(t){var e=this.list,i=e._29I;return e._41o()&&i.x+i.width-e.lp(t).x<Ja},isH:function(t){var e=this.list,i=e._29I;return e._40o()&&i.y+i.height-e.lp(t).y<Ja},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40,t.wheelDelta!==t.wheelDeltaX)},handle_DOMMouseScroll:function(t){this.handleScroll(t,-t.detail,1)},handleScroll:function(t,e,i){var n=this.list;os(t),n.endEditing&&n.endEditing(),i&&n._41o()?n.translate(0,e*n.getRowHeight()):n._40o()&&n.translate(10*e,0)},handle_keydown:function(t){var e,i=this.list,n=i.sm(),o=i._rows,r=o.size();if(ir(t))i.selectAll();else if(nr(t))i.handleDelete&&i.handleDelete(t);else if(_r(t))i.isCheckMode()&&((e=i.getFocusData())&&i.checkData(e));else if(dr(t)||gr(t)){var a=i.isCheckMode();if(e=a?i.getFocusData():n.ld()){var s=i.getRowIndex(e);0<=s&&(dr(t)?0!==s&&(e=o.get(s-1),a?i.setFocusData(e):n.ss(e)):s!==r-1&&(e=o.get(s+1),a?i.setFocusData(e):n.ss(e)))}else 0<r&&(e=o.get(0),a?i.setFocusData(e):n.ss(e))}},_34o:function(t,e){var i=this.list,n=i.lp(t).x;return 0<=n&&n<=i._indent?void i.checkData(e):void i.setFocusData(e)},_33o:function(t,e){var i=this.list,n=i.sm(),o=n.ld();if(Is(t))i.isSelected(e)?n.rs(e):n.as(e);else if(Cs(t))if(o)for(var r=i.getRowIndex(o),a=i.getRowIndex(e);r!==a;)r+=r<a?1:-1,n.as(i._rows.get(r));else n.ss(e);else(ys(t)||!n.contains(e))&&n.ss(e)}}),nf.TreeView=function(t){this._35o(),this._5o(t),new df(this)},of("TreeView",e,{ms_ac:[Be,Le,Me,"rootVisible",ci,"rootData",ui,si,Ke,ti,$e,ei,ii,ai,oi,hi,li,Je,Ze,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:ot,_indent:Ua,_rowHeight:Na,_rowLineVisible:st.treeViewRowLineVisible,_rowLineColor:st.treeViewRowLineColor,_scrollBarColor:Xa,_scrollBarSize:Ya,_autoHideScrollBar:Ma,_expandIcon:st.treeViewExpandIcon,_collapseIcon:st.treeViewCollapseIcon,_autoMakeVisible:Pa,_selectBackground:st.treeViewSelectBackground,_labelColor:st.treeViewLabelColor,_labelSelectColor:st.treeViewLabelSelectColor,_labelFont:st.treeViewLabelFont,drawRow:function(t,e,i,n,o,r,a){this.drawRowBackground(t,e,i,n,o,r,a),this._97I(t,e,i,0,o,r,a)}});var df=function(t){ho(df,this,[t])};Us(df,uf,{toggle:function(t,e,i,n){var o=this.list,r=o.lp(t).x;if(as(o.getToggleIcon(e))){var a=i*n;if(a<=r&&r<=a+i)return o.toggle(e),!0}return!!xs(t)&&(o.toggle(e),!0)},_34o:function(t,e){var i=this.list,n=i.lp(t).x,o=i._levelMap[e._id],r=i._indent,a=r*(o+1);return a<=n&&n<=a+r?void i.checkData(e):void(this.toggle(t,e,r,o)||i.setFocusData(e))},_33o:function(t,e){var i=this.list;this.toggle(t,e,i._indent,i.getLevel(e))||df.superClass._33o.call(this,t,e)},handle_keydown:function(t){if(ur(t)||fr(t)){var e=this.list,i=e._rows,n=e.isCheckMode(),o=e.sm(),r=n?e.getFocusData():o.ld();r?r.hasChildren()&&(ur(t)?e.collapse(r):e.expand(r)):0<i.size()&&(r=i.get(0),n?e.setFocusData(r):o.ss(r))}else df.superClass.handle_keydown.call(this,t)}});var ff=nf.TableView=function(t){this._98I(),this._5o(t),new gf(this)};of("TableView",e,{ms_ac:[Be,Le,Me,"sortMode",di,fi,ii,ai,oi,ri,ni,"sortColumn",ui,si,Ke,ti,$e,Je,Ze],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:gi,_editable:!0,_batchEditable:!1,_rowHeight:Na,_rowLineVisible:st.tableViewRowLineVisible,_rowLineColor:st.tableViewRowLineColor,_columnLineVisible:st.tableViewColumnLineVisible,_columnLineColor:st.tableViewColumnLineColor,_scrollBarColor:Xa,_scrollBarSize:Ya,_autoHideScrollBar:Ma,_autoMakeVisible:Pa,_selectBackground:st.tableViewSelectBackground,_labelColor:st.tableViewLabelColor,_labelSelectColor:st.tableViewLabelSelectColor,_labelFont:st.tableViewLabelFont,getCheckColumn:function(){if(!this._31o){var t=this._31o=new af;t.setEditable(!0),t.setWidth(40),t.getValue=this.getCheckColumValue,t.drawCell=this.drawCheckColumnCell}return this._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(t){var e=this._39o,i=this.getCheckColumn();t!==this.isCheckMode()&&(t?e.add(i,0):e.remove(i),this.fp(ci,!t,t))},getCheckColumValue:function(t,e,i){return i.isSelected(t)},drawCheckColumnCell:function(t,e,i,n,o,r,a,s,h){ss(t,h.getCheckIcon(e),o+a/2,r+s/2,e,h)}});var gf=function(t){ho(gf,this,[t])};Us(gf,uf,{_34o:function(t,e){var i=this.list,n=i._31o;if(i.isCellEditable(e,n)){var o=i._3Q(n),r=i.lp(t).x;if(o&&r>=o.startX&&r<o.startX+n.getWidth())return void i.checkData(e)}i.setFocusData(e),i._37O(e,t)},_33o:function(t,e){gf.superClass._33o.apply(this,arguments),this.list._37O(e,t)}});var _f=nf.TreeTableView=function(t){var e=this._4o=new af;this._35o(),this._98I(),this._5o(t),e.setDisplayName("Name"),e.setEditable(!0),e.setWidth(180),e.drawCell=vf,e.getValue=pf,this._39o.add(e),new bf(this)},vf=function(t,e,i,n,o,r,a,s,h){h._97I(t,e,i,o,r,a,s)},pf=function(t,e,i){return i.getLabel(t)};of("TreeTableView",e,{ms_ac:[Be,Le,Me,"sortMode",di,fi,ei,ci,"rootData","rootVisible",ui,si,"sortColumn",hi,li,Ke,ti,$e,Je,oi,ii,ai,ri,ni,Ze,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:gi,_checkMode:ot,_editable:!0,_batchEditable:!1,_indent:Ua,_rowHeight:Na,_rowLineVisible:st.treeTableViewRowLineVisible,_rowLineColor:st.treeTableViewRowLineColor,_columnLineVisible:st.treeTableViewColumnLineVisible,_columnLineColor:st.treeTableViewColumnLineColor,_expandIcon:st.treeTableViewExpandIcon,_collapseIcon:st.treeTableViewCollapseIcon,_scrollBarColor:Xa,_scrollBarSize:Ya,_autoHideScrollBar:Ma,_autoMakeVisible:Pa,_selectBackground:st.treeTableViewSelectBackground,_labelColor:st.treeTableViewLabelColor,_labelSelectColor:st.treeTableViewLabelSelectColor,_labelFont:st.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var bf=function(t){ho(bf,this,[t])};Us(bf,uf,{_34o:function(t,e){var i=this.list,n=i._4o,o=i._3Q(n),r=i.lp(t).x;if(o){var a=i._indent,s=o.startX+a*i.getLevel(e);if(as(i.getToggleIcon(e))&&s<=r&&r<=s+a)return void i.toggle(e);if(i.isCellEditable(e,n)&&((s+=a)<=r&&r<=s+a))return void i.checkData(e)}i.setFocusData(e),i._37O(e,t)},_33o:function(t,e){var i=this.list,n=i.lp(t).x;if(as(i.getToggleIcon(e))){var o=i._3Q(i._4o);if(o){var r=i._indent,a=o.startX+r*i.getLevel(e);if(a<=n&&n<=a+r)return void i.toggle(e)}}bf.superClass._33o.apply(this,arguments),i._37O(e,t)}});var mf=nf.TableHeader=function(t){var e=this,i=e._view=To(1,e),n=e._39o=t.getColumnModel(),o=e.iv;e.tv=e._tableView=t,e._60I=new yh,e._canvas=Do(i),i.style.background=st.tableHeaderBackground||"",i.style.height=Qa+ae,n.mm(o,e),n.md(o,e),n.mh(o,e),t.mp(function(t){Xd[t.property]&&e.iv()},e),new yf(e),e.iv()};of("TableHeader",e,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Be,Me,ei,"moveBackground","insertColor",ri,ni,"resizable","movable"],_checkIcon:xe,_movable:!0,_resizable:!0,_labelColor:st.tableHeaderLabelColor,_labelFont:st.tableHeaderLabelFont,_columnLineColor:st.tableHeaderColumnLineColor,_columnLineVisible:st.tableHeaderColumnLineVisible,_sortDescIcon:st.tableHeaderSortDescIcon,_sortAscIcon:st.tableHeaderSortAscIcon,_moveBackground:st.tableHeaderMoveBackground,_insertColor:st.tableHeaderInsertColor,_indent:Ua,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(t){return t.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(t){return t.getColor()||this._labelColor},getLabelAlign:function(t){return t._align},onPropertyChanged:function(){this.iv()},_5Q:function(t){this._61I=t,this.iv()},getLogicalPoint:function(t){return js(t,this._canvas,this.tv.tx())},validateImpl:function(){var o=this,t=o._canvas,i=o.getWidth(),r=o.getHeight(),e=o.tv,n=o._60I,a=o._61I,s=-e.tx(),h=0;(i!==t.clientWidth||r!==t.clientHeight)&&Po(t,i,r),n.clear(),o._39o._roots.each(function(t){if(t.isVisible()){var e=h+t.getWidth();h<=s+i&&s<=e&&n.add({column:t,startX:h}),h=e}});var l=Ao(t);if(Wo(l,-s,0,1),l.beginPath(),l.rect(s,0,i,r),l.clip(),l.clearRect(s,0,i,r),n.each(function(t){var e=t.column,i=t.startX,n=e.getWidth();0<n&&(l.save(),l.beginPath(),l.rect(i,0,n,r),l.clip(),a&&a.column===e||o.drawColumn(l,e,i,0,n,r),o._columnLineVisible&&Mr(l,i+n-1,0,1,r,o._columnLineColor),l.restore())}),a){var c=a.column,u=(h=a.startX,a.position),d=c.getWidth();l.save(),l.beginPath(),l.rect(h,0,d,r),l.clip(),l.fillStyle=o._moveBackground,l.fill(),o.drawColumn(l,c,h,0,d,r),l.restore(),mo(l,o._insertColor,u,0,r)}l.restore()},_6Q:function(t){var e=this.tv;return e._31o===t&&e.sm().getSelectionMode()===Xt},drawColumn:function(t,e,i,n,o,r){var a=this,s=a.tv,h=as(e.getIcon()),l=a.getLabelAlign(e);if(a._6Q(e)){var c=as(a._checkIcon);ss(t,c,i+o/2,n+r/2,e,a)}else{var u=a.getLabel(e),d=a.getLabelFont(e),f=a.getLabelColor(e),g=ms(d,u).width,_=h?a._indent:0;l===Zt?(h&&hs(t,h,Mi,i,n,_,r),bs(t,u,d,f,i+_,n,o,r,Zt)):l===Jt?(h&&hs(t,h,Mi,i+o-g-_,n,_,r),bs(t,u,d,f,i,n,o,r,Jt)):(h&&hs(t,h,Mi,i+(o-g-_)/2,n,_,r),bs(t,u,d,f,i+(o-g+_)/2,n,0,r,Zt))}if(e.isSortable()&&s.getSortColumn()===e&&(h=as(e.getSortOrder()===_i?a._sortAscIcon:a._sortDescIcon))){var v=vh(h,e)/2+2;ss(t,h,l===Jt?i+v:i+o-v,n+r/2,e,s)}}});var yf=function(t){this.th=t,this.tv=t._tableView,this.addListeners()};Us(yf,e,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(t){this.getView().style.cursor=t},handle_mousemove:function(t){if(!qo){delete this._29o,this.setCursor(Qt);for(var e=this.th,i=e._60I,n=e.lp(t).x,o=i.size()-1;0<=o;o--){var r=i.get(o),a=r.column,s=r.startX+a.getWidth();if(e.isResizable()&&bt(s-n)<=(Nt?10:3))return this._29o=r,void this.setCursor(Ai);(a.isSortable()||e.isMovable()||a===this.tv.getCheckColumn())&&n>=r.startX&&n<=s&&0<a.getWidth()&&(this._29o=r,this.setCursor(Hi))}}},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){os(t),this.tv.endEditing(),this.handle_mousemove(t),this._29o&&(this.x=Os(t).x,this.lx=this.th.lp(t).x,this.w=this._29o.column.getWidth(),Rs(this,t))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,o=e.th,i=e.getView().style.cursor,r=e._29o,a=Os(t).x-e.x;if(e.resizing||e.moving||(i===Ai?e.resizing=1:o.isMovable()&&i===Hi&&2<bt(a)&&(e.moving=1)),e.resizing)r.column.setWidth(e.w+a);else if(e.moving){var s=e.lx+a;o._60I.each(function(t){var e=t.startX,i=e+t.column.getWidth();if(e<=s&&s<=i){var n={column:r.column,startX:r.startX+a,front:s-e<i-s,insertColumn:t.column};n.position=n.front?e:i,o._5Q(n)}})}},_16Q:function(t,e){var i=this.tv,n=this.th,o=n._checkIcon;if(n._6Q(t)){var r=as(o),a=this.lx,s=t.getWidth(),h=vh(r,t);if(e+s/2-h<=a&&a<=e+s/2+h){n.setCheckIcon(o===we?xe:we);var l=i.sm(),c=i._rows;return o===we?l.rs(c):l.ss(c),i.onCheckColumnClicked(t),!0}}return!1},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,i=e.tv,n=e.th,o=e._29o;if(e.moving){var r=n._61I;if(r&&r.insertColumn!==r.column){var a=r.column,s=i.getColumnModel()._roots,h=s.remove(a),l=s.indexOf(r.insertColumn);0<=l&&(r.front||l++,l<=s.size()&&(s.add(a,l),i.getColumnModel()._38I(a,h,l)))}n._5Q(ot),delete e.moving}else if(!e.resizing&&o){a=o.column;var c=n.lp(t).x,u=o.startX,d=!0;if(n.onColumnClicked)!1===n.onColumnClicked(a,t)&&(d=!1);if(d&&u<=c&&c<=u+a.getWidth()&&!e._16Q(a,u)){if(a.isSortable()){var f=i.getSortMode(),g=a.getSortOrder();f===gi?i.getSortColumn()===a?(g===vi&&i.setSortColumn(ot),a.setSortOrder(g===_i?vi:_i)):i.setSortColumn(a):"bistate"===f&&(i.getSortColumn()===a?a.setSortOrder(g===_i?vi:_i):i.setSortColumn(a))}i.onColumnClicked(a,t)}}e._29o=e.resizing=e.x=e.lx=e.w=ot}}),nf.TablePane=function(t){this.init(new ff(t))},of("TablePane",e,{ms_v:1,_44o:1}),nf.TreeTablePane=function(t){this.init(new _f(t))},of("TreeTablePane",e,{ms_v:1,_44o:1}),nf.Toolbar=function(t){var e=this,i=e._view=To(1,e),n=i.style;n.background=st.toolbarBackground||"",n.height=Ga+ae,e._canvas=Do(i),e._30o=new yh,e._90I=new yh,e.setItems(t||[]),i.handleGroupSelectedChanged=function(i){if(i.isSelected()){var n=i.getGroupId();null!=n&&e._items.forEach(function(t){var e=t.element;e&&e!==i&&e.setSelected&&e.getGroupId&&e.getGroupId()===n&&e.setSelected(!1)})}},new wf(e)},of("Toolbar",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[ge,Be,Me,Le,Ze,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:st.toolbarLabelColor,_labelSelectColor:st.toolbarLabelSelectColor,_labelFont:st.toolbarLabelFont,_selectBackground:st.toolbarSelectBackground,_itemGap:st.toolbarItemGap,_separatorColor:st.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(t){var e=this.getItemInfoAt(t);return e?e.item.toolTip:ot},getLabelColor:function(t){return t.selected&&t.type!==we&&"radio"!==t.type?this._labelSelectColor:this._labelColor},onPropertyChanged:function(t){this.iv(),t.property===ge&&this._items.forEach(function(t){So(t)})},redraw:function(){this.iv()},addItem:function(t,e){var i=this._items;e==ot?i.push(t):i.splice(e,0,t),this.fp(ge,ot,i)},removeItem:function(t){if(t)for(var e=this._items,i=0;i<e.length;i++)t===e[i]&&(e.splice(i,1),this.fp(ge,ot,e))},removeItemById:function(t){if(t!=ot)for(var e=this._items,i=0;i<e.length;i++)t===e[i].id&&(e.splice(i,1),this.fp(ge,ot,e))},getItemById:function(t){if(t!=ot)for(var e=this._items,i=0;i<e.length;i++){var n=e[i];if(t===n.id)return n}},getItemInfos:function(){return this._30o},getItemInfoAt:function(t){var e=0,i=this._30o,n=this.lp(t),o=n.x,r=n.y;if(0<=r&&r<=this.getHeight())for(;e<i.size();e++){var a=i.get(e);if(a.startX<=o&&o<=a.endX)return a}return ot},drawItem:function(t,e,i,n,o){if(!1===e.visible)return 0;var r=e.disabled;r&&(t.globalAlpha=Da);var a=this.drawItemImpl(t,e,i,n,o),s=this._itemGap;return r&&(t.globalAlpha=1),this._currentItem!==e||"separator"===e||e.unfocusable||zr(t,this._separatorColor,i-s/2,0,a+s,n),a},drawItemImpl:function(t,e,i,n,o){var r,a=this._view,s=this._itemGap,h=n/2,l=e.type,c=e.label,u=this.getLabelFont(e),d=this.getLabelColor(e),f=e.selected,g=as(e.icon),_=vh(g,e),v=0,p=e.element,b=_+(c?ms(u,c).width:0);if("separator"===e)return mo(t,this._separatorColor,i,n/4,h),1;if(p){g&&ss(t,g,i+_/2,h),bs(t,c,u,d,i+_,0,0,n);var m=Qo(p);o||this._90I.add(m),m.parentNode!==a&&Mo(a,m),p.iv&&p.iv(),p.validate&&p.validate();var y=m.getBoundingClientRect(),w=y.width,x=m.style;return ko(m),x.left=this.tx()+i+b+ae,x.top=(n-y.height)/2+ae,b+w}return"radio"===l?r=as(f?Ce:Ie):l===we&&(r=as(f?we:xe)),r?(v=vh(r,e),ss(t,r,i+v/2,h),i+=v,b+=v):f&&Mr(t,i-s/2,0,b+s,n,this.getSelectBackground(e)),g&&ss(t,g,i+_/2,h),bs(t,c,u,d,i+_,0,0,n),b},validateImpl:function(){var i=this,t=i._canvas,e=i.getWidth(),n=i.getHeight(),o=i._30o,r=i._items;Po(t,e,n);var a=Ao(t),s=i._itemGap,h=s/2;Wo(a,i.tx(),0,1),a.clearRect(0,0,e,n);var l=i._90I;i._90I=new yh,o.clear(),r.forEach(function(t){var e=i.drawItem(a,t,h,n);o.add({item:t,startX:h,endX:h+e,width:e}),e&&(h+=e+s)}),l.each(function(t){i._90I.contains(t)||zs(t)}),i._64I=vt(0,h),a.restore(),i._stickToRight?(i._65O=0,a=Ao(t),h=e-i._64I+s,Wo(a,0,0,1),a.clearRect(0,0,e,n),o.clear(),r.forEach(function(t){var e=i.drawItem(a,t,h,n,!0);o.add({item:t,startX:h,endX:h+e,width:e}),e&&(h+=e+s)}),a.restore()):i.tx(i.tx())},handleClick:function(e){var t=e.type,i=e.action,n=e.groupId,o=e.selected;e.disabled||(n!=ot?o||(e.selected=!0,this._items.forEach(function(t){t.groupId===n&&e!==t&&(t.selected=!1)}),i&&e.action(e,this)):((t===we||"toggle"===t)&&(e.selected=!o),i&&e.action(e,this))),ja(),this.iv()}});var wf=function(t){this.tb=t,this.addListeners()};Us(wf,e,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40*10)},handle_DOMMouseScroll:function(t){this.handleScroll(t,10*-t.detail)},handleScroll:function(t,e){os(t);var i=this.tb;i.isScrollable()&&!i._stickToRight&&(i.tx(i.tx()+e),Yo())},handle_mousemove:function(t){qo?this.info2=this.tb.getItemInfoAt(t):this.setItem(t)},handle_mouseout:function(t){t.target===this.getView()?this.tb.setCurrentItem(ot):this.handle_mousemove(t)},handle_mousedown:function(t){this.handle_mousemove(t),this.handle_touchstart(t)},handle_touchstart:function(t){var e=this.tb,i=t.target;(i===this.getView()||i===e._canvas)&&(os(t),e.setFocus(t)&&(this.setItem(t),(e.isScrollable()||this.info&&!this.info.item.disabled)&&(this.x=Os(t).x,this.tx=e.tx(),Rs(this,t))))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this.tb;if(!e._stickToRight){var i=Os(t).x-this.x;!this._25o&&2<bt(i)&&e.isScrollable()&&(this._25o=1),this._25o&&e.tx(this.tx+i)}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(){var t=this.tb,e=this.info,i=this.info2;if(!this._25o&&e){var n=e.item;i&&i.item!==n||t.handleClick(n)}this._25o=this.x=this.tx=this.info2=ot,this.setItem()},setItem:function(t){var e=this.tb,i=this.info=t?e.getItemInfoAt(t):ot;e.setCurrentItem(i?i.item:ot)}}),nf.BorderPane=function(){this._view=To(1,this),this.iv()},of("BorderPane",e,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(t,e){this._12o("leftView",t),e!=ot&&this.setLeftWidth(e)},getRightView:function(){return this._rightView},setRightView:function(t,e){this._12o("rightView",t),e!=ot&&this.setRightWidth(e)},getTopView:function(){return this._topView},setTopView:function(t,e){this._12o("topView",t),e!=ot&&this.setTopHeight(e)},getBottomView:function(){return this._bottomView},setBottomView:function(t,e){this._12o("bottomView",t),e!=ot&&this.setBottomHeight(e)},getCenterView:function(){return this._centerView},setCenterView:function(t){this._12o("centerView",t)},_12o:function(t,e){var i="_"+t,n=this._view,o=this[i];o!==e&&(o&&(o.getView?zs(o.getView()):zs(o)),(this[i]=e)&&(e.getView?Mo(n,e.getView(),1):Mo(n,e,1)),this.fp(t,o,e))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var t=this,e=t._topView,i=t._bottomView,n=t._leftView,o=t._rightView,r=t._centerView,a=t.getWidth(),s=t.getHeight(),h=0,l=0,c=a,u=s,d=0,f=0,g=0,_=0;e&&(l=d=t._topHeight==ot?zo(e):t._topHeight),i&&(u=s-(f=t._bottomHeight==ot?zo(i):t._bottomHeight)),n&&(h=g=t._leftWidth==ot?Ro(n):t._leftWidth),o&&(c=a-(_=t._rightWidth==ot?Ro(o):t._rightWidth));var v=vt(0,c-h),p=vt(0,u-l);e&&Go(e,0,0,a,d),i&&Go(i,0,u,a,f),n&&Go(n,0,l,g,p),o&&Go(o,c,l,_,p),r&&Go(r,h,l,v,p)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);