<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Greedy Snake</title><meta charset="UTF-8"><style>body,html{padding:0;margin:0}.main{width:100%;height:100%;display:block;background:#000}</style><script src="./js/h_t/ht.js"></script><script src="./js/h_t/ht-shortening-replace.js"></script><script>var gridPerSize,rowColCount,borderSite,food,dataModel,graph3dView,snake=[],score=0,direction="up",isRunning=!0;function init(){borderSite=(gridPerSize=40)*(rowColCount=30)/2,food=null,dataModel=new ht.DataModel,(graph3dView=new ht.graph3d.Graph3dView(dataModel)).setGridVisible(!0),graph3dView.setGridColor("#29B098"),graph3dView.setGridSize(rowColCount),graph3dView.setGridGap(gridPerSize),graph3dView.setCenterAxisVisible(!0);var e=graph3dView.getView();e.className="main",document.body.appendChild(e),window.addEventListener("resize",function(e){graph3dView.invalidate()},!1),graph3dView.getSelectionModel().setSelectionMode("none"),e.addEventListener(ht.Default.isTouchable?"touchstart":"click",function(e){if(isRunning){var t=graph3dView.getHitPosition(e);console.log(t),Math.abs(t[0])<borderSite&&Math.abs(t[2])<borderSite&&("up"===direction||"down"===direction?direction=t[0]>snake[0].getPosition3d()[0]?"right":"left":"left"!==direction&&"right"!==direction||(direction=t[2]>snake[0].getPosition3d()[2]?"down":"up"))}else ht.Default.isDoubleClick(e)&&start()},!1),start(),setInterval(function(){isRunning&&(isRunning=runNext())},200)}function start(){dataModel.clear(),snake=[],direction="up",isRunning=!(score=0);var e=new ht.Shape;e.setPoints(new ht.List([{x:-borderSite,y:-borderSite},{x:borderSite,y:-borderSite},{x:borderSite,y:borderSite},{x:-borderSite,y:borderSite},{x:-borderSite,y:-borderSite}])),e.setThickness(4),e.setTall(gridPerSize),e.setElevation(gridPerSize/2),e.setStyles({"all.color":"rgba(20, 120, 120, 0.5)","all.transparent":!0,"all.reverse.cull":!0}),dataModel.add(e);for(var t=0;t<rowColCount/2;t++)snake.push(createNode(rowColCount/2+t,rowColCount/2));createFood()}function createNode(e,t){var r=new ht.Node;return r.setAttrs({x:e,y:t}),r.setSize3d(.9*gridPerSize,.9*gridPerSize,.9*gridPerSize),r.setPosition3d(gridPerSize*e-borderSite+gridPerSize/2,gridPerSize/2,gridPerSize*t-borderSite+gridPerSize/2),dataModel.add(r),r}function getRandom(){return parseInt(Math.random()*rowColCount)}function createFood(){for(var e=getRandom(),t=getRandom();touchFood(e,t)||touchSnake(e,t);)e=getRandom(),t=getRandom();food&&dataModel.remove(food),(food=createNode(e,t)).setStyles({shape3d:"sphere","shape3d.color":"rgba(255, 0, 0, 0.9)","shape3d.transparent":!0,"shape3d.reverse.cull":!0})}function touchSnake(e,t){for(var r=0;r<snake.length;r++)if(snake[r].getAttr("x")===e&&snake[r].getAttr("y")===t)return!0;return!1}function touchFood(e,t){return food&&food.getAttr("x")===e&&food.getAttr("y")===t}function runNext(){var e=snake[0],t=e.getAttr("x"),r=e.getAttr("y");switch(direction){case"up":r--;break;case"down":r++;break;case"left":t--;break;case"right":t++}return!(t<0||rowColCount<=t||r<0||rowColCount<=r||touchSnake(t,r))&&(touchFood(t,r)?(score++,snake.splice(0,0,createNode(t,r)),createFood()):(snake.splice(0,0,createNode(t,r)),dataModel.remove(snake.pop())),!0)}</script></head><body onload="init()"></body></html>